{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-entering\\pages\\entering\\index.vue?vue&type=style&index=0&id=2093da70&lang=scss&scoped=true&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-entering\\pages\\entering\\index.vue","mtime":1586849107722},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\css-loader\\dist\\cjs.js","mtime":1660903053592},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1660903053930},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\postcss-loader\\src\\index.js","mtime":1576202027988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1660903055666},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5zdGVwcyB7DQogIHBhZGRpbmc6IDIwcHg7DQogIC5uYXYgew0KICAgIHBhZGRpbmctYm90dG9tOiAyMHB4Ow0KICB9DQogIC5ib2R5IHsNCiAgICBwYWRkaW5nOiAzMHB4IDBweCA1MHB4IDBweDsNCiAgICAvLyBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrY3lhbjsNCiAgfQ0KICAuZm9vdGVyIHsNCiAgICBwYWRkaW5nOiAyMHB4IDBweCAyMHB4IDBweDsNCiAgICAvLyBib3JkZXItdG9wOiAxcHggc29saWQgI2VkZWRlZDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/module-entering/pages/entering","sourcesContent":["<template>\r\n  <div class=\"workspace\">\r\n    <!-- 步骤 -->\r\n    <div class=\"steps\">\r\n      <!-- 导航 -->\r\n      <div class=\"nav\">\r\n        <el-steps :active=\"stepsActive\" finish-status=\"success\" simple>\r\n          <el-step title=\"签订入驻协议\">\r\n            <template slot=\"icon\">1</template>\r\n          </el-step>\r\n          <el-step title=\"提交资料\">\r\n            <template slot=\"icon\">2</template>\r\n          </el-step>\r\n          <el-step title=\"入驻审核\">\r\n            <template slot=\"icon\">3</template>\r\n          </el-step>\r\n        </el-steps>\r\n      </div>\r\n\r\n      <div class=\"body\">\r\n        <!-- step 1 签订入驻协议 -->\r\n        <common-entering-step1-sign-agreement\r\n          ref=\"step1\"\r\n          v-show=\"stepsActive === 0\"\r\n          :signAgreement.sync=\"signAgreement\"\r\n        />\r\n\r\n        <!-- step 2 机构提交资料 -->\r\n        <company-entering-step2-submit-information\r\n          ref=\"company-step2\"\r\n          v-show=\"stepsActive === 1 && type === '0'\"\r\n        />\r\n        <!-- step 2 个人提交资料 -->\r\n        <personal-entering-step2-submit-information\r\n          ref=\"personal-step2\"\r\n          v-show=\"stepsActive === 1 && type === '1'\"\r\n        />\r\n\r\n        <!-- step 3 入驻审核 -->\r\n        <common-entering-step3-audit-information ref=\"step3\" v-show=\"stepsActive === 2\" />\r\n      </div>\r\n\r\n      <!-- 按钮 上一步 下一步 提交 -->\r\n      <div class=\"footer\">\r\n        <!-- 上一步 -->\r\n        <el-button v-if=\"stepsActive === 1\" @click=\"handlePrev\">上一步</el-button>\r\n        <!-- 下一步 -->\r\n        <el-button type=\"primary\" :disabled=\"!signAgreement\" @click=\"handleNext\">\r\n          <template v-if=\"stepsActive === 0\">下一步</template>\r\n          <template v-else-if=\"stepsActive === 1\">提交</template>\r\n          <template v-else>回首页</template>\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Watch } from 'vue-property-decorator'\r\nimport { Route } from 'vue-router'\r\nimport CommonEnteringStep1SignAgreement from './components/common-entering-step1-sign-agreement.vue'\r\nimport CompanyEnteringStep2SubmitInformation from './components/company-entering-step2-submit-information.vue'\r\nimport PersonalEnteringStep2SubmitInformation from './components/personal-entering-step2-submit-information.vue'\r\nimport CommonEnteringStep3AuditInformation from './components/common-entering-step3-audit-information.vue'\r\n\r\n@Component({\r\n  components: {\r\n    CommonEnteringStep1SignAgreement,\r\n    CompanyEnteringStep2SubmitInformation,\r\n    PersonalEnteringStep2SubmitInformation,\r\n    CommonEnteringStep3AuditInformation\r\n  }\r\n})\r\nexport default class Entering extends Vue {\r\n  // 机构入驻0，个人入驻1\r\n  private type: any = '0'\r\n  // 当前step\r\n  private stepsActive: number = 0\r\n  // 我已阅读并同意此协议\r\n  private signAgreement: boolean = false\r\n\r\n  // https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#响应路由参数的变化\r\n  @Watch('$route')\r\n  onRouteChanged(to: Route, from: Route) {\r\n    this.init(to)\r\n  }\r\n\r\n  /**\r\n   * 生命周期钩子\r\n   */\r\n  created() {\r\n    this.init(this.$route)\r\n  }\r\n\r\n  /**\r\n   * 初始化\r\n   */\r\n  private init(route: Route) {\r\n    this.type = route.name === 'company-entering' ? '0' : '1'\r\n    this.stepsActive = 0\r\n    this.signAgreement = false\r\n  }\r\n\r\n  // 上一页\r\n  private handlePrev() {\r\n    this.stepsActive -= 1\r\n  }\r\n\r\n  // 下一页\r\n  private async handleNext() {\r\n    if (this.stepsActive === 0) {\r\n      this.stepsActive += 1\r\n    } else if (this.stepsActive === 1) {\r\n      if (this.type === '0') {\r\n        await (this.$refs[\r\n          'company-step2'\r\n        ] as CompanyEnteringStep2SubmitInformation).submitCompany()\r\n      } else {\r\n        await (this.$refs[\r\n          'personal-step2'\r\n        ] as PersonalEnteringStep2SubmitInformation).savePersonalOrg()\r\n      }\r\n      // TODO: 这个地方浏览器console会报错\r\n      this.stepsActive += 1\r\n    } else {\r\n      location.href = `${process.env.VUE_APP_CLIENT_PORTAL_URL}/pages/learing-index.html`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.steps {\r\n  padding: 20px;\r\n  .nav {\r\n    padding-bottom: 20px;\r\n  }\r\n  .body {\r\n    padding: 30px 0px 50px 0px;\r\n    // background-color: darkcyan;\r\n  }\r\n  .footer {\r\n    padding: 20px 0px 20px 0px;\r\n    // border-top: 1px solid #ededed;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>\r\n"]}]}