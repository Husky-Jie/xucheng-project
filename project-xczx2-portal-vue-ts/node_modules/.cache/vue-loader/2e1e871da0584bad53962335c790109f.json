{"remainingRequest":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\module-portal\\pages\\forget-password\\components\\change-password-step2-setting-password.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\module-portal\\pages\\forget-password\\components\\change-password-step2-setting-password.vue","mtime":1577716381308},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBQcm9wIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCB7IEZvcm0gYXMgRWxGb3JtIH0gZnJvbSAnZWxlbWVudC11aScNCmltcG9ydCB7IGNoYW5nZVB3ZCB9IGZyb20gJ0AvYXBpL2xlYXJuaW5nLXVzZXInDQoNCkBDb21wb25lbnQNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYW5nZVBhc3N3b3JkU3RlcDJTZXR0aW5nUGFzc3dvcmQgZXh0ZW5kcyBWdWUgew0KICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0pDQogIHBob25lITogc3RyaW5nDQogIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSkNCiAgdmVyaWZ5VG9rZW4hOiBzdHJpbmcNCiAgLy8g6KGo5Y2V5pWw5o2uDQogIHByaXZhdGUgZm9ybTogYW55ID0gew0KICAgIHBob25lOiAnJywNCiAgICBwYXNzd29yZDogJycsDQogICAgY29uZmlybVB3ZDogJycNCiAgfQ0KICAvLyDpqozor4Hor6bmg4UNCiAgLy8gVE9ETzog5a+G56CB5YW25LuW5qCh6aqMDQogIHByaXZhdGUgdmFsaWRhdGVQYXNzd29yZDogYW55ID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgIGlmICh2YWx1ZSA9PT0gJycpIHsNCiAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5a+G56CBJykpDQogICAgfSBlbHNlIHsNCiAgICAgIGlmICh0aGlzLmZvcm0uY29uZmlybVB3ZCAhPT0gJycpIHsNCiAgICAgICAgbGV0IGZvcm0gPSB0aGlzLiRyZWZzWydmb3JtJ10gYXMgRWxGb3JtDQogICAgICAgIGZvcm0udmFsaWRhdGVGaWVsZCgnY29uZmlybVB3ZCcsICgpID0+IHt9KQ0KICAgICAgfQ0KICAgICAgY2FsbGJhY2soKQ0KICAgIH0NCiAgfQ0KICBwcml2YXRlIHZhbGlkYXRlQ29uZmlybVB3ZDogYW55ID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgIGlmICh2YWx1ZSA9PT0gJycpIHsNCiAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35YaN5qyh6L6T5YWl5a+G56CBJykpDQogICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdGhpcy5mb3JtLnBhc3N3b3JkKSB7DQogICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+S4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCEnKSkNCiAgICB9IGVsc2Ugew0KICAgICAgY2FsbGJhY2soKQ0KICAgIH0NCiAgfQ0KICAvLyDooajljZXpqozor4ENCiAgcHJpdmF0ZSBydWxlczogYW55ID0gew0KICAgIHBhc3N3b3JkOiBbeyB2YWxpZGF0b3I6IHRoaXMudmFsaWRhdGVQYXNzd29yZCwgdHJpZ2dlcjogJ2NoYW5nZScgfV0sDQogICAgY29uZmlybVB3ZDogW3sgdmFsaWRhdG9yOiB0aGlzLnZhbGlkYXRlQ29uZmlybVB3ZCwgdHJpZ2dlcjogJ2NoYW5nZScgfV0NCiAgfQ0KDQogIC8qKg0KICAgKiDmlrDlr4bnoIHmj5DkuqQNCiAgICovDQogIHB1YmxpYyBhc3luYyBjaGFuZ2VQd2QoKTogUHJvbWlzZTxib29sZWFuPiB7DQogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgIGxldCBmb3JtID0gdGhpcy4kcmVmc1snZm9ybSddIGFzIEVsRm9ybQ0KICAgICAgZm9ybS52YWxpZGF0ZShhc3luYyAoaXNWYWxpZDogYm9vbGVhbikgPT4gew0KICAgICAgICBpZiAoaXNWYWxpZCkgew0KICAgICAgICAgIHRoaXMuZm9ybS5waG9uZSA9IHRoaXMucGhvbmUNCiAgICAgICAgICBhd2FpdCBjaGFuZ2VQd2QodGhpcy52ZXJpZnlUb2tlbiwgdGhpcy5mb3JtKQ0KICAgICAgICAgIHJlc29sdmUoKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJlamVjdCgpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSkNCiAgfQ0KfQ0K"},{"version":3,"sources":["change-password-step2-setting-password.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"change-password-step2-setting-password.vue","sourceRoot":"src/module-portal/pages/forget-password/components","sourcesContent":["\r\n<template>\r\n  <div class=\"signItem\">\r\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-position=\"top\">\r\n      <el-form-item label=\"新密码：\" prop=\"password\">\r\n        <el-input v-model=\"form.password\" placeholder></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"验证新密码：\" prop=\"confirmPwd\">\r\n        <el-input v-model=\"form.confirmPwd\" placeholder></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Prop } from 'vue-property-decorator'\r\nimport { Form as ElForm } from 'element-ui'\r\nimport { changePwd } from '@/api/learning-user'\r\n\r\n@Component\r\nexport default class ChangePasswordStep2SettingPassword extends Vue {\r\n  @Prop({ required: true, type: String, default: '' })\r\n  phone!: string\r\n  @Prop({ required: true, type: String, default: '' })\r\n  verifyToken!: string\r\n  // 表单数据\r\n  private form: any = {\r\n    phone: '',\r\n    password: '',\r\n    confirmPwd: ''\r\n  }\r\n  // 验证详情\r\n  // TODO: 密码其他校验\r\n  private validatePassword: any = (rule, value, callback) => {\r\n    if (value === '') {\r\n      callback(new Error('请输入密码'))\r\n    } else {\r\n      if (this.form.confirmPwd !== '') {\r\n        let form = this.$refs['form'] as ElForm\r\n        form.validateField('confirmPwd', () => {})\r\n      }\r\n      callback()\r\n    }\r\n  }\r\n  private validateConfirmPwd: any = (rule, value, callback) => {\r\n    if (value === '') {\r\n      callback(new Error('请再次输入密码'))\r\n    } else if (value !== this.form.password) {\r\n      callback(new Error('两次输入密码不一致!'))\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n  // 表单验证\r\n  private rules: any = {\r\n    password: [{ validator: this.validatePassword, trigger: 'change' }],\r\n    confirmPwd: [{ validator: this.validateConfirmPwd, trigger: 'change' }]\r\n  }\r\n\r\n  /**\r\n   * 新密码提交\r\n   */\r\n  public async changePwd(): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      let form = this.$refs['form'] as ElForm\r\n      form.validate(async (isValid: boolean) => {\r\n        if (isValid) {\r\n          this.form.phone = this.phone\r\n          await changePwd(this.verifyToken, this.form)\r\n          resolve()\r\n        } else {\r\n          reject()\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n</script>"]}]}