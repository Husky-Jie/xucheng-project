{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\course-manage\\course-add.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\course-manage\\course-add.vue","mtime":1663400878160},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgV2F0Y2gsIFZ1ZSB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InDQppbXBvcnQgQ291cnNlQWRkU3RlcDFCYXNlSW5mbyBmcm9tICcuL2NvdXJzZS1hZGQtc3RlcDEtYmFzZS52dWUnDQppbXBvcnQgQ291cnNlQWRkU3RlcDJPdXRsaW5lIGZyb20gJy4vY291cnNlLWFkZC1zdGVwMi1vdXRsaW5lLnZ1ZScNCmltcG9ydCBDb3Vyc2VBZGRTdGVwM1RlYWNoZXIgZnJvbSAnLi9jb3Vyc2UtYWRkLXN0ZXAzLXRlYWNoZXIudnVlJw0KDQpAQ29tcG9uZW50KHsNCiAgbmFtZTogJ0NvdXJzZUFkZCcsDQogIGNvbXBvbmVudHM6IHsNCiAgICBDb3Vyc2VBZGRTdGVwMUJhc2VJbmZvLA0KICAgIENvdXJzZUFkZFN0ZXAyT3V0bGluZSwNCiAgICBDb3Vyc2VBZGRTdGVwM1RlYWNoZXINCiAgfQ0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgVnVlIHsNCiAgcHJpdmF0ZSBjb3Vyc2VCYXNlSWQ6IG51bWJlciA9IDAgLy8g6K++56iLaWQNCiAgcHJpdmF0ZSB0ZWFjaG1vZGU6IHN0cmluZyA9ICcnIC8vIOivvueoi+aooeW8jw0KICBwcml2YXRlIHN0ZXBzQWN0aXZlOiBudW1iZXIgPSAwIC8vIOW9k+WJjXN0ZXANCiAgcHJpdmF0ZSB0aXRsZTogc3RyaW5nID0gJ+W9leaSreivvueoiycNCg0KICBjb25zdHJ1Y3RvcigpIHsNCiAgICBzdXBlcigpDQogIH0NCg0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeVsndGVhY2htb2RlJ10gIT09IHVuZGVmaW5lZCkgew0KICAgICAgdGhpcy50ZWFjaG1vZGUgPSBTdHJpbmcodGhpcy4kcm91dGUucXVlcnlbJ3RlYWNobW9kZSddKQ0KICAgICAgaWYgKHRoaXMudGVhY2htb2RlID09PSAnMjAwMDAzJykgew0KICAgICAgICB0aGlzLnRpdGxlID0gJ+ebtOaSreivvueoiycNCiAgICAgIH0NCiAgICB9DQogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5Wydjb3Vyc2VCYXNlSWQnXSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICB0aGlzLmNvdXJzZUJhc2VJZCA9IE51bWJlcih0aGlzLiRyb3V0ZS5xdWVyeVsnY291cnNlQmFzZUlkJ10pDQogICAgICB0aGlzLnRpdGxlICs9ICct5L+u5pS5Jw0KICAgIH0gZWxzZSB7DQogICAgICB0aGlzLnRpdGxlICs9ICct5paw5aKeJw0KICAgIH0NCiAgfQ0KDQogIGFzeW5jIG1vdW50ZWQoKSB7DQogICAgLy8g6K+75Y+W5Z+65pys5L+h5oGvDQogICAgYXdhaXQgKHRoaXMuJHJlZnNbJ3N0ZXAxJ10gYXMgQ291cnNlQWRkU3RlcDFCYXNlSW5mbykuZ2V0RGF0YSgpDQogIH0NCg0KICAvLyDkuIrkuIDpobUNCiAgaGFuZGxlUHJldigpIHsNCiAgICB0aGlzLnN0ZXBzQWN0aXZlIC09IDENCiAgfQ0KDQogIC8vIOS4i+S4gOmhtQ0KICBhc3luYyBoYW5kbGVOZXh0KCkgeyANCiAgICAvLyB0cnkgew0KICAgIGlmICh0aGlzLnN0ZXBzQWN0aXZlID09IDApIHsNCiAgICAgIC8vIOS/neWtmOWfuuacrOS/oeaBrw0KICAgICAgYXdhaXQgKHRoaXMuJHJlZnNbJ3N0ZXAxJ10gYXMgQ291cnNlQWRkU3RlcDFCYXNlSW5mbykuc2F2ZURhdGEoKQ0KICAgICAgLy8g6K+75Y+W5aSn57qyDQogICAgICBhd2FpdCAodGhpcy4kcmVmc1snc3RlcDInXSBhcyBDb3Vyc2VBZGRTdGVwMk91dGxpbmUpLmdldExpc3QoKQ0KICAgICAgLy8gbmV4dA0KICAgICAgdGhpcy5zdGVwc0FjdGl2ZSArPSAxDQogICAgfSBlbHNlIGlmICh0aGlzLnN0ZXBzQWN0aXZlID09IDEpIHsNCiAgICAgIC8vIOivu+WPluaVmeW4iOWIl+ihqA0KICAgICAgYXdhaXQgKHRoaXMuJHJlZnNbJ3N0ZXAzJ10gYXMgQ291cnNlQWRkU3RlcDNUZWFjaGVyKS5nZXRMaXN0KCkNCiAgICAgIC8vIG5leHQNCiAgICAgIHRoaXMuc3RlcHNBY3RpdmUgKz0gMQ0KICAgIH0gZWxzZSBpZiAodGhpcy5zdGVwc0FjdGl2ZSA9PSAyKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICcvb3JnYW5pemF0aW9uL2NvdXJzZS1saXN0Jw0KICAgICAgfSkNCiAgICB9DQogICAgLy8gfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAvLyB9DQogIH0NCn0NCg=="},{"version":3,"sources":["course-add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"course-add.vue","sourceRoot":"src/module-organization/pages/course-manage","sourcesContent":["<template>\r\n  <div class=\"workspace\">\r\n    <div class=\"banner\">\r\n      <span class=\"primary-title\">{{title}}</span>\r\n    </div>\r\n\r\n    <!-- 步骤 -->\r\n    <div class=\"steps\">\r\n      <!-- 导航 -->\r\n      <div class=\"nav\">\r\n        <el-steps :active=\"stepsActive\" simple style>\r\n          <el-step title=\"基本信息\">\r\n            <template slot=\"icon\">1</template>\r\n          </el-step>\r\n          <el-step title=\"课程大纲\">\r\n            <template slot=\"icon\">2</template>\r\n          </el-step>\r\n          <el-step title=\"教师设置\">\r\n            <template slot=\"icon\">3</template>\r\n          </el-step>\r\n        </el-steps>\r\n      </div>\r\n\r\n      <div class=\"body\">\r\n        <!-- step 1 基本信息 -->\r\n        <CourseAddStep1BaseInfo\r\n          v-show=\"stepsActive === 0\"\r\n          ref=\"step1\"\r\n          :courseBaseId.sync=\"courseBaseId\"\r\n          :teachmode=\"teachmode\"\r\n        />\r\n\r\n        <!-- step 2 课程大纲 -->\r\n        <CourseAddStep2Outline\r\n          v-show=\"stepsActive === 1\"\r\n          ref=\"step2\"\r\n          :courseBaseId=\"courseBaseId\"\r\n          :teachmode=\"teachmode\"\r\n        />\r\n\r\n        <!-- step 3 教师设置 -->\r\n        <CourseAddStep3Teacher v-show=\"stepsActive === 2\" ref=\"step3\" :courseBaseId=\"courseBaseId\" />\r\n      </div>\r\n\r\n      <!-- 按钮 上一步 下一步 完成 -->\r\n      <div class=\"footer\">\r\n        <!-- 上一步 -->\r\n        <el-button @click=\"handlePrev\" v-if=\"stepsActive > 0\">上一步</el-button>\r\n        <!-- 下一步 -->\r\n        <el-button type=\"primary\" @click=\"handleNext\">\r\n          <template v-if=\"stepsActive==0 || stepsActive==1\">保存并进行下一步</template>\r\n          <template v-else-if=\"stepsActive==2\">保存</template>\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- end -->\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Watch, Vue } from 'vue-property-decorator'\r\nimport CourseAddStep1BaseInfo from './course-add-step1-base.vue'\r\nimport CourseAddStep2Outline from './course-add-step2-outline.vue'\r\nimport CourseAddStep3Teacher from './course-add-step3-teacher.vue'\r\n\r\n@Component({\r\n  name: 'CourseAdd',\r\n  components: {\r\n    CourseAddStep1BaseInfo,\r\n    CourseAddStep2Outline,\r\n    CourseAddStep3Teacher\r\n  }\r\n})\r\nexport default class extends Vue {\r\n  private courseBaseId: number = 0 // 课程id\r\n  private teachmode: string = '' // 课程模式\r\n  private stepsActive: number = 0 // 当前step\r\n  private title: string = '录播课程'\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  async created() {\r\n    if (this.$route.query['teachmode'] !== undefined) {\r\n      this.teachmode = String(this.$route.query['teachmode'])\r\n      if (this.teachmode === '200003') {\r\n        this.title = '直播课程'\r\n      }\r\n    }\r\n    if (this.$route.query['courseBaseId'] !== undefined) {\r\n      this.courseBaseId = Number(this.$route.query['courseBaseId'])\r\n      this.title += '-修改'\r\n    } else {\r\n      this.title += '-新增'\r\n    }\r\n  }\r\n\r\n  async mounted() {\r\n    // 读取基本信息\r\n    await (this.$refs['step1'] as CourseAddStep1BaseInfo).getData()\r\n  }\r\n\r\n  // 上一页\r\n  handlePrev() {\r\n    this.stepsActive -= 1\r\n  }\r\n\r\n  // 下一页\r\n  async handleNext() { \r\n    // try {\r\n    if (this.stepsActive == 0) {\r\n      // 保存基本信息\r\n      await (this.$refs['step1'] as CourseAddStep1BaseInfo).saveData()\r\n      // 读取大纲\r\n      await (this.$refs['step2'] as CourseAddStep2Outline).getList()\r\n      // next\r\n      this.stepsActive += 1\r\n    } else if (this.stepsActive == 1) {\r\n      // 读取教师列表\r\n      await (this.$refs['step3'] as CourseAddStep3Teacher).getList()\r\n      // next\r\n      this.stepsActive += 1\r\n    } else if (this.stepsActive == 2) {\r\n      this.$router.push({\r\n        path: '/organization/course-list'\r\n      })\r\n    }\r\n    // } catch (error) {\r\n    // }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.steps {\r\n  padding: 20px;\r\n  .nav {\r\n    padding-bottom: 20px;\r\n  }\r\n  .body {\r\n    padding: 30px 0px 50px 0px;\r\n    // background-color: darkcyan;\r\n  }\r\n  .footer {\r\n    padding: 20px 0px 20px 0px;\r\n    border-top: 1px solid #ededed;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>\r\n"]}]}