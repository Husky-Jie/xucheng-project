{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\work-manage\\components\\work-add-dialog.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\work-manage\\components\\work-add-dialog.vue","mtime":1576474311860},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBQcm9wLCBQcm9wU3luYywgRW1pdCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InDQppbXBvcnQgeyBGb3JtIGFzIEVsRm9ybSB9IGZyb20gJ2VsZW1lbnQtdWknDQppbXBvcnQgeyBJV29ya1ZPIH0gZnJvbSAnQC9lbnRpdHkvd29yay1wYWdlLWxpc3QnDQppbXBvcnQgeyBhZGRXb3JrIH0gZnJvbSAnQC9hcGkvd29ya3MnDQoNCkBDb21wb25lbnQNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdvcmtBZGREaWFsb2cgZXh0ZW5kcyBWdWUgew0KICBAUHJvcFN5bmMoJ2RpYWxvZ1Zpc2libGUnLCB7IHR5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZSB9KQ0KICBzeW5jRGlhbG9nVmlzaWJsZSE6IGJvb2xlYW4NCiAgQFByb3AoeyB0eXBlOiBPYmplY3QsIHJlcXVpcmVkOiB0cnVlIH0pIHJlYWRvbmx5IHdvcmshOiBJV29ya1ZPDQoNCiAgcHJpdmF0ZSBmb3JtTGFiZWxXaWR0aDogc3RyaW5nID0gJzEyMHB4Jw0KICAvLyDpqozor4Hop4TliJkNCiAgcHJpdmF0ZSBydWxlczogYW55ID0gew0KICAgIHRpdGxlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeS9nOS4muWQjeensCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLA0KICAgIHF1ZXN0aW9uOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeS9nOS4muimgeaxgicsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dDQogIH0NCiAgLy8g55So5oi35pON5L2cDQogIGdldEFjdGlvbigpIHsNCiAgICByZXR1cm4gIXRoaXMud29yay53b3JrSWQgPyAn5paw5aKeJyA6ICfnvJbovpEnDQogIH0NCg0KICAvKioNCiAgICog5riF6Zmk5qCh6aqMDQogICAqLw0KICBwcml2YXRlIGNsZWFyVmFsaWRhdGUoKSB7DQogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgbGV0IGZvcm06IEVsRm9ybSA9IHRoaXMuJHJlZnNbJ2Zvcm0nXSBhcyBFbEZvcm0NCiAgICAgIGZvcm0uY2xlYXJWYWxpZGF0ZSgpDQogICAgfSkNCiAgfQ0KDQogIC8qKg0KICAgKiDmlrDlop4v57yW6L6R5L2c5LiaDQogICAqLw0KICBwcml2YXRlIGFzeW5jIGhhbmRsZUFkZFdvcmsoKSB7DQogICAgLy8g6KGo5Y2V6aqM6K+BDQogICAgbGV0IGlzVmFsaWQ6IGJvb2xlYW4gPSB0cnVlDQogICAgbGV0IGZvcm06IEVsRm9ybSA9IHRoaXMuJHJlZnNbJ2Zvcm0nXSBhcyBFbEZvcm0NCiAgICBmb3JtLnZhbGlkYXRlKCh2YWxpZDogYm9vbGVhbikgPT4gew0KICAgICAgaXNWYWxpZCA9IHZhbGlkDQogICAgfSkNCiAgICBpZiAoIWlzVmFsaWQpIHsNCiAgICAgIHJldHVybiBpc1ZhbGlkDQogICAgfQ0KICAgIC8vIOaPkOS6pOihqOWNlQ0KICAgIGF3YWl0IGFkZFdvcmsodGhpcy53b3JrKQ0KDQogICAgLy8g55So5oi35o+Q56S6DQogICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGAke3RoaXMuZ2V0QWN0aW9uKCl95L2c5Lia5oiQ5YqfYCkNCiAgICB0aGlzLnN5bmNEaWFsb2dWaXNpYmxlID0gZmFsc2UNCg0KICAgIC8vIOWIt+aWsOWIl+ihqA0KICAgIHRoaXMucmVmcmVzaExpc3QoKQ0KICB9DQoNCiAgLyoqDQogICAqIOWIt+aWsOWIl+ihqA0KICAgKi8NCiAgQEVtaXQoJ3JlZnJlc2hMaXN0JykNCiAgcHJpdmF0ZSByZWZyZXNoTGlzdCgpIHt9DQp9DQo="},{"version":3,"sources":["work-add-dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"work-add-dialog.vue","sourceRoot":"src/module-organization/pages/work-manage/components","sourcesContent":["<template>\r\n  <el-dialog\r\n    :title=\"`${getAction()}作业`\"\r\n    :visible.sync=\"syncDialogVisible\"\r\n    @open=\"clearValidate\"\r\n    @close=\"clearValidate\"\r\n  >\r\n    <el-form ref=\"form\" :model=\"work\" :rules=\"rules\" :label-width=\"formLabelWidth\">\r\n      <el-form-item label=\"作业名称：\" prop=\"title\">\r\n        <el-input v-model=\"work.title\" placeholder=\"请输入作业名称\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"题干：\" prop=\"question\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          :rows=\"5\"\r\n          v-model=\"work.question\"\r\n          placeholder=\"请输入作业要求\"\r\n          maxlength=\"500\"\r\n          show-word-limit\r\n        ></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"syncDialogVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleAddWork\">提 交</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Prop, PropSync, Emit } from 'vue-property-decorator'\r\nimport { Form as ElForm } from 'element-ui'\r\nimport { IWorkVO } from '@/entity/work-page-list'\r\nimport { addWork } from '@/api/works'\r\n\r\n@Component\r\nexport default class WorkAddDialog extends Vue {\r\n  @PropSync('dialogVisible', { type: Boolean, required: true, default: false })\r\n  syncDialogVisible!: boolean\r\n  @Prop({ type: Object, required: true }) readonly work!: IWorkVO\r\n\r\n  private formLabelWidth: string = '120px'\r\n  // 验证规则\r\n  private rules: any = {\r\n    title: [{ required: true, message: '请输入作业名称', trigger: 'change' }],\r\n    question: [{ required: true, message: '请输入作业要求', trigger: 'change' }]\r\n  }\r\n  // 用户操作\r\n  getAction() {\r\n    return !this.work.workId ? '新增' : '编辑'\r\n  }\r\n\r\n  /**\r\n   * 清除校验\r\n   */\r\n  private clearValidate() {\r\n    this.$nextTick(() => {\r\n      let form: ElForm = this.$refs['form'] as ElForm\r\n      form.clearValidate()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 新增/编辑作业\r\n   */\r\n  private async handleAddWork() {\r\n    // 表单验证\r\n    let isValid: boolean = true\r\n    let form: ElForm = this.$refs['form'] as ElForm\r\n    form.validate((valid: boolean) => {\r\n      isValid = valid\r\n    })\r\n    if (!isValid) {\r\n      return isValid\r\n    }\r\n    // 提交表单\r\n    await addWork(this.work)\r\n\r\n    // 用户提示\r\n    this.$message.success(`${this.getAction()}作业成功`)\r\n    this.syncDialogVisible = false\r\n\r\n    // 刷新列表\r\n    this.refreshList()\r\n  }\r\n\r\n  /**\r\n   * 刷新列表\r\n   */\r\n  @Emit('refreshList')\r\n  private refreshList() {}\r\n}\r\n</script>\r\n"]}]}