{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\utils\\request.ts","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\utils\\request.ts","mtime":1664510087832},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js","mtime":1577501200723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2Nvb2tpZXMnOwp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogJy9hcGknLAogIHRpbWVvdXQ6IDUwMDAgKiA1Cn0pOwpzZXJ2aWNlLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7IC8vIFJlcXVlc3QgaW50ZXJjZXB0b3JzCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHRva2VuID0gZ2V0VG9rZW4oKTsgLy9hbGVydCh0b2tlbikKCiAgaWYgKHRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiLmNvbmNhdCh0b2tlbik7CiAgfSBlbHNlIHsKICAgIHZhciB0ZW1wID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9TRVJWRVJfQVVUSE9SSVpBVElPTjsKCiAgICBpZiAodGVtcCkgewogICAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiLmNvbmNhdCh0ZW1wKTsKICAgIH0KICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIFJlc3BvbnNlIGludGVyY2VwdG9ycwoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHJldHVybiByZXNwb25zZTsKfSwgLy8gcmVzcG9uc2UgPT4gewovLyAJY29uc3QgcmVzID0gcmVzcG9uc2UuZGF0YTsKLy8gCWlmIChyZXMuY29kZSAhPT0gMjAwKSB7Ci8vIAkJTWVzc2FnZSh7Ci8vIAkJCW1lc3NhZ2U6IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicsCi8vIAkJCXR5cGU6ICdlcnJvcicsCi8vIAkJCWR1cmF0aW9uOiA1ICogMTAwMCwKLy8gCQl9KTsKLy8gCQk1MDAxOiB0b2tlbui/h+acnwovLyAJCTUwMDI6IOaXoOaViHRva2VuCi8vIAkJNTAwMzogdG9rZW7moKHpqozlvILluLgKLy8gCQlpZiAocmVzLmNvZGUgPT09IDUwMDEgfHwgcmVzLmNvZGUgPT09IDUwMDIgfHwgcmVzLmNvZGUgPT09IDUwMDMpIHsKLy8gCQkJTWVzc2FnZUJveC5jb25maXJtKCdZb3UgaGF2ZSBiZWVuIGxvZ2dlZCBvdXQsIHRyeSB0byBsb2dpbiBhZ2Fpbi4nLCAnTG9nIG91dCcsIHsKLy8gCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAnUmVsb2dpbicsCi8vIAkJCQljYW5jZWxCdXR0b25UZXh0OiAnQ2FuY2VsJywKLy8gCQkJCXR5cGU6ICd3YXJuaW5nJywKLy8gCQkJfSkudGhlbigoKSA9PiB7Ci8vIAkJCQlVc2VyTW9kdWxlLlJlc2V0VG9rZW4oKTsKLy8gCQkJCWxvY2F0aW9uLnJlbG9hZCgpOyAvLyBUbyBwcmV2ZW50IGJ1Z3MgZnJvbSB2dWUtcm91dGVyCi8vIAkJCX0pOwovLyAJCX0KLy8gCQlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlcy5tZXNzYWdlIHx8ICdFcnJvcicpKTsKLy8gCX0gZWxzZSB7Ci8vIAkJcmV0dXJuIHJlc3BvbnNlLmRhdGE7Ci8vIAl9Ci8vIH0sCmZ1bmN0aW9uIChlcnJvcikgewogIC8vIGRlYnVnZ2VyCiAgTWVzc2FnZSh7CiAgICBtZXNzYWdlOiBlcnJvci5yZXNwb25zZS5kYXRhLmVyck1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KTsKCiAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PSAiNDAxIiAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVyck1lc3NhZ2UgPT0gJ+ayoeacieiupOivgScpIHsKICAgIHdpbmRvdy5sb2NhdGlvbiA9ICdodHRwOi8vd3d3Lnh1ZWNoZW5nLXBsdXMuY29tL3NpZ24uaHRtbCc7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IHZhciBjcmVhdGVBUEkgPSBmdW5jdGlvbiBjcmVhdGVBUEkodXJsKSB7CiAgdmFyIG1ldGhvZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2dldCc7CiAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkOwogIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7CiAgdmFyIGNvbmZpZyA9IHt9OwogIGNvbmZpZy51cmwgPSB1cmw7CiAgY29uZmlnLm1ldGhvZCA9IG1ldGhvZDsKCiAgaWYgKHBhcmFtcyAhPT0gdW5kZWZpbmVkKSB7CiAgICBjb25maWcucGFyYW1zID0gcGFyYW1zOwogIH0KCiAgaWYgKG1ldGhvZCAhPSAnZ2V0JyAmJiBkYXRhICE9PSB1bmRlZmluZWQpIHsKICAgIGNvbmZpZy5kYXRhID0gZGF0YTsKICB9CgogIHJldHVybiBzZXJ2aWNlKGNvbmZpZyk7Cn07CmV4cG9ydCB2YXIgY3JlYXRlRm9ybUFQSSA9IGZ1bmN0aW9uIGNyZWF0ZUZvcm1BUEkodXJsLCBtZXRob2QsIGRhdGEpIHsKICB2YXIgY29uZmlnID0ge307CiAgY29uZmlnLnVybCA9IHVybDsKICBjb25maWcubWV0aG9kID0gbWV0aG9kOwogIGNvbmZpZy5kYXRhID0gZGF0YTsKICBjb25maWcuaGVhZGVycyA9IHsKICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJywKICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogIH07CiAgY29uZmlnLnJlc3BvbnNlVHlwZSA9ICdqc29uJzsKICBjb25maWcudHJhbnNmb3JtUmVxdWVzdCA9IFtmdW5jdGlvbiAoZGF0YSkgewogICAgdmFyIHJldCA9ICcnOwoKICAgIGZvciAodmFyIGl0IGluIGRhdGEpIHsKICAgICAgcmV0ICs9IGVuY29kZVVSSUNvbXBvbmVudChpdCkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtpdF0pICsgJyYnOwogICAgfQoKICAgIHJldHVybiByZXQ7CiAgfV07CiAgcmV0dXJuIHNlcnZpY2UoY29uZmlnKTsKfTsgLy8g6KeG6aKR5LiK5LygCgpleHBvcnQgdmFyIHVwbG9hZFZpZGVvID0gZnVuY3Rpb24gdXBsb2FkVmlkZW8odXJsLCBtZXRob2QsIGRhdGEpIHsKICB2YXIgY29udGVudFR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOwogIHZhciBjb25maWcgPSB7fTsKICBjb25maWcudXJsID0gdXJsOwogIGNvbmZpZy5tZXRob2QgPSBtZXRob2Q7CiAgY29uZmlnLmRhdGEgPSBkYXRhOwogIGNvbmZpZy5oZWFkZXJzID0gewogICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhOyBib3VuZGFyeT1XZWJBcHBCb3VuZGFyeScKICB9OwogIHJldHVybiBzZXJ2aWNlKGNvbmZpZyk7Cn07CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"sources":["D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\utils\\request.ts"],"names":[],"mappings":"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","sourcesContent":["import axios, { AxiosRequestConfig, Method } from 'axios'\r\nimport { Message, MessageBox } from 'element-ui'\r\nimport { getToken } from '@/utils/cookies'\r\n\r\nconst service = axios.create({\r\n  baseURL: '/api',\r\n  timeout: 5000 * 5\r\n})\r\nservice.defaults.headers.post['Content-Type'] = 'application/json'\r\n\r\n// Request interceptors\r\nservice.interceptors.request.use(\r\n  config => {\r\n    let token = getToken()\r\n    //alert(token)\r\n    if (token) { \r\n      config.headers['Authorization'] = `Bearer ${token}`\r\n    } else {\r\n      let temp = process.env.VUE_APP_SERVER_AUTHORIZATION\r\n      if (temp) {\r\n        config.headers['Authorization'] = `Bearer ${temp}`\r\n      }\r\n    }\r\n\r\n    return config\r\n  },\r\n  error => {\r\n    Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Response interceptors\r\nservice.interceptors.response.use(\r\n  response => response,\r\n  // response => {\r\n  // \tconst res = response.data;\r\n  // \tif (res.code !== 200) {\r\n  // \t\tMessage({\r\n  // \t\t\tmessage: res.message || 'Error',\r\n  // \t\t\ttype: 'error',\r\n  // \t\t\tduration: 5 * 1000,\r\n  // \t\t});\r\n  // \t\t5001: token过期\r\n  // \t\t5002: 无效token\r\n  // \t\t5003: token校验异常\r\n  // \t\tif (res.code === 5001 || res.code === 5002 || res.code === 5003) {\r\n  // \t\t\tMessageBox.confirm('You have been logged out, try to login again.', 'Log out', {\r\n  // \t\t\t\tconfirmButtonText: 'Relogin',\r\n  // \t\t\t\tcancelButtonText: 'Cancel',\r\n  // \t\t\t\ttype: 'warning',\r\n  // \t\t\t}).then(() => {\r\n  // \t\t\t\tUserModule.ResetToken();\r\n  // \t\t\t\tlocation.reload(); // To prevent bugs from vue-router\r\n  // \t\t\t});\r\n  // \t\t}\r\n  // \t\treturn Promise.reject(new Error(res.message || 'Error'));\r\n  // \t} else {\r\n  // \t\treturn response.data;\r\n  // \t}\r\n  // },\r\n  error => {\r\n    // debugger\r\n    \r\n    Message({\r\n      message: error.response.data.errMessage || error.message,\r\n      type: 'error',\r\n      duration: 5 * 1000\r\n    })\r\n    if(error.response.status==\"401\" && error.response.data.errMessage=='没有认证'){\r\n      window.location='http://www.51xuecheng.cn/sign.html'\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport const createAPI = (\r\n  url: string,\r\n  method: Method = 'get',\r\n  params: any = undefined,\r\n  data: any = undefined\r\n) => {\r\n  let config: AxiosRequestConfig = {}\r\n  config.url = url\r\n  config.method = method\r\n  if (params !== undefined) {\r\n    config.params = params\r\n  }\r\n  if (method != 'get' && data !== undefined) {\r\n    config.data = data\r\n  }\r\n\r\n  return service(config)\r\n}\r\n\r\nexport const createFormAPI = (url: string, method: Method, data: any) => {\r\n  let config: AxiosRequestConfig = {}\r\n  config.url = url\r\n  config.method = method\r\n  config.data = data\r\n  config.headers = {\r\n    'Cache-Control': 'no-cache',\r\n    'Content-Type': 'application/x-www-form-urlencoded'\r\n  }\r\n  config.responseType = 'json'\r\n  config.transformRequest = [\r\n    function(data) {\r\n      let ret = ''\r\n      for (let it in data) {\r\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n      }\r\n      return ret\r\n    }\r\n  ]\r\n  return service(config)\r\n}\r\n\r\n// 视频上传\r\nexport const uploadVideo = (url: string, method: Method, data: any, contentType = 'application/x-www-form-urlencoded') => {\r\n  let config: AxiosRequestConfig = {}\r\n  config.url = url\r\n  config.method = method\r\n  config.data = data\r\n  config.headers = {\r\n    'Content-Type': 'multipart/form-data; boundary=WebAppBoundary'\r\n  }\r\n  return service(config)\r\n}\r\nexport default service\r\n"],"sourceRoot":""}]}