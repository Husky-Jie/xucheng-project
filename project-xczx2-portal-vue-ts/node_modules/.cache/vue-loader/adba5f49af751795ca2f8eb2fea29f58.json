{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\course-manage\\course-add-step2-select-dialog.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\course-manage\\course-add-step2-select-dialog.vue","mtime":1586849109710},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgUHJvcFN5bmMsIFdhdGNoLCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJw0KaW1wb3J0IENvdXJzZUFkZFR5cGVJdGVtIGZyb20gJy4vY291cnNlLWFkZHR5cGUtaXRlbS52dWUnDQppbXBvcnQgeyBJTWVkaWFQYWdlTGlzdCwgSU1lZGlhQmFzZURUTyB9IGZyb20gJ0AvZW50aXR5L21lZGlhLXBhZ2UtbGlzdCcNCmltcG9ydCB7IGdldE1lZGlhUGFnZUxpc3QgfSBmcm9tICdAL2FwaS9tZWRpYScNCmltcG9ydCB7IGdldFdvcmtQYWdlTGlzdCB9IGZyb20gJ0AvYXBpL3dvcmtzJw0KaW1wb3J0IHsgSVdvcmtQYWdlTGlzdCwgSVdvcmtEVE8gfSBmcm9tICdAL2VudGl0eS93b3JrLXBhZ2UtbGlzdCcNCg0KQENvbXBvbmVudCh7DQogIG5hbWU6ICdPdXRsaW5lU2VsZWN0RGlhbG9nJywNCiAgY29tcG9uZW50czogeyBDb3Vyc2VBZGRUeXBlSXRlbSB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBWdWUgew0KICBAUHJvcFN5bmMoJ2RpYWxvZ1Zpc2libGUnLCB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0pDQogIHN5bmNEaWFsb2dWaXNpYmxlITogYm9vbGVhbg0KICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0pDQogIHR5cGUhOiBzdHJpbmcNCiAgQFByb3AoeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9KQ0KICB0aXRsZSE6IHN0cmluZw0KDQogIHByaXZhdGUgbG9hZGluZzogYm9vbGVhbiA9IGZhbHNlDQogIHByaXZhdGUgb3B0aW9uczogYW55ID0ge30NCiAgcHJpdmF0ZSBzZWxWYWx1ZTogYW55ID0gbnVsbA0KDQogIHB1YmxpYyByZXN0Rm9ybSgpIHsNCiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgIHRoaXMub3B0aW9ucyA9IHt9DQogICAgdGhpcy5zZWxWYWx1ZSA9IG51bGwNCiAgfQ0KDQogIGFzeW5jIHJlbW90ZVF1ZXJ5KHF1ZXJ5KSB7DQogICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KICAgIGlmIChxdWVyeSAhPT0gJycpIHsNCiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICd2aWRlbycpIHsNCiAgICAgICAgdGhpcy5vcHRpb25zID0gYXdhaXQgZ2V0TWVkaWFQYWdlTGlzdCh1bmRlZmluZWQsIHsNCiAgICAgICAgICBmaWxlbmFtZTogcXVlcnksDQogICAgICAgICAgdHlwZTogJzAwMTAwMicsDQogICAgICAgICAgYXVkaXRTdGF0dXM6ICcyMDIwMDMnDQogICAgICAgIH0pDQogICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ2RvYycpIHsNCiAgICAgICAgdGhpcy5vcHRpb25zID0gYXdhaXQgZ2V0TWVkaWFQYWdlTGlzdCh1bmRlZmluZWQsIHsNCiAgICAgICAgICBmaWxlbmFtZTogcXVlcnksDQogICAgICAgICAgdHlwZTogJzAwMTAwMycNCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnd29yaycpIHsNCiAgICAgICAgdGhpcy5vcHRpb25zID0gYXdhaXQgZ2V0V29ya1BhZ2VMaXN0KA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRpdGxlOiBxdWVyeQ0KICAgICAgICAgIH0sDQogICAgICAgICAgdW5kZWZpbmVkDQogICAgICAgICkNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgdGhpcy5vcHRpb25zID0ge30NCiAgICB9DQogICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgfQ0KDQogIGhhbmRsZVNlbGVjdChpdGVtKSB7DQogICAgY29uc29sZS5sb2coaXRlbSkNCiAgfQ0KICBoYW5kbGVDYW5jZWwoKSB7DQogICAgdGhpcy5zeW5jRGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogIH0NCiAgaGFuZGxlU3VibWl0KCkgew0KICAgIGlmICh0aGlzLnR5cGUgPT09ICd2aWRlbycgfHwgdGhpcy50eXBlID09PSAnZG9jJykgew0KICAgICAgdGhpcy4kZW1pdCgnb25TZWxlY3RlZCcsIHsNCiAgICAgICAgdHlwZTogdGhpcy50eXBlLA0KICAgICAgICB2YWx1ZTogdGhpcy5vcHRpb25zLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0uaWQgPT09IHRoaXMuc2VsVmFsdWUpWzBdDQogICAgICB9KQ0KICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnd29yaycpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ29uU2VsZWN0ZWQnLCB7DQogICAgICAgIHR5cGU6IHRoaXMudHlwZSwNCiAgICAgICAgdmFsdWU6IHRoaXMub3B0aW9ucy5pdGVtcy5maWx0ZXIoDQogICAgICAgICAgaXRlbSA9PiBpdGVtLndvcmtJZCA9PT0gdGhpcy5zZWxWYWx1ZQ0KICAgICAgICApWzBdDQogICAgICB9KQ0KICAgIH0NCiAgICB0aGlzLnN5bmNEaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgfQ0KfQ0K"},{"version":3,"sources":["course-add-step2-select-dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"course-add-step2-select-dialog.vue","sourceRoot":"src/module-organization/pages/course-manage","sourcesContent":["<template>\r\n  <el-dialog :title=\"title\" width=\"500px\" :visible.sync=\"syncDialogVisible\">\r\n    <div class=\"types\">\r\n      <el-select\r\n        v-model=\"selValue\"\r\n        filterable\r\n        remote\r\n        reserve-keyword\r\n        placeholder=\"请输入关键词\"\r\n        :remote-method=\"remoteQuery\"\r\n        :loading=\"loading\"\r\n      >\r\n        <!-- 视频 文档 -->\r\n        <template v-if=\"options.items !== undefined && (type === 'video' || type === 'doc')\">\r\n          <el-option\r\n            v-for=\"item in options.items\"\r\n            :key=\"item.id\"\r\n            :label=\"item.filename\"\r\n            :value=\"item.id\"\r\n          ></el-option>\r\n        </template>\r\n        <!-- 作业 -->\r\n        <template v-if=\"options.items !== undefined && type === 'work'\">\r\n          <el-option\r\n            v-for=\"item in options.items\"\r\n            :key=\"item.workId\"\r\n            :label=\"item.title\"\r\n            :value=\"item.workId\"\r\n          ></el-option>\r\n        </template>\r\n      </el-select>\r\n    </div>\r\n    <div slot=\"footer\">\r\n      <el-button @click=\"handleCancel\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.types {\r\n  text-align: center;\r\n  height: 80px;\r\n  .item {\r\n    display: inline-block;\r\n    width: 50%;\r\n    height: 100%;\r\n    // background-color: bisque;\r\n    padding-top: 20px;\r\n    .selected-item {\r\n      margin: 0px auto;\r\n    }\r\n  }\r\n  .el-select {\r\n    width: 90%;\r\n  }\r\n}\r\n</style>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, PropSync, Watch, Vue } from 'vue-property-decorator'\r\nimport CourseAddTypeItem from './course-addtype-item.vue'\r\nimport { IMediaPageList, IMediaBaseDTO } from '@/entity/media-page-list'\r\nimport { getMediaPageList } from '@/api/media'\r\nimport { getWorkPageList } from '@/api/works'\r\nimport { IWorkPageList, IWorkDTO } from '@/entity/work-page-list'\r\n\r\n@Component({\r\n  name: 'OutlineSelectDialog',\r\n  components: { CourseAddTypeItem }\r\n})\r\nexport default class extends Vue {\r\n  @PropSync('dialogVisible', { type: Boolean, default: false })\r\n  syncDialogVisible!: boolean\r\n  @Prop({ required: true, type: String, default: '' })\r\n  type!: string\r\n  @Prop({ required: true, type: String, default: '' })\r\n  title!: string\r\n\r\n  private loading: boolean = false\r\n  private options: any = {}\r\n  private selValue: any = null\r\n\r\n  public restForm() {\r\n    this.loading = false\r\n    this.options = {}\r\n    this.selValue = null\r\n  }\r\n\r\n  async remoteQuery(query) {\r\n    this.loading = true\r\n    if (query !== '') {\r\n      if (this.type === 'video') {\r\n        this.options = await getMediaPageList(undefined, {\r\n          filename: query,\r\n          type: '001002',\r\n          auditStatus: '202003'\r\n        })\r\n      } else if (this.type === 'doc') {\r\n        this.options = await getMediaPageList(undefined, {\r\n          filename: query,\r\n          type: '001003'\r\n        })\r\n      } else if (this.type === 'work') {\r\n        this.options = await getWorkPageList(\r\n          {\r\n            title: query\r\n          },\r\n          undefined\r\n        )\r\n      }\r\n    } else {\r\n      this.options = {}\r\n    }\r\n    this.loading = false\r\n  }\r\n\r\n  handleSelect(item) {\r\n    console.log(item)\r\n  }\r\n  handleCancel() {\r\n    this.syncDialogVisible = false\r\n  }\r\n  handleSubmit() {\r\n    if (this.type === 'video' || this.type === 'doc') {\r\n      this.$emit('onSelected', {\r\n        type: this.type,\r\n        value: this.options.items.filter(item => item.id === this.selValue)[0]\r\n      })\r\n    } else if (this.type === 'work') {\r\n      this.$emit('onSelected', {\r\n        type: this.type,\r\n        value: this.options.items.filter(\r\n          item => item.workId === this.selValue\r\n        )[0]\r\n      })\r\n    }\r\n    this.syncDialogVisible = false\r\n  }\r\n}\r\n</script>\r\n"]}]}