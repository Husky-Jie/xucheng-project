{"remainingRequest":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\work-record-manage\\work-record-overall.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\work-record-manage\\work-record-overall.vue","mtime":1584973675727},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJ0AvY29tcG9uZW50cy9wYWdpbmF0aW9uL2luZGV4LnZ1ZScNCmltcG9ydCBXb3JrUmVjb3JkQ29ycmVjdGlvbkRpYWxvZyBmcm9tICcuL2NvbXBvbmVudHMvd29yay1yZWNvcmQtY29ycmVjdGlvbi1kaWFsb2cudnVlJw0KaW1wb3J0IHsgSUtWRGF0YSB9IGZyb20gJ0AvYXBpL3R5cGVzJw0KaW1wb3J0IHsgQ09VUlNFX1dPUktfU1RBVFVTIH0gZnJvbSAnQC9hcGkvY29uc3RhbnRzJw0KaW1wb3J0IHsNCiAgSVdvcmtSZWNPdmVyYWxsRFRPLA0KICBJV29ya1JlY0dyb3VwRFRPLA0KICBJV29ya1JlY29yZERUTw0KfSBmcm9tICdAL2VudGl0eS93b3JrLXJlY29yZC1wYWdlLWxpc3QnDQppbXBvcnQgeyBnZXRXb3JrUmVjb3JkUmVhZE92ZXJBbGwsIGRlZmF1bHRXb3JrUmVjb3JkIH0gZnJvbSAnQC9hcGkvd29yay1yZWNvcmQnDQoNCkBDb21wb25lbnQoew0KICBjb21wb25lbnRzOiB7DQogICAgUGFnaW5hdGlvbiwNCiAgICBXb3JrUmVjb3JkQ29ycmVjdGlvbkRpYWxvZw0KICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgV29ya1JlY29yZE92ZXJhbGwgZXh0ZW5kcyBWdWUgew0KICAvLyDmibnpmIXnirbmgIHliJfooagNCiAgcHJpdmF0ZSBjb3Vyc2VXb3JrU3RhdHVzOiBJS1ZEYXRhW10gPSBDT1VSU0VfV09SS19TVEFUVVMNCiAgLy8g6K++56iL5L2c5Lia5o+Q5LqkSWQNCiAgcHJpdmF0ZSBjb3Vyc2VXb3JrSWQ6IG51bWJlciA9IDANCiAgLy8g5L2c5Lia5om56ZiF6K+m5oOFDQogIHByaXZhdGUgd29ya1JlY092ZXJhbGw6IElXb3JrUmVjT3ZlcmFsbERUTyA9IHt9DQogIC8vIOivvueoi+iuoeWIkue0ouW8lQ0KICBwcml2YXRlIHJlY0dyb3VwSW5kZXg6IHN0cmluZyA9ICcwJw0KICAvLyDkvZzkuJrmj5DkuqTorrDlvZUNCiAgcHJpdmF0ZSB3b3JrUmVjb3JkTGlzdDogSVdvcmtSZWNvcmREVE9bXSB8IHVuZGVmaW5lZCA9IFtdDQogIC8vIOS9nOS4muaJuemYheWvueivneahhg0KICBwcml2YXRlIGRpYWxvZ1Zpc2libGU6IGJvb2xlYW4gPSBmYWxzZQ0KICAvLyDljZXmnaHkvZzkuJoNCiAgcHJpdmF0ZSB3b3JrUmVjb3JkOiBJV29ya1JlY29yZERUTyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRXb3JrUmVjb3JkKQ0KICAvLyDpopjnm64NCiAgcHJpdmF0ZSBxdWVzdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkID0gJycNCiAgLy8g5a2m55Sf5L2c5Lia6K+m5oOFDQogIHByaXZhdGUgYW5zd2VyOiBzdHJpbmcgfCB1bmRlZmluZWQgPSAnJw0KDQogIC8vIOiuoeeul+WxnuaApw0KICBnZXRDb3Vyc2VXb3JrU3RhdHVzKHN0YXR1czogc3RyaW5nKSB7DQogICAgbGV0IGl0ZW0gPSB0aGlzLmNvdXJzZVdvcmtTdGF0dXMuZmluZCgodmFsdWU6IElLVkRhdGEpID0+IHsNCiAgICAgIHJldHVybiBzdGF0dXMgPT0gdmFsdWUuY29kZQ0KICAgIH0pDQogICAgcmV0dXJuICFpdGVtID8gJycgOiBpdGVtLmRlc2MNCiAgfQ0KDQogIC8qKg0KICAgKiDnlJ/lkb3lkajmnJ/pkqnlrZANCiAgICovDQogIGNyZWF0ZWQoKSB7DQogICAgbGV0IGNvdXJzZVdvcmtJZDogYW55ID0gdGhpcy4kcm91dGUucXVlcnkuY291cnNlV29ya0lkDQogICAgdGhpcy5jb3Vyc2VXb3JrSWQgPSBwYXJzZUludChjb3Vyc2VXb3JrSWQpDQogICAgdGhpcy5nZXRXb3JrUmVjb3JkUmVhZE92ZXJBbGwoKQ0KICB9DQoNCiAgLyoqDQogICAqIOS9nOS4muaJuemYheivpuaDhQ0KICAgKi8NCiAgcHJpdmF0ZSBhc3luYyBnZXRXb3JrUmVjb3JkUmVhZE92ZXJBbGwoKSB7DQogICAgdGhpcy53b3JrUmVjT3ZlcmFsbCA9IGF3YWl0IGdldFdvcmtSZWNvcmRSZWFkT3ZlckFsbCh0aGlzLmNvdXJzZVdvcmtJZCkNCiAgICBpZiAodGhpcy53b3JrUmVjT3ZlcmFsbC5yZWNHcm91cERUT0xpc3QpIHsNCiAgICAgIHRoaXMud29ya1JlY29yZExpc3QgPSB0aGlzLndvcmtSZWNPdmVyYWxsLnJlY0dyb3VwRFRPTGlzdFswXS53b3JrUmVjb3JkTGlzdA0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiDot7PovazliLDkvZzkuJrmibnmlLnpobXpnaINCiAgICovDQogIHByaXZhdGUgZ29Ub1dvcmtSZWNvcmRMaXN0VmlldygpIHsNCiAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogIH0NCg0KICAvKioNCiAgICog54K55Ye7VGFw5YiH5o2i6K++56iL6K6h5YiSDQogICAqLw0KICBwcml2YXRlIGhhbmRsZUNsaWNrUmVjR3JvdXBUYXAodGFiOiBhbnksIGV2ZW50OiBhbnkpIHsNCiAgICBsZXQgaW5kZXg6IG51bWJlciA9IHBhcnNlSW50KHRoaXMucmVjR3JvdXBJbmRleCkNCiAgICBpZiAodGhpcy53b3JrUmVjT3ZlcmFsbC5yZWNHcm91cERUT0xpc3QpIHsNCiAgICAgIHRoaXMud29ya1JlY29yZExpc3QgPSB0aGlzLndvcmtSZWNPdmVyYWxsLnJlY0dyb3VwRFRPTGlzdFsNCiAgICAgICAgaW5kZXgNCiAgICAgIF0ud29ya1JlY29yZExpc3QNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICog5omT5byA5L2c5Lia5om56ZiF5a+56K+d5qGGDQogICAqLw0KICBwcml2YXRlIGhhbmRsZU9wZW5Xb3JrUmVjb3JkRGlhbG9nKHJvdzogSVdvcmtSZWNvcmREVE8pIHsNCiAgICB0aGlzLnF1ZXN0aW9uID0gcm93LnF1ZXN0aW9uDQogICAgdGhpcy5hbnN3ZXIgPSByb3cuYW5zd2VyDQoNCiAgICB0aGlzLndvcmtSZWNvcmQuY291cnNlUHViSWQgPSByb3cuY291cnNlUHViSWQNCiAgICB0aGlzLndvcmtSZWNvcmQudGVhY2hwbGFuSWQgPSByb3cudGVhY2hwbGFuSWQNCiAgICB0aGlzLndvcmtSZWNvcmQudGVhY2hwbGFuTmFtZSA9IHJvdy50ZWFjaHBsYW5OYW1lDQogICAgdGhpcy53b3JrUmVjb3JkLndvcmtJZCA9IHJvdy53b3JrSWQNCiAgICB0aGlzLndvcmtSZWNvcmQud29ya1JlY29yZElkID0gcm93LndvcmtSZWNvcmRJZA0KDQogICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICB9DQp9DQo="},{"version":3,"sources":["work-record-overall.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"work-record-overall.vue","sourceRoot":"src/module-organization/pages/work-record-manage","sourcesContent":["<template>\r\n  <div class=\"course-list portal-content\">\r\n    <div class=\"workspace\">\r\n      <el-page-header @back=\"goToWorkRecordListView\" content=\"批阅详情\"></el-page-header>\r\n\r\n      <!-- TODO: 样式调整 -->\r\n      <!-- <div class=\"banner\">\r\n        <span class=\"primary-title\">批阅详情</span>\r\n      </div>-->\r\n\r\n      <el-row>\r\n        <el-col :span=\"8\">课程名称：{{ workRecOverall.courseName }}</el-col>\r\n        <el-col :span=\"8\">课程包含作业数：{{ workRecOverall.workNumber }}</el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-col :span=\"8\">课程总人数：{{ workRecOverall.learnerNumber }}</el-col>\r\n        <el-col :span=\"8\">提交作业人数：{{ workRecOverall.committerNumber }}</el-col>\r\n        <el-col\r\n          :span=\"8\"\r\n        >作业总数/待批阅数：{{ workRecOverall.answerNumber }} / {{ workRecOverall.tobeReviewed }}</el-col>\r\n      </el-row>\r\n\r\n      <!-- 数据列表-->\r\n      <el-tabs v-model=\"recGroupIndex\" @tab-click=\"handleClickRecGroupTap\">\r\n        <el-tab-pane\r\n          v-for=\"(item, index) in workRecOverall.recGroupDTOList\"\r\n          :key=\"index\"\r\n          :label=\"item.teachplanName\"\r\n          :name=\"index.toString()\"\r\n        >\r\n          <el-table\r\n            class=\"dataList\"\r\n            :data=\"workRecordList\"\r\n            border\r\n            style=\"width: 100%\"\r\n            :header-cell-style=\"{ textAlign: 'center' }\"\r\n          >\r\n            <el-table-column prop=\"username\" label=\"用户名\" align=\"center\"></el-table-column>\r\n\r\n            <el-table-column label=\"提交时间\" align=\"center\">\r\n              <template slot-scope=\"scope\">{{ scope.row.createDate | dateTimeFormat }}</template>\r\n            </el-table-column>\r\n\r\n            <el-table-column prop=\"correctComment\" label=\"评语\" align=\"center\"></el-table-column>\r\n\r\n            <el-table-column label=\"状态\" align=\"center\">\r\n              <template slot-scope=\"scope\">{{ getCourseWorkStatus(scope.row.status) }}</template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"操作\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  type=\"text\"\r\n                  size=\"mini\"\r\n                  :disabled=\"scope.row.status !== '306002'\"\r\n                  @click=\"handleOpenWorkRecordDialog(scope.row)\"\r\n                >批阅</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </div>\r\n\r\n    <!-- 上传资料对话框 -->\r\n    <work-record-correction-dialog\r\n      :dialogVisible.sync=\"dialogVisible\"\r\n      :question=\"question\"\r\n      :answer=\"answer\"\r\n      :workRecord=\"workRecord\"\r\n      @refreshList=\"getWorkRecordReadOverAll\"\r\n    ></work-record-correction-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Watch } from 'vue-property-decorator'\r\nimport Pagination from '@/components/pagination/index.vue'\r\nimport WorkRecordCorrectionDialog from './components/work-record-correction-dialog.vue'\r\nimport { IKVData } from '@/api/types'\r\nimport { COURSE_WORK_STATUS } from '@/api/constants'\r\nimport {\r\n  IWorkRecOverallDTO,\r\n  IWorkRecGroupDTO,\r\n  IWorkRecordDTO\r\n} from '@/entity/work-record-page-list'\r\nimport { getWorkRecordReadOverAll, defaultWorkRecord } from '@/api/work-record'\r\n\r\n@Component({\r\n  components: {\r\n    Pagination,\r\n    WorkRecordCorrectionDialog\r\n  }\r\n})\r\nexport default class WorkRecordOverall extends Vue {\r\n  // 批阅状态列表\r\n  private courseWorkStatus: IKVData[] = COURSE_WORK_STATUS\r\n  // 课程作业提交Id\r\n  private courseWorkId: number = 0\r\n  // 作业批阅详情\r\n  private workRecOverall: IWorkRecOverallDTO = {}\r\n  // 课程计划索引\r\n  private recGroupIndex: string = '0'\r\n  // 作业提交记录\r\n  private workRecordList: IWorkRecordDTO[] | undefined = []\r\n  // 作业批阅对话框\r\n  private dialogVisible: boolean = false\r\n  // 单条作业\r\n  private workRecord: IWorkRecordDTO = Object.assign({}, defaultWorkRecord)\r\n  // 题目\r\n  private question: string | undefined = ''\r\n  // 学生作业详情\r\n  private answer: string | undefined = ''\r\n\r\n  // 计算属性\r\n  getCourseWorkStatus(status: string) {\r\n    let item = this.courseWorkStatus.find((value: IKVData) => {\r\n      return status == value.code\r\n    })\r\n    return !item ? '' : item.desc\r\n  }\r\n\r\n  /**\r\n   * 生命周期钩子\r\n   */\r\n  created() {\r\n    let courseWorkId: any = this.$route.query.courseWorkId\r\n    this.courseWorkId = parseInt(courseWorkId)\r\n    this.getWorkRecordReadOverAll()\r\n  }\r\n\r\n  /**\r\n   * 作业批阅详情\r\n   */\r\n  private async getWorkRecordReadOverAll() {\r\n    this.workRecOverall = await getWorkRecordReadOverAll(this.courseWorkId)\r\n    if (this.workRecOverall.recGroupDTOList) {\r\n      this.workRecordList = this.workRecOverall.recGroupDTOList[0].workRecordList\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 跳转到作业批改页面\r\n   */\r\n  private goToWorkRecordListView() {\r\n    this.$router.go(-1)\r\n  }\r\n\r\n  /**\r\n   * 点击Tap切换课程计划\r\n   */\r\n  private handleClickRecGroupTap(tab: any, event: any) {\r\n    let index: number = parseInt(this.recGroupIndex)\r\n    if (this.workRecOverall.recGroupDTOList) {\r\n      this.workRecordList = this.workRecOverall.recGroupDTOList[\r\n        index\r\n      ].workRecordList\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 打开作业批阅对话框\r\n   */\r\n  private handleOpenWorkRecordDialog(row: IWorkRecordDTO) {\r\n    this.question = row.question\r\n    this.answer = row.answer\r\n\r\n    this.workRecord.coursePubId = row.coursePubId\r\n    this.workRecord.teachplanId = row.teachplanId\r\n    this.workRecord.teachplanName = row.teachplanName\r\n    this.workRecord.workId = row.workId\r\n    this.workRecord.workRecordId = row.workRecordId\r\n\r\n    this.dialogVisible = true\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.course-list {\r\n  .nav-bar {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .workspace .banner .btn-add {\r\n    float: right;\r\n  }\r\n\r\n  .searcher {\r\n    margin-top: 16px;\r\n\r\n    div {\r\n      width: 218px;\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n\r\n  .dataList {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .dataList-pagination {\r\n    text-align: center;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n"]}]}