{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\course-comment-manage\\course-comment-list.vue?vue&type=style&index=0&id=99e78b76&lang=scss&scoped=true&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\course-comment-manage\\course-comment-list.vue","mtime":1610853292273},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\css-loader\\dist\\cjs.js","mtime":1660903053592},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1660903053930},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\postcss-loader\\src\\index.js","mtime":1576202027988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1660903055666},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jb3Vyc2UtbGlzdCB7DQogIC5uYXYtYmFyIHsNCiAgICBtYXJnaW4tdG9wOiAxNnB4Ow0KICB9DQoNCiAgLndvcmtzcGFjZSAuYmFubmVyIC5idG4tYWRkIHsNCiAgICBmbG9hdDogcmlnaHQ7DQogIH0NCg0KICAuc2VhcmNoZXIgew0KICAgIG1hcmdpbi10b3A6IDE2cHg7DQoNCiAgICAuZWwtaW5wdXQgew0KICAgICAgd2lkdGg6IDIxOHB4Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiA0MHB4Ow0KICAgIH0NCiAgICAvLyBkaXYgew0KICAgIC8vICAgd2lkdGg6IDIxOHB4Ow0KICAgIC8vICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgIC8vIH0NCiAgfQ0KDQogIC5kYXRhTGlzdCB7DQogICAgbWFyZ2luLXRvcDogMTZweDsNCg0KICAgIC5jb3Vyc2UtY29tbWVudCB7DQogICAgICBwYWRkaW5nOiAyMHB4IDA7DQogICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2VkZWRlZDsNCg0KICAgICAgLnVzZXItaGVhZCB7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBtYXJnaW4tdG9wOiAxMHB4Ow0KICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICB9DQoNCiAgICAgIC5jb21tZW50LXRleHQgew0KICAgICAgICBjb2xvcjogIzMzMzMzMzsNCiAgICAgIH0NCg0KICAgICAgLmNvbWUtZnJvbSB7DQogICAgICAgIGNvbG9yOiAjOTk5OTk5Ow0KICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICB9DQoNCiAgICAgIC5jb21tZW50LXJlcGx5IHsNCiAgICAgICAgbWFyZ2luLXRvcDogMjBweDsNCiAgICAgICAgcGFkZGluZzogMTVweCAxNHB4IDVweCAxNHB4Ow0KICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4Ow0KDQogICAgICAgIC5yZXBseS1pdGVtIHsNCiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KDQogICAgICAgICAgLnJlcGx5LXRleHQgew0KICAgICAgICAgICAgY29sb3I6ICM2NjY2NjY7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLnJlcGx5LWRhdGUgew0KICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4Ow0KICAgICAgICAgICAgY29sb3I6ICM5OTk5OTk7DQogICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC5teS1yZXBseS10ZXh0IHsNCiAgICAgICAgbWFyZ2luLXRvcDogMjVweDsNCiAgICAgIH0NCg0KICAgICAgLnJlcGx5LWJ1dHRvbiB7DQogICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KICAgICAgfQ0KICAgIH0NCg0KICAgIC5jb3Vyc2UtY29tbWVudDpsYXN0LWNoaWxkIHsNCiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWRlZGVkOw0KICAgIH0NCiAgfQ0KDQogIC5kYXRhTGlzdC1wYWdpbmF0aW9uIHsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgd2lkdGg6IDEwMCU7DQogIH0NCn0NCg=="},{"version":3,"sources":["course-comment-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8NA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"course-comment-list.vue","sourceRoot":"src/module-organization/pages/course-comment-manage","sourcesContent":["<template>\r\n  <div class=\"course-list portal-content\">\r\n    <div class=\"workspace\">\r\n      <div class=\"banner\">\r\n        <span class=\"primary-title\">评价管理</span>\r\n      </div>\r\n\r\n      <!-- 搜索栏 -->\r\n      <div class=\"searcher\">\r\n        <el-input\r\n          class=\"el-input\"\r\n          placeholder=\"请输入课程名称\"\r\n          suffix-icon=\"el-icon-search\"\r\n          v-model=\"listQueryData.targetName\"\r\n        />\r\n        <el-radio-group v-model=\"listQueryData.level\">\r\n          <el-radio :label=\"2\">全部评价</el-radio>\r\n          <el-radio :label=\"1\">好评</el-radio>\r\n          <el-radio :label=\"0\">中评</el-radio>\r\n          <el-radio :label=\"-1\">差评</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n\r\n      <!-- 数据列表 -->\r\n      <!-- TODO: 拆成组件 -->\r\n      <div class=\"dataList\">\r\n        <el-row\r\n          :gutter=\"10\"\r\n          v-for=\"(comment, index) in listResult.items\"\r\n          :key=\"index\"\r\n          class=\"course-comment\"\r\n        >\r\n          <el-col :span=\"1\">\r\n            <img :src=\"comment.userHead\" class=\"user-head\" />\r\n          </el-col>\r\n          <el-col :span=\"23\">\r\n            <el-row>\r\n              <el-col :span=\"24\">\r\n                <el-rate v-model=\"comment.starRank\" disabled></el-rate>\r\n              </el-col>\r\n              <el-col :span=\"24\">\r\n                <el-row>\r\n                  <el-col :span=\"23\" class=\"comment-text\">{{ comment.commentText }}</el-col>\r\n                  <el-col :span=\"1\">\r\n                    <el-button\r\n                      type=\"text\"\r\n                      size=\"mini\"\r\n                      @click=\"handleShowReplyTextarea(comment)\"\r\n                    >{{ getReplyStatus(comment) }}</el-button>\r\n                  </el-col>\r\n                </el-row>\r\n              </el-col>\r\n              <el-col\r\n                :span=\"24\"\r\n                class=\"come-from\"\r\n              >已上课10小时 评价来自《{{ comment.comeFrom }}》 {{ comment.commentDate | dateTimeFormat }} 举报</el-col>\r\n              <el-col\r\n                :span=\"24\"\r\n                class=\"comment-reply\"\r\n                v-if=\"comment.replyDTOList && comment.replyDTOList.length\"\r\n              >\r\n                <el-row\r\n                  v-for=\"(reply, subIndex) in comment.replyDTOList\"\r\n                  :key=\"subIndex\"\r\n                  class=\"reply-item\"\r\n                >\r\n                  <el-col :span=\"24\" class=\"reply-text\">{{ reply.nickName }}回复：{{ reply.replyText }}</el-col>\r\n                  <el-col :span=\"24\" class=\"reply-date\">{{ reply.replyDate | dateTimeFormat }}</el-col>\r\n                </el-row>\r\n              </el-col>\r\n              <el-col :span=\"24\" v-if=\"comment.showReplyTextarea\" class=\"my-reply-text\">\r\n                <el-input\r\n                  type=\"textarea\"\r\n                  :rows=\"5\"\r\n                  v-model=\"comment.myReplyText\"\r\n                  placeholder\r\n                  maxlength=\"200\"\r\n                  show-word-limit\r\n                ></el-input>\r\n              </el-col>\r\n              <el-col :span=\"24\" v-if=\"comment.showReplyTextarea\" class=\"reply-button\">\r\n                <el-button\r\n                  type=\"primary\"\r\n                  size=\"medium\"\r\n                  class=\"btn-add el-button\"\r\n                  :disabled=\"!comment.myReplyText\"\r\n                  @click=\"handleReplyCourseComment(comment)\"\r\n                >发表回复</el-button>\r\n              </el-col>\r\n            </el-row>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n\r\n      <!-- 翻页控制 -->\r\n      <div class=\"dataList-pagination\">\r\n        <Pagination\r\n          v-show=\"listResult.counts > 0\"\r\n          :total=\"listResult.counts\"\r\n          :page.sync=\"listQuery.pageNo\"\r\n          :limit.sync=\"listQuery.pageSize\"\r\n          @pagination=\"getCourseCommentPageList\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Watch } from 'vue-property-decorator'\r\nimport Pagination from '@/components/pagination/index.vue'\r\nimport {\r\n  ICourseCommentPageVO,\r\n  ICommentDTO\r\n} from '@/entity/course-comment-page-list'\r\nimport {\r\n  getCourseCommentPageList,\r\n  replyCourseComment\r\n} from '@/api/course-comment'\r\n\r\n@Component({\r\n  components: {\r\n    Pagination\r\n  }\r\n})\r\nexport default class CourseCommentList extends Vue {\r\n  // 是否载入中\r\n  private listLoading: boolean = false\r\n  // 请求参数Query\r\n  private listQuery = {\r\n    pageNo: 1,\r\n    pageSize: 10\r\n  }\r\n  // 请求参数body\r\n  private listQueryData = {\r\n    targetName: '',\r\n    level: 2\r\n  }\r\n  // 评论列表\r\n  private listResult: ICourseCommentPageVO = {}\r\n\r\n  // 计算属性\r\n  getReplyStatus(comment: any) {\r\n    if (comment.replyDTOList && comment.replyDTOList.length > 0) {\r\n      return '已回复'\r\n    }\r\n    return !comment.showReplyTextarea ? '回复' : '取消回复'\r\n  }\r\n\r\n  /**\r\n   * 评论列表\r\n   */\r\n  private async getCourseCommentPageList() {\r\n    this.listLoading = true\r\n    let tempQueryData: any = {}\r\n    if (this.listQueryData.targetName) {\r\n      tempQueryData.targetName = this.listQueryData.targetName\r\n    }\r\n    if (this.listQueryData.level != 2) {\r\n      tempQueryData.level = this.listQueryData.level\r\n    }\r\n    let listResult: ICourseCommentPageVO = await getCourseCommentPageList(\r\n      this.listQuery,\r\n      tempQueryData\r\n    )\r\n    if (listResult && listResult.items) {\r\n      listResult.items = listResult.items.map((item: any) => {\r\n        item.showReplyTextarea = false\r\n        item.myReplyText = ''\r\n        return item\r\n      })\r\n    }\r\n    this.listResult = listResult\r\n    this.listLoading = false\r\n  }\r\n\r\n  /**\r\n   * 回复/取消回复\r\n   */\r\n  private handleShowReplyTextarea(comment: any) {\r\n    comment.showReplyTextarea = !comment.showReplyTextarea\r\n  }\r\n\r\n  /**\r\n   * 发表回复\r\n   */\r\n  private async handleReplyCourseComment(comment: any) {\r\n    let body = {\r\n      commentId: comment.commentId,\r\n      replyText: comment.myReplyText\r\n    }\r\n    // 提交表单\r\n    await replyCourseComment(body)\r\n\r\n    // 用户提示\r\n    this.$message.success('发布回复成功')\r\n    comment.showReplyTextarea = false\r\n    comment.myReplyText = ''\r\n\r\n    // 刷新列表\r\n    this.getCourseCommentPageList()\r\n  }\r\n\r\n  // 监控 watch\r\n  // 搜索栏\r\n  @Watch('listQueryData', { deep: true, immediate: true })\r\n  private watchListQueryData(newVal: string) {\r\n    if (newVal == '') {\r\n      return\r\n    }\r\n    this.getCourseCommentPageList()\r\n  }\r\n\r\n  // 翻页 pageSize\r\n  @Watch('listQuery.pageSize', { immediate: true })\r\n  private watchListQueryPageSize(newVal: number) {\r\n    this.listQuery.pageNo = 1\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.course-list {\r\n  .nav-bar {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .workspace .banner .btn-add {\r\n    float: right;\r\n  }\r\n\r\n  .searcher {\r\n    margin-top: 16px;\r\n\r\n    .el-input {\r\n      width: 218px;\r\n      margin-right: 40px;\r\n    }\r\n    // div {\r\n    //   width: 218px;\r\n    //   margin-right: 10px;\r\n    // }\r\n  }\r\n\r\n  .dataList {\r\n    margin-top: 16px;\r\n\r\n    .course-comment {\r\n      padding: 20px 0;\r\n      border-top: 1px solid #ededed;\r\n\r\n      .user-head {\r\n        width: 100%;\r\n        margin-top: 10px;\r\n        border-radius: 50%;\r\n      }\r\n\r\n      .comment-text {\r\n        color: #333333;\r\n      }\r\n\r\n      .come-from {\r\n        color: #999999;\r\n        font-size: 12px;\r\n      }\r\n\r\n      .comment-reply {\r\n        margin-top: 20px;\r\n        padding: 15px 14px 5px 14px;\r\n        background-color: #f8f8f8;\r\n\r\n        .reply-item {\r\n          margin-bottom: 10px;\r\n\r\n          .reply-text {\r\n            color: #666666;\r\n          }\r\n\r\n          .reply-date {\r\n            margin-top: 5px;\r\n            color: #999999;\r\n            font-size: 12px;\r\n          }\r\n        }\r\n      }\r\n\r\n      .my-reply-text {\r\n        margin-top: 25px;\r\n      }\r\n\r\n      .reply-button {\r\n        margin-top: 10px;\r\n        text-align: right;\r\n      }\r\n    }\r\n\r\n    .course-comment:last-child {\r\n      border-bottom: 1px solid #ededed;\r\n    }\r\n  }\r\n\r\n  .dataList-pagination {\r\n    text-align: center;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n"]}]}