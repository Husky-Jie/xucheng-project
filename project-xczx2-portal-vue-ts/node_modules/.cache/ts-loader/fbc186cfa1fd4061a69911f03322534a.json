{"remainingRequest":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\thread-loader\\dist\\cjs.js!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js??ref--13-3!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\media-add-dialog.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\media-add-dialog.vue","mtime":1676692684068},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1577501203546},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6XFxpdGNhc3QyMDIzXFx4Y19lZHUzLjFcXGNvZGVfNDAyXFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6XFxpdGNhc3QyMDIzXFx4Y19lZHUzLjFcXGNvZGVfNDAyXFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiRDpcXGl0Y2FzdDIwMjNcXHhjX2VkdTMuMVxcY29kZV80MDJcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJEOlxcaXRjYXN0MjAyM1xceGNfZWR1My4xXFxjb2RlXzQwMlxccHJvamVjdC14Y3p4Mi1wb3J0YWwtdnVlLXRzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJEOlxcaXRjYXN0MjAyM1xceGNfZWR1My4xXFxjb2RlXzQwMlxccHJvamVjdC14Y3p4Mi1wb3J0YWwtdnVlLXRzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBQcm9wU3luYyB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOwppbXBvcnQgKiBhcyBxaW5pdSBmcm9tICdxaW5pdS1qcyc7CmltcG9ydCB7IEJhc2U2NCB9IGZyb20gJ2pzLWJhc2U2NCc7CmltcG9ydCB7IGdldFFuUGFyYW1zIH0gZnJvbSAnQC9hcGkvY29tbW9uJzsKaW1wb3J0IHsgZ2V0Vm9kVG9rZW4sIHNhdmVNZWRpYSB9IGZyb20gJ0AvYXBpL21lZGlhJzsKaW1wb3J0IHsgdXBsb2FkQnlQaWVjZXMgfSBmcm9tICdAL3V0aWxzL3VwbG9hZHRvb2xzJzsKCnZhciBNZWRpYUFkZERpYWxvZyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoTWVkaWFBZGREaWFsb2csIF9WdWUpOwoKICBmdW5jdGlvbiBNZWRpYUFkZERpYWxvZygpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVkaWFBZGREaWFsb2cpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKE1lZGlhQWRkRGlhbG9nKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsgLy8g5paH5qGj5ZCO57yA5ZCN5YiX6KGoCgogICAgX3RoaXMubXNEb2N1bWVudFN1ZmZpeCA9IFsnLmRvYycsICcuZG9jeCcsICcueGxzJywgJy54bHN4JywgJy5wcHQnLCAnLnBwdHgnLCAnLnBkZiddOyAvLyDpn7Mv6KeG6aKR5ZCO57yA5ZCN5YiX6KGoCgogICAgX3RoaXMuYXVkaW9WaWRlb1N1ZmZpeCA9IFsnLm1wMycsICcud21hJywgJy5hdmknLCAnLm1wNCddOyAvLyDkuIrkvKDnmoTmlofku7bliJfooagKCiAgICBfdGhpcy5maWxlTGlzdCA9IFtdOwogICAgcmV0dXJuIF90aGlzOwogIH0KICAvKioNCiAgICog55Sf5ZG95ZGo5pyf6ZKp5a2QDQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKE1lZGlhQWRkRGlhbG9nLCBbewogICAga2V5OiAiY3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlZCgpIHt9CiAgICAvKioNCiAgICAgKiDmlofku7bnirbmgIHmlLnlj5jml7bnmoTpkqnlrZANCiAgICAgKi8KICAgIC8vIOaWh+S7tuWIhuWdl+S4iuS8oCAKCiAgfSwgewogICAga2V5OiAiaGFuZGxlQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0OwogICAgICB1cGxvYWRCeVBpZWNlcyh7CiAgICAgICAgZmlsZTogZmlsZSwKICAgICAgICBwaWVjZVNpemU6IDUsCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7CiAgICAgICAgICBmaWxlLnBlcmNlbnRhZ2UgPSBkYXRhLm51bSAvIGRhdGEuY2h1bmtDb3VudCAqIDEwMDsKICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzOjonICsgZGF0YSk7CiAgICAgICAgfSwKICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoZSkgewogICAgICAgICAgY29uc29sZS5sb2coZmlsZSwgZmlsZUxpc3QpOyAvLyDlh7rplJnkuoblj6/ku6Xku47liJfooajkuK3liKDpmaTlkKcKICAgICAgICAgIC8vIGZpbGVMaXN0LmZvckVhY2goKG4saSkgPT4geyBpZihuLnVpZCA9PSBmaWxlLnVpZCl7CiAgICAgICAgICAvLyAgIGZpbGVMaXN0LnNwbGljZShpLDEpCiAgICAgICAgICAvLyB9IH0pCgogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOjonICsgJ+inhumikeWIhueJh+S4iuS8oOWksei0pScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDkuIrkvKDmlofku7bkuYvliY3nmoTpkqnlrZANCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaGFuZGxlQmVmb3JlVXBsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVCZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgdmFsaWRTdWZmaXggPSB0aGlzLm1zRG9jdW1lbnRTdWZmaXguY29uY2F0KHRoaXMuYXVkaW9WaWRlb1N1ZmZpeCk7CiAgICAgIHZhciBmaWxlbmFtZSA9IGZpbGUubmFtZTsKICAgICAgdmFyIGluZGV4ID0gZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKTsKICAgICAgdmFyIHN1ZmZpeCA9IGZpbGVuYW1lLnN1YnN0cihpbmRleCk7CiAgICAgIHZhciBpc1ZhbGlkID0gdmFsaWRTdWZmaXguaW5kZXhPZihzdWZmaXgpICE9PSAtMTsKCiAgICAgIGlmICghaXNWYWxpZCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIlx1NEUwQVx1NEYyMFx1NUE5Mlx1OEQ0NFx1NjU4N1x1NEVGNlx1NTNFQVx1ODBGRFx1NjYyRiAiLmNvbmNhdCh2YWxpZFN1ZmZpeC50b1N0cmluZygpLCAiIFx1NjgzQ1x1NUYwRlx1RkYwMSIpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzVmFsaWQ7CiAgICB9CiAgICAvKioNCiAgICAgKiDopobnm5bpu5jorqTnmoTkuIrkvKDooYzkuLoNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaGFuZGxlSHR0cFJlcXVlc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUh0dHBSZXF1ZXN0KG9wdGlvbnMpIHsKICAgICAgdmFyIGZpbGUgPSBvcHRpb25zLmZpbGU7CiAgICAgIHZhciBmaWxlbmFtZSA9IGZpbGUubmFtZTsKICAgICAgdmFyIGluZGV4ID0gZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKTsKICAgICAgdmFyIHN1ZmZpeCA9IGZpbGVuYW1lLnN1YnN0cihpbmRleCk7CgogICAgICBpZiAodGhpcy5hdWRpb1ZpZGVvU3VmZml4LmluZGV4T2Yoc3VmZml4KSAhPT0gLTEpIHsKICAgICAgICAvLyDpn7Mv6KeG6aKR5LiK5Lyg5Yiw6Zi/6YeM5LqRCiAgICAgICAgdGhpcy5hbGl5dW5VcGxvYWQoZmlsZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5paH5qGj5LiK5Lyg5Yiw5LiD54mb5LqRCiAgICAgICAgdGhpcy5xaW5pdXl1blVwbG9hZChmaWxlKTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog5paH5qGj5LiK5Lyg5Yiw5LiD54mb5LqRDQogICAgICogVE9ETzog5byC5bi457O76ICD6JmRIDQwMQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJxaW5pdXl1blVwbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcWluaXV5dW5VcGxvYWQoZmlsZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBxblBhcmFtcywgdG9rZW4sIGNvbmZpZywgcHV0RXh0cmEsIGtleSwgbmV4dCwgZXJyb3IsIGNvbXBsZXRlLCBzdWJzY3JpcHRpb24sIG9ic2VydmFibGU7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcWluaXV5dW5VcGxvYWQkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZ2V0UW5QYXJhbXMoKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcW5QYXJhbXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIC8vIOW8gOWni+S4iuS8oAogICAgICAgICAgICAgIHRva2VuID0gcW5QYXJhbXMucW5Ub2tlbjsKICAgICAgICAgICAgICBjb25maWcgPSB7CiAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsCiAgICAgICAgICAgICAgICByZWdpb246IG51bGwgLy8g6Ieq5Yqo5YiG5p6Q5LiK5Lyg5Z+f5ZCN5Yy65Z+fCgogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcHV0RXh0cmEgPSB7CiAgICAgICAgICAgICAgICBmbmFtZTogJycsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LAogICAgICAgICAgICAgICAgbWltZVR5cGU6IG51bGwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGtleSA9IHFuUGFyYW1zLmtleTsKCiAgICAgICAgICAgICAgbmV4dCA9IGZ1bmN0aW9uIG5leHQocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHZhciB0b3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBNYXRoLmNlaWwodG90YWwucGVyY2VudCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiXHU1QTkyXHU4RDQ0XHU0RTBBXHU0RjIwXHU1MjMwXHU0RTAzXHU3MjVCXHU0RTkxXHU4RkRCXHU1RUE2Li4uIi5jb25jYXQocGVyY2VudGFnZSwgIiUiKSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7IC8vIOabtOaWsOS4iuS8oOi/m+W6pgoKICAgICAgICAgICAgICAgIHZhciBjdXJyZW50RmlsZSA9IF90aGlzMi5maWxlTGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlLnVpZCA9PSBpdGVtLnVpZDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RmlsZSkgewogICAgICAgICAgICAgICAgICBjdXJyZW50RmlsZS5wZXJjZW50YWdlID0gcGVyY2VudGFnZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBlcnJvciA9IGZ1bmN0aW9uIGVycm9yKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5aqS6LWE5LiK5Lyg5Yiw5LiD54mb5LqR5aSx6LSlLi4uJyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZShyZXNwb25zZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+Wqkui1hOS4iuS8oOWIsOS4g+eJm+S6keWujOaIkC4uLicpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOyAvLyDkv53lrZjlqpLotYTkv6Hmga8KCiAgICAgICAgICAgICAgICBfdGhpczIuc2F2ZVFpbml1eXVuTWVkaWEoZmlsZS5uYW1lLCBxblBhcmFtcyk7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgLy8g6LCD55Soc2Rr5LiK5Lyg5o6l5Y+j6I635b6X55u45bqU55qEb2JzZXJ2YWJsZe+8jOaOp+WItuS4iuS8oOWSjOaaguWBnAogICAgICAgICAgICAgIG9ic2VydmFibGUgPSBxaW5pdS51cGxvYWQoZmlsZSwga2V5LCB0b2tlbiwgcHV0RXh0cmEsIGNvbmZpZyk7CiAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUobmV4dCwgZXJyb3IsIGNvbXBsZXRlKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5aqS6LWE5LiK5Lyg5Yiw5LiD54mb5LqR5byA5aeLLi4uJyk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOmfsy/op4bpopHkuIrkvKDliLDpmL/ph4zkupENCiAgICAgKiBUT0RPOiDlvILluLjns7vogIPomZENCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYWxpeXVuVXBsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhbGl5dW5VcGxvYWQoZmlsZSkgewogICAgICB2YXIgZmlsZU5hbWUsIGluZGV4LCB0aXRsZSwgYm9keSwgdm9kVG9rZW4sIHVzZXJEYXRhLCB1cGxvYWRlcjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBhbGl5dW5VcGxvYWQkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGZpbGVOYW1lID0gZmlsZS5uYW1lOwogICAgICAgICAgICAgIGluZGV4ID0gZmlsZU5hbWUubGFzdEluZGV4T2YoJy4nKTsKICAgICAgICAgICAgICB0aXRsZSA9IGZpbGVOYW1lLnN1YnN0cigwLCBpbmRleCk7CiAgICAgICAgICAgICAgYm9keSA9IHsKICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlTmFtZSwKICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZ2V0Vm9kVG9rZW4oYm9keSkpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHZvZFRva2VuID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgdXNlckRhdGEgPSAneyJWb2QiOnt9fSc7CiAgICAgICAgICAgICAgdXBsb2FkZXIgPSB0aGlzLmNyZWF0ZVVwbG9hZGVyKHZvZFRva2VuKTsKICAgICAgICAgICAgICB1cGxvYWRlci5hZGRGaWxlKGZpbGUsIG51bGwsIG51bGwsIG51bGwsIHVzZXJEYXRhKTsgLy8g54S25ZCO6LCD55SoIHN0YXJ0VXBsb2FkIOaWueazlSwg5byA5aeL5LiK5LygCgogICAgICAgICAgICAgIGlmICh1cGxvYWRlciAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdXBsb2FkZXIuc3RhcnRVcGxvYWQoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlVXBsb2FkZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVVwbG9hZGVyKHZvZFRva2VuKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHVwbG9hZGVyID0gbmV3IEFsaXl1blVwbG9hZC5Wb2QoewogICAgICAgIHVzZXJJZDogdm9kVG9rZW4udXNlcklkLAogICAgICAgIC8vIOW8gOWni+S4iuS8oAogICAgICAgIG9uVXBsb2Fkc3RhcnRlZDogZnVuY3Rpb24gb25VcGxvYWRzdGFydGVkKHVwbG9hZEluZm8pIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCflqpLotYTkuIrkvKDliLDpmL/ph4zkupHlvIDlp4suLi4nKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHVwbG9hZEluZm8pOwogICAgICAgICAgdXBsb2FkZXIuc2V0VXBsb2FkQXV0aEFuZEFkZHJlc3ModXBsb2FkSW5mbywgdm9kVG9rZW4udXBsb2FkQXV0aCwgdm9kVG9rZW4udXBsb2FkQWRkcmVzcywgdm9kVG9rZW4udmlkZW9JZCk7CiAgICAgICAgfSwKICAgICAgICAvLyDmlofku7bkuIrkvKDov5vluqbvvIzljZXkvY3vvJrlrZfoioIsIOWPr+S7peWcqOi/meS4quWHveaVsOS4reaLv+WIsOS4iuS8oOi/m+W6puW5tuaYvuekuuWcqOmhtemdouS4igogICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3M6IGZ1bmN0aW9uIG9uVXBsb2FkUHJvZ3Jlc3ModXBsb2FkSW5mbywgdG90YWxTaXplLCBwcm9ncmVzcykgewogICAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBNYXRoLmNlaWwocHJvZ3Jlc3MgKiAxMDApOwogICAgICAgICAgY29uc29sZS5sb2coIlx1NUE5Mlx1OEQ0NFx1NEUwQVx1NEYyMFx1NTIzMFx1OTYzRlx1OTFDQ1x1NEU5MVx1OEZEQlx1NUVBNi4uLiIuY29uY2F0KHBlcmNlbnRhZ2UsICIlIikpOwogICAgICAgICAgY29uc29sZS5sb2codXBsb2FkSW5mbyk7IC8vIOabtOaWsOS4iuS8oOi/m+W6pgoKICAgICAgICAgIHZhciBjdXJyZW50RmlsZSA9IF90aGlzMy5maWxlTGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiB1cGxvYWRJbmZvLmZpbGUudWlkID09IGl0ZW0udWlkOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGN1cnJlbnRGaWxlKSB7CiAgICAgICAgICAgIGN1cnJlbnRGaWxlLnBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy8g5paH5Lu25LiK5Lyg5aSx6LSlCiAgICAgICAgb25VcGxvYWRGYWlsZWQ6IGZ1bmN0aW9uIG9uVXBsb2FkRmFpbGVkKHVwbG9hZEluZm8sIGNvZGUsIG1lc3NhZ2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCflqpLotYTkuIrkvKDliLDpmL/ph4zkupHlpLHotKUuLi4nKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHVwbG9hZEluZm8pOwogICAgICAgIH0sCiAgICAgICAgLy8g5paH5Lu25LiK5Lyg5oiQ5YqfCiAgICAgICAgb25VcGxvYWRTdWNjZWVkOiBmdW5jdGlvbiBvblVwbG9hZFN1Y2NlZWQodXBsb2FkSW5mbykgewogICAgICAgICAgY29uc29sZS5sb2coJ+Wqkui1hOS4iuS8oOWIsOmYv+mHjOS6keWujOaIkC4uLicpOwogICAgICAgICAgY29uc29sZS5sb2codXBsb2FkSW5mbyk7IC8vIOS/neWtmOWqkui1hOS/oeaBrwoKICAgICAgICAgIF90aGlzMy5zYXZlQWxpeXVuTWVkaWEodXBsb2FkSW5mby5maWxlLm5hbWUsIHZvZFRva2VuKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gdXBsb2FkZXI7CiAgICB9CiAgICAvKioNCiAgICAgKiDkv53lrZjkuIPniZvkupHlqpLotYTkv6Hmga8NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2F2ZVFpbml1eXVuTWVkaWEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVRaW5pdXl1bk1lZGlhKGZpbGVuYW1lLCBxblBhcmFtcykgewogICAgICB2YXIgYm9keTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzYXZlUWluaXV5dW5NZWRpYSQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYm9keSA9IHsKICAgICAgICAgICAgICAgIGJ1Y2tldDogcW5QYXJhbXMuc2NvcGUsCiAgICAgICAgICAgICAgICBmaWxlSWQ6IHFuUGFyYW1zLmtleSwKICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlbmFtZSwKICAgICAgICAgICAgICAgIHR5cGU6ICcwMDEwMDMnLAogICAgICAgICAgICAgICAgeGNfa2V5OiBxblBhcmFtcy54Y19rZXkKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNhdmVNZWRpYShib2R5KSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOS/neWtmOmYv+mHjOS6keWqkui1hOS/oeaBrw0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzYXZlQWxpeXVuTWVkaWEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVBbGl5dW5NZWRpYShmaWxlbmFtZSwgdm9kVG9rZW4pIHsKICAgICAgdmFyIGJ1Y2tldCwgYm9keTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzYXZlQWxpeXVuTWVkaWEkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGJ1Y2tldCA9IEpTT04ucGFyc2UoQmFzZTY0LmRlY29kZSh2b2RUb2tlbi51cGxvYWRBZGRyZXNzKSkuQnVja2V0OwogICAgICAgICAgICAgIGJvZHkgPSB7CiAgICAgICAgICAgICAgICBidWNrZXQ6IGJ1Y2tldCwKICAgICAgICAgICAgICAgIGZpbGVJZDogdm9kVG9rZW4udmlkZW9JZCwKICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBmaWxlbmFtZSwKICAgICAgICAgICAgICAgIHR5cGU6ICcwMDEwMDInIC8vIOinhumikQoKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHNhdmVNZWRpYShib2R5KSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWIoOmZpOaWh+S7tg0KICAgICAqIFRPRE86IOiwg+eUqOWIoOmZpOaOpeWPow0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVEZWxldGVGaWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGVGaWxlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heenu+mZpOivpeaWh+S7tiwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+enu+mZpOaIkOWKnyEnCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOenu+mZpCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDlhbPpl63lr7nor53moYblkI7liLfmlrDliJfooagNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaGFuZGxlQ2xvc2VkRGlhbG9nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZWREaWFsb2coKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlRGlhbG9nJyk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTWVkaWFBZGREaWFsb2c7Cn0oVnVlKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbUHJvcFN5bmMoJ2RpYWxvZ1Zpc2libGUnLCB7CiAgdHlwZTogQm9vbGVhbiwKICBkZWZhdWx0OiBmYWxzZQp9KV0sIE1lZGlhQWRkRGlhbG9nLnByb3RvdHlwZSwgInN5bmNEaWFsb2dWaXNpYmxlIiwgdm9pZCAwKTsKCk1lZGlhQWRkRGlhbG9nID0gdHNsaWJfMS5fX2RlY29yYXRlKFtDb21wb25lbnRdLCBNZWRpYUFkZERpYWxvZyk7CmV4cG9ydCBkZWZhdWx0IE1lZGlhQWRkRGlhbG9nOw=="},{"version":3,"sources":["D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\media-add-dialog.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, PropSync } from 'vue-property-decorator'\r\nimport {\r\n  ElUploadInternalRawFile,\r\n  ElUploadInternalFileDetail,\r\n  HttpRequestOptions\r\n} from 'element-ui/types/upload'\r\n\r\nimport * as qiniu from 'qiniu-js'\r\nimport { Base64 } from 'js-base64'\r\nimport { IQnParamsDTO, IVodTokenDTO } from '@/entity/media-page-list'\r\nimport { getQnParams } from '@/api/common'\r\nimport { getVodToken, saveMedia } from '@/api/media'\r\nimport {uploadByPieces} from '@/utils/uploadtools'\r\n\r\n@Component\r\nexport default class MediaAddDialog extends Vue {\r\n  @PropSync('dialogVisible', { type: Boolean, default: false })\r\n  syncDialogVisible!: boolean\r\n\r\n  // 文档后缀名列表\r\n  private msDocumentSuffix: string[] = [\r\n    '.doc',\r\n    '.docx',\r\n    '.xls',\r\n    '.xlsx',\r\n    '.ppt',\r\n    '.pptx',\r\n    '.pdf'\r\n  ]\r\n  // 音/视频后缀名列表\r\n  private audioVideoSuffix: string[] = ['.mp3', '.wma', '.avi', '.mp4']\r\n  // 上传的文件列表\r\n  private fileList: ElUploadInternalFileDetail[] = []\r\n\r\n  /**\r\n   * 生命周期钩子\r\n   */\r\n  created() {}\r\n\r\n  /**\r\n   * 文件状态改变时的钩子\r\n   */\r\n  // 文件分块上传 \r\n  private handleChange(\r\n    file: ElUploadInternalFileDetail,\r\n    fileList: ElUploadInternalFileDetail[]\r\n  ) {\r\n    this.fileList = fileList\r\n    uploadByPieces({\r\n      file,\r\n      pieceSize: 5, //分片大小\r\n      success: (data) => {\r\n        file.percentage = (data.num/data.chunkCount) * 100\r\n        console.log('success::' + data)\r\n      },\r\n      error: (e) => {\r\n        console.log(file, fileList)\r\n        // 出错了可以从列表中删除吧\r\n        // fileList.forEach((n,i) => { if(n.uid == file.uid){\r\n        //   fileList.splice(i,1)\r\n        // } })\r\n        console.log('error::' + '视频分片上传失败')\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 上传文件之前的钩子\r\n   */\r\n  private handleBeforeUpload(file: ElUploadInternalRawFile) {\r\n    let validSuffix = this.msDocumentSuffix.concat(this.audioVideoSuffix)\r\n    let filename = file.name\r\n    let index = filename.lastIndexOf('.')\r\n    let suffix = filename.substr(index)\r\n\r\n    const isValid = validSuffix.indexOf(suffix) !== -1\r\n    if (!isValid) {\r\n      this.$message.error(`上传媒资文件只能是 ${validSuffix.toString()} 格式！`)\r\n    }\r\n    return isValid\r\n  }\r\n\r\n  /**\r\n   * 覆盖默认的上传行为\r\n   */\r\n  private handleHttpRequest(options: HttpRequestOptions) {\r\n    let file = options.file\r\n    let filename = file.name\r\n    let index = filename.lastIndexOf('.')\r\n    let suffix = filename.substr(index)\r\n\r\n    if (this.audioVideoSuffix.indexOf(suffix) !== -1) {\r\n      // 音/视频上传到阿里云\r\n      this.aliyunUpload(file)\r\n    } else {\r\n      // 文档上传到七牛云\r\n      this.qiniuyunUpload(file)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 文档上传到七牛云\r\n   * TODO: 异常系考虑 401\r\n   */\r\n  private async qiniuyunUpload(file: ElUploadInternalFileDetail) {\r\n    // 准备工作\r\n    let qnParams: IQnParamsDTO = await getQnParams()\r\n\r\n    // 开始上传\r\n    let token = qnParams.qnToken\r\n    let config = {\r\n      useCdnDomain: true,\r\n      region: null // 自动分析上传域名区域\r\n    }\r\n    let putExtra = {\r\n      fname: '',\r\n      params: {},\r\n      mimeType: null\r\n    }\r\n    let key = qnParams.key\r\n\r\n    let next = response => {\r\n      let total = response.total\r\n      let percentage = Math.ceil(total.percent)\r\n      console.log(`媒资上传到七牛云进度...${percentage}%`)\r\n      console.log(response)\r\n\r\n      // 更新上传进度\r\n      let currentFile = this.fileList.find(\r\n        (item: ElUploadInternalFileDetail) => {\r\n          return file.uid == item.uid\r\n        }\r\n      )\r\n      if (currentFile) {\r\n        currentFile.percentage = percentage\r\n      }\r\n    }\r\n    let error = response => {\r\n      console.log('媒资上传到七牛云失败...')\r\n      console.log(response)\r\n    }\r\n    let complete = response => {\r\n      console.log('媒资上传到七牛云完成...')\r\n      console.log(response)\r\n\r\n      // 保存媒资信息\r\n      this.saveQiniuyunMedia(file.name, qnParams)\r\n    }\r\n\r\n    let subscription\r\n    // 调用sdk上传接口获得相应的observable，控制上传和暂停\r\n    let observable = qiniu.upload(file, key, token, putExtra, config)\r\n    observable.subscribe(next, error, complete)\r\n    console.log('媒资上传到七牛云开始...')\r\n  }\r\n\r\n  /**\r\n   * 音/视频上传到阿里云\r\n   * TODO: 异常系考虑\r\n   */\r\n  private async aliyunUpload(file: ElUploadInternalFileDetail) {\r\n    let fileName = file.name\r\n    let index = fileName.lastIndexOf('.')\r\n    let title = fileName.substr(0, index)\r\n    let body = {\r\n      fileName: fileName,\r\n      title: title\r\n    }\r\n    let vodToken: IVodTokenDTO = await getVodToken(body)\r\n\r\n    let userData = '{\"Vod\":{}}'\r\n    let uploader = this.createUploader(vodToken)\r\n    uploader.addFile(file, null, null, null, userData)\r\n    // 然后调用 startUpload 方法, 开始上传\r\n    if (uploader !== null) {\r\n      uploader.startUpload()\r\n    }\r\n  }\r\n\r\n  private createUploader(vodToken: IVodTokenDTO) {\r\n    let uploader = new AliyunUpload.Vod({\r\n      userId: vodToken.userId,\r\n      // 开始上传\r\n      onUploadstarted: uploadInfo => {\r\n        console.log('媒资上传到阿里云开始...')\r\n        console.log(uploadInfo)\r\n        uploader.setUploadAuthAndAddress(\r\n          uploadInfo,\r\n          vodToken.uploadAuth,\r\n          vodToken.uploadAddress,\r\n          vodToken.videoId\r\n        )\r\n      },\r\n      // 文件上传进度，单位：字节, 可以在这个函数中拿到上传进度并显示在页面上\r\n      onUploadProgress: (uploadInfo, totalSize, progress) => {\r\n        let percentage = Math.ceil(progress * 100)\r\n        console.log(`媒资上传到阿里云进度...${percentage}%`)\r\n        console.log(uploadInfo)\r\n\r\n        // 更新上传进度\r\n        let currentFile = this.fileList.find(\r\n          (item: ElUploadInternalFileDetail) => {\r\n            return uploadInfo.file.uid == item.uid\r\n          }\r\n        )\r\n        if (currentFile) {\r\n          currentFile.percentage = percentage\r\n        }\r\n      },\r\n      // 文件上传失败\r\n      onUploadFailed: (uploadInfo, code, message) => {\r\n        console.log('媒资上传到阿里云失败...')\r\n        console.log(uploadInfo)\r\n      },\r\n      // 文件上传成功\r\n      onUploadSucceed: uploadInfo => {\r\n        console.log('媒资上传到阿里云完成...')\r\n        console.log(uploadInfo)\r\n\r\n        // 保存媒资信息\r\n        this.saveAliyunMedia(uploadInfo.file.name, vodToken)\r\n      }\r\n    })\r\n    return uploader\r\n  }\r\n\r\n  /**\r\n   * 保存七牛云媒资信息\r\n   */\r\n  private async saveQiniuyunMedia(filename: string, qnParams: IQnParamsDTO) {\r\n    let body = {\r\n      bucket: qnParams.scope,\r\n      fileId: qnParams.key,\r\n      filename: filename,\r\n      type: '001003', // 文档\r\n      xc_key: qnParams.xc_key\r\n    }\r\n    await saveMedia(body)\r\n  }\r\n\r\n  /**\r\n   * 保存阿里云媒资信息\r\n   */\r\n  private async saveAliyunMedia(filename: string, vodToken: IVodTokenDTO) {\r\n    let bucket = JSON.parse(Base64.decode(vodToken.uploadAddress)).Bucket\r\n    let body = {\r\n      bucket: bucket,\r\n      fileId: vodToken.videoId,\r\n      filename: filename,\r\n      type: '001002' // 视频\r\n    }\r\n    await saveMedia(body)\r\n  }\r\n\r\n  /**\r\n   * 删除文件\r\n   * TODO: 调用删除接口\r\n   */\r\n  private handleDeleteFile() {\r\n    this.$confirm('此操作将永久移除该文件, 是否继续?', '提示', {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    })\r\n      .then(() => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '移除成功!'\r\n        })\r\n      })\r\n      .catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消移除'\r\n        })\r\n      })\r\n  }\r\n\r\n  /**\r\n   * 关闭对话框后刷新列表\r\n   */\r\n  private handleClosedDialog() {\r\n    this.$emit('closeDialog')\r\n  }\r\n}\r\n"],"sourceRoot":""}]}