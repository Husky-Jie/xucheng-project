{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\module-personal\\pages\\my-orders\\orders-list.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\module-personal\\pages\\my-orders\\orders-list.vue","mtime":1584973675729},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgV2F0Y2gsIFZ1ZSB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InDQppbXBvcnQgeyBtaXhpbnMgfSBmcm9tICd2dWUtY2xhc3MtY29tcG9uZW50Jw0KaW1wb3J0IE1peGluVG9vbHMgZnJvbSAnQC91dGlscy9taXhpbnMudnVlJw0KaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL3BhZ2luYXRpb24vaW5kZXgudnVlJw0KaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnDQptb21lbnQubG9jYWxlKCd6aC1jbicpDQoNCmltcG9ydCB7IE9SREVSX1RZUEVfU1RBVFVTIH0gZnJvbSAnQC9hcGkvY29uc3RhbnRzJyAvLyDpgJrnlKjluLjph4/lrprkuYkNCg0KaW1wb3J0IHsgZ2V0TXlPcmRlcnNQYWdlTGlzdCB9IGZyb20gJ0AvYXBpL215LW9yZGVycycNCmltcG9ydCB7IElNeU9yZGVyc1BhZ2VMaXN0IH0gZnJvbSAnQC9lbnRpdHkvbXktb3JkZXJzLXBhZ2UtbGlzdCcNCg0KQENvbXBvbmVudCh7DQogIG5hbWU6ICdPcmRlcnMnLA0KICBjb21wb25lbnRzOiB7DQogICAgUGFnaW5hdGlvbg0KICB9LA0KICBmaWx0ZXJzOiB7DQogICAgZGF0YVRleHQ6IGZ1bmN0aW9uKHZhbHVlOiBhbnkpIHsNCiAgICAgIGlmICghdmFsdWUpIHsNCiAgICAgICAgcmV0dXJuICcnDQogICAgICB9DQogICAgICByZXR1cm4gbW9tZW50KHZhbHVlKS5mb3JtYXQoJ1lZWVkuTU0uREQnKQ0KICAgIH0sDQogICAgbnVtYmVyVGV4dDogZnVuY3Rpb24odmFsdWU6IGFueSkgew0KICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlKQ0KICAgIH0sDQogICAgc3RhdHVzVGV4dDogZnVuY3Rpb24odmFsdWU6IHN0cmluZykgew0KICAgICAgbGV0IGZpbmRzID0gT1JERVJfVFlQRV9TVEFUVVMuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5jb2RlID09IHZhbHVlDQogICAgICB9KQ0KICAgICAgaWYgKGZpbmRzICYmIGZpbmRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgcmV0dXJuIGZpbmRzWzBdLmRlc2MNCiAgICAgIH0NCiAgICB9DQogIH0NCn0pDQpleHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIG1peGlucyhNaXhpblRvb2xzKSB7DQogIC8vIOafpeivog0KICBwcml2YXRlIGxpc3REYXRhOiBJTXlPcmRlcnNQYWdlTGlzdCA9IHt9IC8vIOaVsOaNruS9kw0KICBwcml2YXRlIGxpc3RMb2FkaW5nOiBib29sZWFuID0gZmFsc2UgLy8g5piv5ZCm6L295YWl5LitDQogIC8vIGFwaSBwYXJhbXMNCiAgcHJpdmF0ZSBsaXN0UXVlcnkgPSB7DQogICAgcGFnZU5vOiAxLA0KICAgIHBhZ2VTaXplOiAxMA0KICB9DQogIHByaXZhdGUgbGlzdFBvc3RCb2R5ID0gew0KICAgIHN0YXR1czogJycNCiAgfQ0KDQogIC8vIOeUn+WRveWRqOacnyBsaWZlDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRMaXN0KCkNCiAgfQ0KDQogIC8vIOS4muWKoeWHveaVsA0KICAvLyDmlbDmja7liJfooagNCiAgcHJpdmF0ZSBhc3luYyBnZXRMaXN0KHN0YXRlOiBzdHJpbmcgPSAnJykgew0KICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlDQogICAgdGhpcy5saXN0UG9zdEJvZHkuc3RhdHVzID0gc3RhdGUNCiAgICB0aGlzLmxpc3REYXRhID0gYXdhaXQgZ2V0TXlPcmRlcnNQYWdlTGlzdCh0aGlzLmxpc3RRdWVyeSwgdGhpcy5saXN0UG9zdEJvZHkpDQogICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlDQogIH0NCg0KICAvLyDnirbmgIHnrZvpgIkNCiAgcHJpdmF0ZSBoYW5kbGVTdGF0ZShzdGF0ZTogc3RyaW5nKSB7DQogICAgdGhpcy5nZXRMaXN0KHN0YXRlKQ0KICB9DQoNCiAgLy8g55uR5o6nIHdhdGNoDQogIC8vIOe/u+mhtSBwYWdlU2l6ZQ0KICBAV2F0Y2goJ2xpc3RRdWVyeS5wYWdlU2l6ZScsIHsgaW1tZWRpYXRlOiB0cnVlIH0pDQogIHByaXZhdGUgd2F0Y2hMaXN0UXVlcnlQYWdlU2l6ZShuZXdWYWw6IG51bWJlcikgew0KICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VObyA9IDENCiAgfQ0KfQ0K"},{"version":3,"sources":["orders-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orders-list.vue","sourceRoot":"src/module-personal/pages/my-orders","sourcesContent":["<template>\r\n  <div class=\"allclass-content\">\r\n    <div class=\"top-title\">\r\n      <span :class=\"{active: listPostBody.status == ''}\" id=\"all\" @click=\"handleState('')\">全部课程</span>\r\n      <span\r\n        :class=\"{active: listPostBody.status == '600001'}\"\r\n        id=\"wait\"\r\n        @click=\"handleState('600001')\"\r\n      >待付款</span>\r\n      <span\r\n        :class=\"{active: listPostBody.status == '600002'}\"\r\n        id=\"succ\"\r\n        @click=\"handleState('600002')\"\r\n      >已完成</span>\r\n      <span\r\n        :class=\"{active: listPostBody.status == '600004'}\"\r\n        id=\"outs\"\r\n        @click=\"handleState('600004')\"\r\n      >已关闭</span>\r\n    </div>\r\n    <div class=\"nav\">\r\n      <div>\r\n        <span class=\"col-md-6\">课程信息</span>\r\n        <span class=\"col-md-4\">\r\n          <em>订单金额</em>\r\n          <em>实付款</em>\r\n          <em>交易状态</em>\r\n        </span>\r\n        <span class=\"col-md-2\">交易操作</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"all show\">\r\n        <div class=\"allclass-cont\">\r\n          <div class=\"content\">\r\n            <!-- 数据列表 -->\r\n            <template v-if=\"listData.items !== undefined\">\r\n              <div class=\"item\" v-for=\"(item, index) in listData.items\" :key=\"index\">\r\n                <div class=\"time-orderid\">\r\n                  <span>{{item.createDate|dataText}}</span>\r\n                  订单号：{{item.orderNo}}\r\n                  <!-- 删除 -->\r\n                  <i\r\n                    v-if=\"item.status == '600003' || item.status == '600004'|| item.status == '600005'\"\r\n                    class=\"glyphicon glyphicon-trash\"\r\n                  ></i>\r\n                </div>\r\n                <div class=\"item-content\">\r\n                  <div class=\"item-left col-lg-2\">\r\n                    <img src=\"../../../assets/img/dem.png\" width=\"100%\" alt />\r\n                  </div>\r\n                  <div class=\"item-cent col-lg-4\">\r\n                    <div class=\"title\">{{item.coursePubName}}</div>\r\n                    <div class=\"star-show\">\r\n                      <div class=\"score\">\r\n                        <i></i>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"text\">\r\n                      课程打分\r\n                      <em>4.9星</em>\r\n                    </div>\r\n                    <div class=\"cont\">有效日期：{{item.startTime|dataText}}-{{item.endTime|dataText}}</div>\r\n                  </div>\r\n                  <div class=\"col-lg-4 lab-info\">\r\n                    <span>${{item.price|numberText}}</span>\r\n                    <span>${{item.price|numberText}}</span>\r\n                    <span>{{item.status|statusText}}</span>\r\n                  </div>\r\n\r\n                  <!-- 操作 -->\r\n                  <div class=\"item-rit col-lg-2\">\r\n                    <!-- \r\n                      600001 初始态 \r\n                      600002 已支付\r\n                      600003 已取消\r\n                      600004 已关闭\r\n                      600005 已退款\r\n                    -->\r\n                    <a href=\"#\" v-if=\"item.status == '600001'\">去 支 付</a>\r\n                    <a href=\"#\" v-if=\"item.status == '600001'\">取消订单</a>\r\n                    <a href=\"#\" class=\"class-com\" v-if=\"item.status == '600002'\">课程评价</a>\r\n                    <!-- <span\r\n                      class=\"undef\"\r\n                      v-if=\"item.status == '600003' || item.status == '600004'|| item.status == '600005'\"\r\n                    >——</span>-->\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </template>\r\n\r\n            <!-- 翻页控制 -->\r\n            <div class=\"page-item\">\r\n              <Pagination\r\n                v-show=\"listData.counts > 0\"\r\n                :total=\"listData.counts\"\r\n                :page.sync=\"listQuery.pageNo\"\r\n                :limit.sync=\"listQuery.pageSize\"\r\n                @pagination=\"getList\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Watch, Vue } from 'vue-property-decorator'\r\nimport { mixins } from 'vue-class-component'\r\nimport MixinTools from '@/utils/mixins.vue'\r\nimport Pagination from '@/components/pagination/index.vue'\r\nimport moment from 'moment'\r\nmoment.locale('zh-cn')\r\n\r\nimport { ORDER_TYPE_STATUS } from '@/api/constants' // 通用常量定义\r\n\r\nimport { getMyOrdersPageList } from '@/api/my-orders'\r\nimport { IMyOrdersPageList } from '@/entity/my-orders-page-list'\r\n\r\n@Component({\r\n  name: 'Orders',\r\n  components: {\r\n    Pagination\r\n  },\r\n  filters: {\r\n    dataText: function(value: any) {\r\n      if (!value) {\r\n        return ''\r\n      }\r\n      return moment(value).format('YYYY.MM.DD')\r\n    },\r\n    numberText: function(value: any) {\r\n      return parseInt(value)\r\n    },\r\n    statusText: function(value: string) {\r\n      let finds = ORDER_TYPE_STATUS.filter(item => {\r\n        return item.code == value\r\n      })\r\n      if (finds && finds.length > 0) {\r\n        return finds[0].desc\r\n      }\r\n    }\r\n  }\r\n})\r\nexport default class extends mixins(MixinTools) {\r\n  // 查询\r\n  private listData: IMyOrdersPageList = {} // 数据体\r\n  private listLoading: boolean = false // 是否载入中\r\n  // api params\r\n  private listQuery = {\r\n    pageNo: 1,\r\n    pageSize: 10\r\n  }\r\n  private listPostBody = {\r\n    status: ''\r\n  }\r\n\r\n  // 生命周期 life\r\n  created() {\r\n    this.getList()\r\n  }\r\n\r\n  // 业务函数\r\n  // 数据列表\r\n  private async getList(state: string = '') {\r\n    this.listLoading = true\r\n    this.listPostBody.status = state\r\n    this.listData = await getMyOrdersPageList(this.listQuery, this.listPostBody)\r\n    this.listLoading = false\r\n  }\r\n\r\n  // 状态筛选\r\n  private handleState(state: string) {\r\n    this.getList(state)\r\n  }\r\n\r\n  // 监控 watch\r\n  // 翻页 pageSize\r\n  @Watch('listQuery.pageSize', { immediate: true })\r\n  private watchListQueryPageSize(newVal: number) {\r\n    this.listQuery.pageNo = 1\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/scss/variables';\r\n.allclass-content {\r\n  width: 930px;\r\n  .top-title {\r\n    padding: 20px 0 20px 30px;\r\n    span {\r\n      display: inline-block;\r\n      cursor: pointer;\r\n      margin-right: 20px;\r\n      padding-right: 20px;\r\n      font-size: 16px;\r\n      line-height: 16px;\r\n      color: $master-color-4;\r\n      border-right: solid 1px $master-color-4;\r\n    }\r\n    span:last-child {\r\n      border: none;\r\n    }\r\n    .active {\r\n      color: $master-color-5;\r\n    }\r\n  }\r\n  .nav {\r\n    background: $master-color-0;\r\n    padding: 10px;\r\n    text-align: center;\r\n    margin: 10px 10px 10px 25px;\r\n    height: 40px;\r\n    span {\r\n      em {\r\n        display: inline-block;\r\n        text-align: left;\r\n        width: 33%;\r\n      }\r\n    }\r\n  }\r\n  .all,\r\n  .wait,\r\n  .succ,\r\n  .outs {\r\n    display: none;\r\n  }\r\n\r\n  .allclass-cont {\r\n    padding: 0px 10px 10px 25px;\r\n    .item {\r\n      overflow: hidden;\r\n      margin-bottom: 10px;\r\n      background: $master-color-0;\r\n      .time-orderid {\r\n        color: $master-color-4;\r\n        border-bottom: solid 1px $master-color-4;\r\n        padding: 15px 20px 5px 20px;\r\n        span {\r\n          display: inline-block;\r\n          margin-right: 40px;\r\n        }\r\n        i.glyphicon {\r\n          float: right;\r\n        }\r\n      }\r\n      .item-content {\r\n        padding: 15px;\r\n        overflow: hidden;\r\n        .item-left {\r\n          text-align: left;\r\n          padding: 0px;\r\n        }\r\n        .item-cent {\r\n          position: relative;\r\n          .title {\r\n            font-size: 20px;\r\n            span {\r\n              background: $master-color-3;\r\n              color: $master-color-0;\r\n              display: inline-block;\r\n              position: relative;\r\n              top: -2px;\r\n              font-size: 14px;\r\n              padding: 2px 7px;\r\n              margin-left: 10px;\r\n            }\r\n            .out {\r\n              color: $master-color-0;\r\n              background: $master-color-4;\r\n            }\r\n            .Invalid {\r\n              color: $master-color-0;\r\n              background: $master-color-2;\r\n            }\r\n            .success {\r\n              color: $master-color-0;\r\n              background: $greenTheme;\r\n            }\r\n          }\r\n          .cont {\r\n            color: $master-color-2;\r\n          }\r\n          .more {\r\n            position: absolute;\r\n            right: 15px;\r\n            bottom: 0px;\r\n            text-decoration: none;\r\n          }\r\n          .star-show {\r\n            width: 109px;\r\n            height: 19px;\r\n            margin: 8px 0px;\r\n            display: inline-block;\r\n            background: url(../../../assets/img/star-show.png) no-repeat;\r\n            background-size: contain;\r\n            .score {\r\n              display: inline-block;\r\n              i {\r\n                display: none;\r\n              }\r\n            }\r\n          }\r\n          .text {\r\n            display: inline-block;\r\n            color: $master-color-4;\r\n            margin: 0 10px;\r\n            em {\r\n              color: $master-color-3;\r\n            }\r\n          }\r\n          .watermark {\r\n            position: absolute;\r\n            right: 90px;\r\n            top: -5px;\r\n            z-index: 2;\r\n          }\r\n        }\r\n        .lab-info {\r\n          padding-top: 30px;\r\n          font-size: 14px;\r\n          color: $master-color-1;\r\n          span {\r\n            display: inline-block;\r\n            width: 33%;\r\n          }\r\n        }\r\n        .item-rit {\r\n          text-align: right;\r\n          a {\r\n            font-size: 14px;\r\n            color: $master-color-3;\r\n            border: solid 1px $master-color-3;\r\n            display: inline-block;\r\n            width: 90px;\r\n            text-align: center;\r\n            padding: 3px 0;\r\n            margin: 5px 0;\r\n          }\r\n          .go-pay {\r\n            background: $master-color-3;\r\n            color: $master-color-0;\r\n          }\r\n          .class-com {\r\n            border: solid 1px $master-color-5;\r\n            background: $master-color-0;\r\n            color: $master-color-5;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .page-item {\r\n      text-align: center;\r\n      margin: 40px 0;\r\n      span {\r\n        border-left: solid 2px $backColor;\r\n        border-right: solid 2px $backColor;\r\n        display: inline-block;\r\n        padding: 2px 10px;\r\n        color: $master-color-4;\r\n        cursor: pointer;\r\n      }\r\n      span:hover {\r\n        color: $master-color-0;\r\n        background: $master-color-5;\r\n      }\r\n      .active {\r\n        color: $master-color-0;\r\n        background: $master-color-5;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}