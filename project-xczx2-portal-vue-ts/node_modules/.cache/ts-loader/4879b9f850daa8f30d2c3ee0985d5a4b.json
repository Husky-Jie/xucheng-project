{"remainingRequest":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\upload-bigfile.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\upload-bigfile.vue","mtime":1661403674040},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAkIGZyb20gIi4uLy4uLy4uLy4uLy4uL3N0YXRpYy9wbHVnaW5zL2pxdWVyeS9kaXN0L2pxdWVyeS5qcyI7CmltcG9ydCAiLi4vLi4vLi4vLi4vLi4vc3RhdGljL2Nzcy93ZWJ1cGxvYWRlci93ZWJ1cGxvYWRlci5jc3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwbG9hZGVyOiB7fSwKICAgICAgdXBsb2FkRmlsZToge30sCiAgICAgIHBlcmNlbnRhZ2U6IDAsCiAgICAgIGZpbGVNZDU6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/lvIDlp4vkuIrkvKAKICAgIHVwbG9hZDogZnVuY3Rpb24gdXBsb2FkKCkgewogICAgICBpZiAodGhpcy51cGxvYWRGaWxlICYmIHRoaXMudXBsb2FkRmlsZS5pZCkgewogICAgICAgIHRoaXMudXBsb2FkZXIudXBsb2FkKHRoaXMudXBsb2FkRmlsZS5pZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoIuivt+mAieaLqeaWh+S7tiIpOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8gICAgICB2YXIgZmlsZU1kNTsKICAgIC8vICAgICAgdmFyIHVwbG9hZEZpbGU7CiAgICBXZWJVcGxvYWRlci5VcGxvYWRlci5yZWdpc3Rlcih7CiAgICAgICJiZWZvcmUtc2VuZC1maWxlIjogImJlZm9yZVNlbmRGaWxlIiwKICAgICAgImJlZm9yZS1zZW5kIjogImJlZm9yZVNlbmQiLAogICAgICAiYWZ0ZXItc2VuZC1maWxlIjogImFmdGVyU2VuZEZpbGUiCiAgICB9LCB7CiAgICAgIGJlZm9yZVNlbmRGaWxlOiBmdW5jdGlvbiAoZmlsZSkgewogICAgICAgIC8vIOWIm+W7uuS4gOS4qmRlZmZlcmVkLOeUqOS6jumAmuefpeaYr+WQpuWujOaIkOaTjeS9nAogICAgICAgIHZhciBkZWZlcnJlZCA9IFdlYlVwbG9hZGVyLkRlZmVycmVkKCk7IC8vIOiuoeeul+aWh+S7tueahOWUr+S4gOagh+ivhu+8jOeUqOS6juaWreeCuee7reS8oAoKICAgICAgICBuZXcgV2ViVXBsb2FkZXIuVXBsb2FkZXIoKS5tZDVGaWxlKGZpbGUsIDAsIDEwMCAqIDEwMjQgKiAxMDI0KS50aGVuKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgIHRoaXMuZmlsZU1kNSA9IHZhbDsKICAgICAgICAgIHRoaXMudXBsb2FkRmlsZSA9IGZpbGU7IC8vYWxlcnQoZmlsZU1kNSApCiAgICAgICAgICAvL+WQkeacjeWKoeerr+ivt+axguazqOWGjOS4iuS8oOaWh+S7tgoKICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgdXJsOiAiL2FwaS9tZWRpYS91cGxvYWQvcmVnaXN0ZXIiLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgLy8g5paH5Lu25ZSv5LiA6KGo56S6CiAgICAgICAgICAgICAgZmlsZU1kNTogdGhpcy5maWxlTWQ1LAogICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsCiAgICAgICAgICAgICAgZmlsZVNpemU6IGZpbGUuc2l6ZSwKICAgICAgICAgICAgICBtaW1ldHlwZTogZmlsZS50eXBlLAogICAgICAgICAgICAgIGZpbGVFeHQ6IGZpbGUuZXh0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgICAgICAgLy9hbGVydCgn5LiK5Lyg5paH5Lu25rOo5YaM5oiQ5Yqf5byA5aeL5LiK5LygJyk7CiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KHJlc3BvbnNlLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7CiAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24gKGJsb2NrKSB7CiAgICAgICAgdmFyIGRlZmVycmVkID0gV2ViVXBsb2FkZXIuRGVmZXJyZWQoKTsgLy8g5q+P5qyh5LiK5Lyg5YiG5Z2X5YmN5qCh6aqM5YiG5Z2X77yM5aaC5p6c5bey5a2Y5Zyo5YiG5Z2X5YiZ5LiN5YaN5LiK5Lyg77yM6L6+5Yiw5pat54K557ut5Lyg55qE55uu55qECgogICAgICAgICQuYWpheCh7CiAgICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgICB1cmw6ICIvYXBpL21lZGlhL3VwbG9hZC9jaGVja2NodW5rIiwKICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgLy8g5paH5Lu25ZSv5LiA6KGo56S6CiAgICAgICAgICAgIGZpbGVNZDU6IHRoaXMuZmlsZU1kNSwKICAgICAgICAgICAgLy8g5b2T5YmN5YiG5Z2X5LiL5qCHCiAgICAgICAgICAgIGNodW5rOiBibG9jay5jaHVuaywKICAgICAgICAgICAgLy8g5b2T5YmN5YiG5Z2X5aSn5bCPCiAgICAgICAgICAgIGNodW5rU2l6ZTogYmxvY2suZW5kIC0gYmxvY2suc3RhcnQKICAgICAgICAgIH0sCiAgICAgICAgICBkYXRhVHlwZTogImpzb24iLAogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuaWZFeGlzdCkgewogICAgICAgICAgICAgIC8vIOWIhuWdl+WtmOWcqO+8jOi3s+i/h+ivpeWIhuWdlwogICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIOWIhuWdl+S4jeWtmOWcqOaIluS4jeWujOaVtO+8jOmHjeaWsOWPkemAgQogICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOyAvL+aehOW7umZpbGVNZDXlj4LmlbDvvIzkuIrkvKDliIblnZfml7bluKbkuIpmaWxlTWQ1CgogICAgICAgIHRoaXMudXBsb2FkZXIub3B0aW9ucy5mb3JtRGF0YS5maWxlTWQ1ID0gdGhpcy5maWxlTWQ1OwogICAgICAgIHRoaXMudXBsb2FkZXIub3B0aW9ucy5mb3JtRGF0YS5jaHVuayA9IGJsb2NrLmNodW5rOwogICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7CiAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgYWZ0ZXJTZW5kRmlsZTogZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICAvLyDlkIjlubbliIblnZcKICAgICAgICAkLmFqYXgoewogICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgdXJsOiAiL2FwaS9tZWRpYS91cGxvYWQvbWVyZ2VjaHVua3MiLAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICBmaWxlTWQ1OiB0aGlzLmZpbGVNZDUsCiAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsCiAgICAgICAgICAgIGZpbGVTaXplOiBmaWxlLnNpemUsCiAgICAgICAgICAgIG1pbWV0eXBlOiBmaWxlLnR5cGUsCiAgICAgICAgICAgIGZpbGVFeHQ6IGZpbGUuZXh0CiAgICAgICAgICB9LAogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge30KICAgICAgICB9KTsKICAgICAgfS5iaW5kKHRoaXMpCiAgICB9KTsgLy8g5Yib5bu6dXBsb2FkZXLlr7nosaHvvIzphY3nva7lj4LmlbAKCiAgICB0aGlzLnVwbG9hZGVyID0gV2ViVXBsb2FkZXIuY3JlYXRlKHsKICAgICAgc3dmOiAiL3N0YXRpYy9wbHVnaW5zL3dlYnVwbG9hZGVyL2Rpc3QvVXBsb2FkZXIuc3dmIiwKICAgICAgc2VydmVyOiAiL2FwaS9tZWRpYS91cGxvYWQvdXBsb2FkY2h1bmsiLAogICAgICBmaWxlVmFsOiAiZmlsZSIsCiAgICAgIHBpY2s6ICIjcGlja2VyIiwKICAgICAgYXV0bzogZmFsc2UsCiAgICAgIGRpc2FibGVHbG9iYWxEbmQ6IHRydWUsCiAgICAgIGNodW5rZWQ6IHRydWUsCiAgICAgIGNodW5rU2l6ZTogMSAqIDEwMjQgKiAxMDI0LAogICAgICB0aHJlYWRzOiAzLAogICAgICBwcmVwYXJlTmV4dEZpbGU6IHRydWUgLy8g5YWB6K645Zyo5paH5Lu25Lyg6L6T5pe25o+Q5YmN5oqK5LiL5LiA5Liq5paH5Lu25YeG5aSH5aW9CgogICAgfSk7IC8vIOWwhuaWh+S7tua3u+WKoOWIsOmYn+WIlwoKICAgIHRoaXMudXBsb2FkZXIub24oImZpbGVRdWV1ZWQiLCBmdW5jdGlvbiAoZmlsZSkgewogICAgICB0aGlzLnVwbG9hZEZpbGUgPSBmaWxlOwogICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwOwogICAgfS5iaW5kKHRoaXMpKTsgLy/pgInmi6nmlofku7blkI7op6blj5EKCiAgICB0aGlzLnVwbG9hZGVyLm9uKCJiZWZvcmVGaWxlUXVldWVkIiwgZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgLy8gICAgIHRoaXMudXBsb2FkZXIucmVtb3ZlRmlsZShmaWxlKQogICAgICAvL+mHjee9rnVwbG9hZGVyCiAgICAgIHRoaXMudXBsb2FkZXIucmVzZXQoKTsKICAgICAgdGhpcy5wZXJjZW50YWdlID0gMDsKICAgIH0uYmluZCh0aGlzKSk7IC8vIOebkeaOp+S4iuS8oOi/m+W6pgogICAgLy8gcGVyY2VudGFnZTrku6PooajkuIrkvKDmlofku7bnmoTnmb7liIbmr5QKCiAgICB0aGlzLnVwbG9hZGVyLm9uKCJ1cGxvYWRQcm9ncmVzcyIsIGZ1bmN0aW9uIChmaWxlLCBwZXJjZW50YWdlKSB7CiAgICAgIHRoaXMucGVyY2VudGFnZSA9IE1hdGguY2VpbChwZXJjZW50YWdlICogMTAwKTsKICAgIH0uYmluZCh0aGlzKSk7IC8v5LiK5Lyg5aSx6LSl6Kem5Y+RCgogICAgdGhpcy51cGxvYWRlci5vbigidXBsb2FkRXJyb3IiLCBmdW5jdGlvbiAoZmlsZSwgcmVhc29uKSB7CiAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7CiAgICAgIGFsZXJ0KCLkuIrkvKDmlofku7blpLHotKUiKTsKICAgIH0pOyAvL+S4iuS8oOaIkOWKn+inpuWPkQoKICAgIHRoaXMudXBsb2FkZXIub24oInVwbG9hZFN1Y2Nlc3MiLCBmdW5jdGlvbiAoZmlsZSwgcmVzcG9uc2UpIHsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICBhbGVydCgi5LiK5Lyg5paH5Lu25oiQ5Yqf77yBIik7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\upload-bigfile.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  import $ from '../../../../../static/plugins/jquery/dist/jquery.js'\n  import webuploader from '../../../../../static/plugins/webuploader/dist/webuploader.js'\n  import '../../../../../static/css/webuploader/webuploader.css'\n  export default{\n    data(){\n      return{\n        uploader:{},\n        uploadFile:{},\n        percentage:0,\n        fileMd5:''\n      }\n    },\n    methods:{\n      //开始上传\n      upload(){\n        if(this.uploadFile && this.uploadFile.id){\n          this.uploader.upload(this.uploadFile.id);\n        }else{\n          alert(\"请选择文件\");\n        }\n      }\n    },\n    mounted(){\n//      var fileMd5;\n//      var uploadFile;\n      WebUploader.Uploader.register({\n          \"before-send-file\":\"beforeSendFile\",\n          \"before-send\":\"beforeSend\",\n          \"after-send-file\":\"afterSendFile\"\n        },{\n          beforeSendFile:function(file) {\n            // 创建一个deffered,用于通知是否完成操作\n            var deferred = WebUploader.Deferred();\n            // 计算文件的唯一标识，用于断点续传\n            (new WebUploader.Uploader()).md5File(file, 0, 100*1024*1024)\n              .then(function(val) {\n\n                this.fileMd5 = val;\n                this.uploadFile = file;\n                //alert(fileMd5 )\n                //向服务端请求注册上传文件\n                $.ajax(\n                  {\n                    type:\"POST\",\n                    url:\"/api/media/upload/register\",\n                    data:{\n                      // 文件唯一表示\n                      fileMd5:this.fileMd5,\n                      fileName: file.name,\n                      fileSize:file.size,\n                      mimetype:file.type,\n                      fileExt:file.ext\n                    },\n                    dataType:\"json\",\n                    success:function(response) {\n                      if(response.success) {\n                        //alert('上传文件注册成功开始上传');\n                        deferred.resolve();\n                      } else {\n                        alert(response.message);\n                        deferred.reject();\n                      }\n                    }\n                  }\n                );\n              }.bind(this));\n\n            return deferred.promise();\n          }.bind(this),\n          beforeSend:function(block) {\n            var deferred = WebUploader.Deferred();\n            // 每次上传分块前校验分块，如果已存在分块则不再上传，达到断点续传的目的\n            $.ajax(\n              {\n                type:\"POST\",\n                url:\"/api/media/upload/checkchunk\",\n                data:{\n                  // 文件唯一表示\n                  fileMd5:this.fileMd5,\n                  // 当前分块下标\n                  chunk:block.chunk,\n                  // 当前分块大小\n                  chunkSize:block.end-block.start\n                },\n                dataType:\"json\",\n                success:function(response) {\n                  if(response.ifExist) {\n                    // 分块存在，跳过该分块\n                    deferred.reject();\n                  } else {\n                    // 分块不存在或不完整，重新发送\n                    deferred.resolve();\n                  }\n                }\n              }\n            );\n            //构建fileMd5参数，上传分块时带上fileMd5\n            this.uploader.options.formData.fileMd5 = this.fileMd5;\n            this.uploader.options.formData.chunk = block.chunk;\n            return deferred.promise();\n          }.bind(this),\n          afterSendFile:function(file) {\n            // 合并分块\n            $.ajax(\n              {\n                type:\"POST\",\n                url:\"/api/media/upload/mergechunks\",\n                data:{\n                  fileMd5:this.fileMd5,\n                  fileName: file.name,\n                  fileSize:file.size,\n                  mimetype:file.type,\n                  fileExt:file.ext\n                },\n                success:function(response){\n\n                }\n              }\n            );\n          }.bind(this)\n        }\n      );\n      // 创建uploader对象，配置参数\n      this.uploader = WebUploader.create(\n        {\n          swf:\"/static/plugins/webuploader/dist/Uploader.swf\",//上传文件的flash文件，浏览器不支持h5时启动flash\n          server:\"/api/media/upload/uploadchunk\",//上传分块的服务端地址，注意跨域问题\n          fileVal:\"file\",//文件上传域的name\n          pick:\"#picker\",//指定选择文件的按钮容器\n          auto:false,//手动触发上传\n          disableGlobalDnd:true,//禁掉整个页面的拖拽功能\n          chunked:true,// 是否分块上传\n          chunkSize:1*1024*1024, // 分块大小（默认5M）\n          threads:3, // 开启多个线程（默认3个）\n          prepareNextFile:true// 允许在文件传输时提前把下一个文件准备好\n        }\n      );\n\n      // 将文件添加到队列\n      this.uploader.on(\"fileQueued\", function(file) {\n          this.uploadFile = file;\n          this.percentage = 0;\n\n        }.bind(this)\n      );\n      //选择文件后触发\n      this.uploader.on(\"beforeFileQueued\", function(file) {\n//     this.uploader.removeFile(file)\n        //重置uploader\n        this.uploader.reset()\n        this.percentage = 0;\n      }.bind(this));\n\n      // 监控上传进度\n      // percentage:代表上传文件的百分比\n      this.uploader.on(\"uploadProgress\", function(file, percentage) {\n          this.percentage = Math.ceil(percentage * 100);\n      }.bind(this));\n      //上传失败触发\n      this.uploader.on(\"uploadError\", function(file,reason) {\n        console.log(reason)\n        alert(\"上传文件失败\");\n      });\n      //上传成功触发\n      this.uploader.on(\"uploadSuccess\", function(file,response ) {\n        console.log(response)\n        alert(\"上传文件成功！\");\n      });\n\n    }\n  }\n\n"],"sourceRoot":""}]}