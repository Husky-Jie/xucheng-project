{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\media-add-dialog.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\media-add-dialog.vue","mtime":1662608686982},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6XFxpdGNhc3QyMDIyXFx4Y19lZHUzLjBcXGNvZGVfMFxccHJvamVjdC14Y3p4Mi1wb3J0YWwtdnVlLXRzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOlxcaXRjYXN0MjAyMlxceGNfZWR1My4wXFxjb2RlXzBcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJEOlxcaXRjYXN0MjAyMlxceGNfZWR1My4wXFxjb2RlXzBcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJEOlxcaXRjYXN0MjAyMlxceGNfZWR1My4wXFxjb2RlXzBcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRDpcXGl0Y2FzdDIwMjJcXHhjX2VkdTMuMFxcY29kZV8wXFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUsIFByb3BTeW5jIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCAqIGFzIHFpbml1IGZyb20gJ3Fpbml1LWpzJzsKaW1wb3J0IHsgQmFzZTY0IH0gZnJvbSAnanMtYmFzZTY0JzsKaW1wb3J0IHsgZ2V0UW5QYXJhbXMgfSBmcm9tICdAL2FwaS9jb21tb24nOwppbXBvcnQgeyBnZXRWb2RUb2tlbiwgc2F2ZU1lZGlhIH0gZnJvbSAnQC9hcGkvbWVkaWEnOwppbXBvcnQgeyB1cGxvYWRCeVBpZWNlcyB9IGZyb20gJ0AvdXRpbHMvdXBsb2FkdG9vbHMnOwoKdmFyIE1lZGlhQWRkRGlhbG9nID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1Z1ZSkgewogIF9pbmhlcml0cyhNZWRpYUFkZERpYWxvZywgX1Z1ZSk7CgogIGZ1bmN0aW9uIE1lZGlhQWRkRGlhbG9nKCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZWRpYUFkZERpYWxvZyk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoTWVkaWFBZGREaWFsb2cpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOyAvLyDmlofmoaPlkI7nvIDlkI3liJfooagKCiAgICBfdGhpcy5tc0RvY3VtZW50U3VmZml4ID0gWycuZG9jJywgJy5kb2N4JywgJy54bHMnLCAnLnhsc3gnLCAnLnBwdCcsICcucHB0eCcsICcucGRmJ107IC8vIOmfsy/op4bpopHlkI7nvIDlkI3liJfooagKCiAgICBfdGhpcy5hdWRpb1ZpZGVvU3VmZml4ID0gWycubXAzJywgJy53bWEnLCAnLmF2aScsICcubXA0J107IC8vIOS4iuS8oOeahOaWh+S7tuWIl+ihqAoKICAgIF90aGlzLmZpbGVMaXN0ID0gW107CiAgICByZXR1cm4gX3RoaXM7CiAgfQogIC8qKg0KICAgKiDnlJ/lkb3lkajmnJ/pkqnlrZANCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoTWVkaWFBZGREaWFsb2csIFt7CiAgICBrZXk6ICJjcmVhdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVkKCkge30KICAgIC8qKg0KICAgICAqIOaWh+S7tueKtuaAgeaUueWPmOaXtueahOmSqeWtkA0KICAgICAqLwogICAgLy8g5paH5Lu25YiG5Z2X5LiK5LygIAoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3Q7CiAgICAgIHVwbG9hZEJ5UGllY2VzKHsKICAgICAgICBmaWxlOiBmaWxlLAogICAgICAgIHBpZWNlU2l6ZTogMSwKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHsKICAgICAgICAgIGZpbGUucGVyY2VudGFnZSA9IGRhdGEubnVtIC8gZGF0YS5jaHVua0NvdW50ICogMTAwOwogICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3M6OicgKyBkYXRhKTsKICAgICAgICB9LAogICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlLCBmaWxlTGlzdCk7IC8vIOWHuumUmeS6huWPr+S7peS7juWIl+ihqOS4reWIoOmZpOWQpwogICAgICAgICAgLy8gZmlsZUxpc3QuZm9yRWFjaCgobixpKSA9PiB7IGlmKG4udWlkID09IGZpbGUudWlkKXsKICAgICAgICAgIC8vICAgZmlsZUxpc3Quc3BsaWNlKGksMSkKICAgICAgICAgIC8vIH0gfSkKCiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3I6OicgKyAn6KeG6aKR5YiG54mH5LiK5Lyg5aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOS4iuS8oOaWh+S7tuS5i+WJjeeahOmSqeWtkA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVCZWZvcmVVcGxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIHZhciB2YWxpZFN1ZmZpeCA9IHRoaXMubXNEb2N1bWVudFN1ZmZpeC5jb25jYXQodGhpcy5hdWRpb1ZpZGVvU3VmZml4KTsKICAgICAgdmFyIGZpbGVuYW1lID0gZmlsZS5uYW1lOwogICAgICB2YXIgaW5kZXggPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpOwogICAgICB2YXIgc3VmZml4ID0gZmlsZW5hbWUuc3Vic3RyKGluZGV4KTsKICAgICAgdmFyIGlzVmFsaWQgPSB2YWxpZFN1ZmZpeC5pbmRleE9mKHN1ZmZpeCkgIT09IC0xOwoKICAgICAgaWYgKCFpc1ZhbGlkKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiXHU0RTBBXHU0RjIwXHU1QTkyXHU4RDQ0XHU2NTg3XHU0RUY2XHU1M0VBXHU4MEZEXHU2NjJGICIuY29uY2F0KHZhbGlkU3VmZml4LnRvU3RyaW5nKCksICIgXHU2ODNDXHU1RjBGXHVGRjAxIikpOwogICAgICB9CgogICAgICByZXR1cm4gaXNWYWxpZDsKICAgIH0KICAgIC8qKg0KICAgICAqIOimhueblum7mOiupOeahOS4iuS8oOihjOS4ug0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVIdHRwUmVxdWVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSHR0cFJlcXVlc3Qob3B0aW9ucykgewogICAgICB2YXIgZmlsZSA9IG9wdGlvbnMuZmlsZTsKICAgICAgdmFyIGZpbGVuYW1lID0gZmlsZS5uYW1lOwogICAgICB2YXIgaW5kZXggPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpOwogICAgICB2YXIgc3VmZml4ID0gZmlsZW5hbWUuc3Vic3RyKGluZGV4KTsKCiAgICAgIGlmICh0aGlzLmF1ZGlvVmlkZW9TdWZmaXguaW5kZXhPZihzdWZmaXgpICE9PSAtMSkgewogICAgICAgIC8vIOmfsy/op4bpopHkuIrkvKDliLDpmL/ph4zkupEKICAgICAgICB0aGlzLmFsaXl1blVwbG9hZChmaWxlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDmlofmoaPkuIrkvKDliLDkuIPniZvkupEKICAgICAgICB0aGlzLnFpbml1eXVuVXBsb2FkKGZpbGUpOwogICAgICB9CiAgICB9CiAgICAvKioNCiAgICAgKiDmlofmoaPkuIrkvKDliLDkuIPniZvkupENCiAgICAgKiBUT0RPOiDlvILluLjns7vogIPomZEgNDAxDQogICAgICovCgogIH0sIHsKICAgIGtleTogInFpbml1eXVuVXBsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBxaW5pdXl1blVwbG9hZChmaWxlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHFuUGFyYW1zLCB0b2tlbiwgY29uZmlnLCBwdXRFeHRyYSwga2V5LCBuZXh0LCBlcnJvciwgY29tcGxldGUsIHN1YnNjcmlwdGlvbiwgb2JzZXJ2YWJsZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBxaW5pdXl1blVwbG9hZCQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChnZXRRblBhcmFtcygpKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBxblBhcmFtcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgLy8g5byA5aeL5LiK5LygCiAgICAgICAgICAgICAgdG9rZW4gPSBxblBhcmFtcy5xblRva2VuOwogICAgICAgICAgICAgIGNvbmZpZyA9IHsKICAgICAgICAgICAgICAgIHVzZUNkbkRvbWFpbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHJlZ2lvbjogbnVsbCAvLyDoh6rliqjliIbmnpDkuIrkvKDln5/lkI3ljLrln58KCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBwdXRFeHRyYSA9IHsKICAgICAgICAgICAgICAgIGZuYW1lOiAnJywKICAgICAgICAgICAgICAgIHBhcmFtczoge30sCiAgICAgICAgICAgICAgICBtaW1lVHlwZTogbnVsbAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAga2V5ID0gcW5QYXJhbXMua2V5OwoKICAgICAgICAgICAgICBuZXh0ID0gZnVuY3Rpb24gbmV4dChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7CiAgICAgICAgICAgICAgICB2YXIgcGVyY2VudGFnZSA9IE1hdGguY2VpbCh0b3RhbC5wZXJjZW50KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJcdTVBOTJcdThENDRcdTRFMEFcdTRGMjBcdTUyMzBcdTRFMDNcdTcyNUJcdTRFOTFcdThGREJcdTVFQTYuLi4iLmNvbmNhdChwZXJjZW50YWdlLCAiJSIpKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsgLy8g5pu05paw5LiK5Lyg6L+b5bqmCgogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWxlID0gX3RoaXMyLmZpbGVMaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbGUudWlkID09IGl0ZW0udWlkOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRGaWxlKSB7CiAgICAgICAgICAgICAgICAgIGN1cnJlbnRGaWxlLnBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGVycm9yID0gZnVuY3Rpb24gZXJyb3IocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflqpLotYTkuIrkvKDliLDkuIPniZvkupHlpLHotKUuLi4nKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5aqS6LWE5LiK5Lyg5Yiw5LiD54mb5LqR5a6M5oiQLi4uJyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7IC8vIOS/neWtmOWqkui1hOS/oeaBrwoKICAgICAgICAgICAgICAgIF90aGlzMi5zYXZlUWluaXV5dW5NZWRpYShmaWxlLm5hbWUsIHFuUGFyYW1zKTsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAvLyDosIPnlKhzZGvkuIrkvKDmjqXlj6Pojrflvpfnm7jlupTnmoRvYnNlcnZhYmxl77yM5o6n5Yi25LiK5Lyg5ZKM5pqC5YGcCiAgICAgICAgICAgICAgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSwgY29uZmlnKTsKICAgICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZShuZXh0LCBlcnJvciwgY29tcGxldGUpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflqpLotYTkuIrkvKDliLDkuIPniZvkupHlvIDlp4suLi4nKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog6Z+zL+inhumikeS4iuS8oOWIsOmYv+mHjOS6kQ0KICAgICAqIFRPRE86IOW8guW4uOezu+iAg+iZkQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJhbGl5dW5VcGxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFsaXl1blVwbG9hZChmaWxlKSB7CiAgICAgIHZhciBmaWxlTmFtZSwgaW5kZXgsIHRpdGxlLCBib2R5LCB2b2RUb2tlbiwgdXNlckRhdGEsIHVwbG9hZGVyOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGFsaXl1blVwbG9hZCQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZmlsZU5hbWUgPSBmaWxlLm5hbWU7CiAgICAgICAgICAgICAgaW5kZXggPSBmaWxlTmFtZS5sYXN0SW5kZXhPZignLicpOwogICAgICAgICAgICAgIHRpdGxlID0gZmlsZU5hbWUuc3Vic3RyKDAsIGluZGV4KTsKICAgICAgICAgICAgICBib2R5ID0gewogICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGVOYW1lLAogICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChnZXRWb2RUb2tlbihib2R5KSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgdm9kVG9rZW4gPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICB1c2VyRGF0YSA9ICd7IlZvZCI6e319JzsKICAgICAgICAgICAgICB1cGxvYWRlciA9IHRoaXMuY3JlYXRlVXBsb2FkZXIodm9kVG9rZW4pOwogICAgICAgICAgICAgIHVwbG9hZGVyLmFkZEZpbGUoZmlsZSwgbnVsbCwgbnVsbCwgbnVsbCwgdXNlckRhdGEpOyAvLyDnhLblkI7osIPnlKggc3RhcnRVcGxvYWQg5pa55rOVLCDlvIDlp4vkuIrkvKAKCiAgICAgICAgICAgICAgaWYgKHVwbG9hZGVyICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICB1cGxvYWRlci5zdGFydFVwbG9hZCgpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVVcGxvYWRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlVXBsb2FkZXIodm9kVG9rZW4pIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgdXBsb2FkZXIgPSBuZXcgQWxpeXVuVXBsb2FkLlZvZCh7CiAgICAgICAgdXNlcklkOiB2b2RUb2tlbi51c2VySWQsCiAgICAgICAgLy8g5byA5aeL5LiK5LygCiAgICAgICAgb25VcGxvYWRzdGFydGVkOiBmdW5jdGlvbiBvblVwbG9hZHN0YXJ0ZWQodXBsb2FkSW5mbykgewogICAgICAgICAgY29uc29sZS5sb2coJ+Wqkui1hOS4iuS8oOWIsOmYv+mHjOS6keW8gOWniy4uLicpOwogICAgICAgICAgY29uc29sZS5sb2codXBsb2FkSW5mbyk7CiAgICAgICAgICB1cGxvYWRlci5zZXRVcGxvYWRBdXRoQW5kQWRkcmVzcyh1cGxvYWRJbmZvLCB2b2RUb2tlbi51cGxvYWRBdXRoLCB2b2RUb2tlbi51cGxvYWRBZGRyZXNzLCB2b2RUb2tlbi52aWRlb0lkKTsKICAgICAgICB9LAogICAgICAgIC8vIOaWh+S7tuS4iuS8oOi/m+W6pu+8jOWNleS9je+8muWtl+iKgiwg5Y+v5Lul5Zyo6L+Z5Liq5Ye95pWw5Lit5ou/5Yiw5LiK5Lyg6L+b5bqm5bm25pi+56S65Zyo6aG16Z2i5LiKCiAgICAgICAgb25VcGxvYWRQcm9ncmVzczogZnVuY3Rpb24gb25VcGxvYWRQcm9ncmVzcyh1cGxvYWRJbmZvLCB0b3RhbFNpemUsIHByb2dyZXNzKSB7CiAgICAgICAgICB2YXIgcGVyY2VudGFnZSA9IE1hdGguY2VpbChwcm9ncmVzcyAqIDEwMCk7CiAgICAgICAgICBjb25zb2xlLmxvZygiXHU1QTkyXHU4RDQ0XHU0RTBBXHU0RjIwXHU1MjMwXHU5NjNGXHU5MUNDXHU0RTkxXHU4RkRCXHU1RUE2Li4uIi5jb25jYXQocGVyY2VudGFnZSwgIiUiKSk7CiAgICAgICAgICBjb25zb2xlLmxvZyh1cGxvYWRJbmZvKTsgLy8g5pu05paw5LiK5Lyg6L+b5bqmCgogICAgICAgICAgdmFyIGN1cnJlbnRGaWxlID0gX3RoaXMzLmZpbGVMaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIHVwbG9hZEluZm8uZmlsZS51aWQgPT0gaXRlbS51aWQ7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoY3VycmVudEZpbGUpIHsKICAgICAgICAgICAgY3VycmVudEZpbGUucGVyY2VudGFnZSA9IHBlcmNlbnRhZ2U7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyDmlofku7bkuIrkvKDlpLHotKUKICAgICAgICBvblVwbG9hZEZhaWxlZDogZnVuY3Rpb24gb25VcGxvYWRGYWlsZWQodXBsb2FkSW5mbywgY29kZSwgbWVzc2FnZSkgewogICAgICAgICAgY29uc29sZS5sb2coJ+Wqkui1hOS4iuS8oOWIsOmYv+mHjOS6keWksei0pS4uLicpOwogICAgICAgICAgY29uc29sZS5sb2codXBsb2FkSW5mbyk7CiAgICAgICAgfSwKICAgICAgICAvLyDmlofku7bkuIrkvKDmiJDlip8KICAgICAgICBvblVwbG9hZFN1Y2NlZWQ6IGZ1bmN0aW9uIG9uVXBsb2FkU3VjY2VlZCh1cGxvYWRJbmZvKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5aqS6LWE5LiK5Lyg5Yiw6Zi/6YeM5LqR5a6M5oiQLi4uJyk7CiAgICAgICAgICBjb25zb2xlLmxvZyh1cGxvYWRJbmZvKTsgLy8g5L+d5a2Y5aqS6LWE5L+h5oGvCgogICAgICAgICAgX3RoaXMzLnNhdmVBbGl5dW5NZWRpYSh1cGxvYWRJbmZvLmZpbGUubmFtZSwgdm9kVG9rZW4pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB1cGxvYWRlcjsKICAgIH0KICAgIC8qKg0KICAgICAqIOS/neWtmOS4g+eJm+S6keWqkui1hOS/oeaBrw0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzYXZlUWluaXV5dW5NZWRpYSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZVFpbml1eXVuTWVkaWEoZmlsZW5hbWUsIHFuUGFyYW1zKSB7CiAgICAgIHZhciBib2R5OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHNhdmVRaW5pdXl1bk1lZGlhJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBib2R5ID0gewogICAgICAgICAgICAgICAgYnVja2V0OiBxblBhcmFtcy5zY29wZSwKICAgICAgICAgICAgICAgIGZpbGVJZDogcW5QYXJhbXMua2V5LAogICAgICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGVuYW1lLAogICAgICAgICAgICAgICAgdHlwZTogJzAwMTAwMycsCiAgICAgICAgICAgICAgICB4Y19rZXk6IHFuUGFyYW1zLnhjX2tleQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2F2ZU1lZGlhKGJvZHkpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5L+d5a2Y6Zi/6YeM5LqR5aqS6LWE5L+h5oGvDQogICAgICovCgogIH0sIHsKICAgIGtleTogInNhdmVBbGl5dW5NZWRpYSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUFsaXl1bk1lZGlhKGZpbGVuYW1lLCB2b2RUb2tlbikgewogICAgICB2YXIgYnVja2V0LCBib2R5OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHNhdmVBbGl5dW5NZWRpYSQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYnVja2V0ID0gSlNPTi5wYXJzZShCYXNlNjQuZGVjb2RlKHZvZFRva2VuLnVwbG9hZEFkZHJlc3MpKS5CdWNrZXQ7CiAgICAgICAgICAgICAgYm9keSA9IHsKICAgICAgICAgICAgICAgIGJ1Y2tldDogYnVja2V0LAogICAgICAgICAgICAgICAgZmlsZUlkOiB2b2RUb2tlbi52aWRlb0lkLAogICAgICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGVuYW1lLAogICAgICAgICAgICAgICAgdHlwZTogJzAwMTAwMicgLy8g6KeG6aKRCgogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoc2F2ZU1lZGlhKGJvZHkpKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5Yig6Zmk5paH5Lu2DQogICAgICogVE9ETzog6LCD55So5Yig6Zmk5o6l5Y+jDQogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZURlbGV0ZUZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZUZpbGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF56e76Zmk6K+l5paH5Lu2LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn56e76Zmk5oiQ5YqfIScKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI56e76ZmkJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8qKg0KICAgICAqIOWFs+mXreWvueivneahhuWQjuWIt+aWsOWIl+ihqA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVDbG9zZWREaWFsb2ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNsb3NlZERpYWxvZygpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2VEaWFsb2cnKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBNZWRpYUFkZERpYWxvZzsKfShWdWUpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtQcm9wU3luYygnZGlhbG9nVmlzaWJsZScsIHsKICB0eXBlOiBCb29sZWFuLAogIGRlZmF1bHQ6IGZhbHNlCn0pXSwgTWVkaWFBZGREaWFsb2cucHJvdG90eXBlLCAic3luY0RpYWxvZ1Zpc2libGUiLCB2b2lkIDApOwoKTWVkaWFBZGREaWFsb2cgPSB0c2xpYl8xLl9fZGVjb3JhdGUoW0NvbXBvbmVudF0sIE1lZGlhQWRkRGlhbG9nKTsKZXhwb3J0IGRlZmF1bHQgTWVkaWFBZGREaWFsb2c7"},{"version":3,"sources":["D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\media-add-dialog.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, PropSync } from 'vue-property-decorator'\r\nimport {\r\n  ElUploadInternalRawFile,\r\n  ElUploadInternalFileDetail,\r\n  HttpRequestOptions\r\n} from 'element-ui/types/upload'\r\n\r\nimport * as qiniu from 'qiniu-js'\r\nimport { Base64 } from 'js-base64'\r\nimport { IQnParamsDTO, IVodTokenDTO } from '@/entity/media-page-list'\r\nimport { getQnParams } from '@/api/common'\r\nimport { getVodToken, saveMedia } from '@/api/media'\r\nimport {uploadByPieces} from '@/utils/uploadtools'\r\n\r\n@Component\r\nexport default class MediaAddDialog extends Vue {\r\n  @PropSync('dialogVisible', { type: Boolean, default: false })\r\n  syncDialogVisible!: boolean\r\n\r\n  // 文档后缀名列表\r\n  private msDocumentSuffix: string[] = [\r\n    '.doc',\r\n    '.docx',\r\n    '.xls',\r\n    '.xlsx',\r\n    '.ppt',\r\n    '.pptx',\r\n    '.pdf'\r\n  ]\r\n  // 音/视频后缀名列表\r\n  private audioVideoSuffix: string[] = ['.mp3', '.wma', '.avi', '.mp4']\r\n  // 上传的文件列表\r\n  private fileList: ElUploadInternalFileDetail[] = []\r\n\r\n  /**\r\n   * 生命周期钩子\r\n   */\r\n  created() {}\r\n\r\n  /**\r\n   * 文件状态改变时的钩子\r\n   */\r\n  // 文件分块上传 \r\n  private handleChange(\r\n    file: ElUploadInternalFileDetail,\r\n    fileList: ElUploadInternalFileDetail[]\r\n  ) {\r\n    this.fileList = fileList\r\n    uploadByPieces({\r\n      file,\r\n      pieceSize: 1, //分片大小\r\n      success: (data) => {\r\n        file.percentage = (data.num/data.chunkCount) * 100\r\n        console.log('success::' + data)\r\n      },\r\n      error: (e) => {\r\n        console.log(file, fileList)\r\n        // 出错了可以从列表中删除吧\r\n        // fileList.forEach((n,i) => { if(n.uid == file.uid){\r\n        //   fileList.splice(i,1)\r\n        // } })\r\n        console.log('error::' + '视频分片上传失败')\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 上传文件之前的钩子\r\n   */\r\n  private handleBeforeUpload(file: ElUploadInternalRawFile) {\r\n    let validSuffix = this.msDocumentSuffix.concat(this.audioVideoSuffix)\r\n    let filename = file.name\r\n    let index = filename.lastIndexOf('.')\r\n    let suffix = filename.substr(index)\r\n\r\n    const isValid = validSuffix.indexOf(suffix) !== -1\r\n    if (!isValid) {\r\n      this.$message.error(`上传媒资文件只能是 ${validSuffix.toString()} 格式！`)\r\n    }\r\n    return isValid\r\n  }\r\n\r\n  /**\r\n   * 覆盖默认的上传行为\r\n   */\r\n  private handleHttpRequest(options: HttpRequestOptions) {\r\n    let file = options.file\r\n    let filename = file.name\r\n    let index = filename.lastIndexOf('.')\r\n    let suffix = filename.substr(index)\r\n\r\n    if (this.audioVideoSuffix.indexOf(suffix) !== -1) {\r\n      // 音/视频上传到阿里云\r\n      this.aliyunUpload(file)\r\n    } else {\r\n      // 文档上传到七牛云\r\n      this.qiniuyunUpload(file)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 文档上传到七牛云\r\n   * TODO: 异常系考虑 401\r\n   */\r\n  private async qiniuyunUpload(file: ElUploadInternalFileDetail) {\r\n    // 准备工作\r\n    let qnParams: IQnParamsDTO = await getQnParams()\r\n\r\n    // 开始上传\r\n    let token = qnParams.qnToken\r\n    let config = {\r\n      useCdnDomain: true,\r\n      region: null // 自动分析上传域名区域\r\n    }\r\n    let putExtra = {\r\n      fname: '',\r\n      params: {},\r\n      mimeType: null\r\n    }\r\n    let key = qnParams.key\r\n\r\n    let next = response => {\r\n      let total = response.total\r\n      let percentage = Math.ceil(total.percent)\r\n      console.log(`媒资上传到七牛云进度...${percentage}%`)\r\n      console.log(response)\r\n\r\n      // 更新上传进度\r\n      let currentFile = this.fileList.find(\r\n        (item: ElUploadInternalFileDetail) => {\r\n          return file.uid == item.uid\r\n        }\r\n      )\r\n      if (currentFile) {\r\n        currentFile.percentage = percentage\r\n      }\r\n    }\r\n    let error = response => {\r\n      console.log('媒资上传到七牛云失败...')\r\n      console.log(response)\r\n    }\r\n    let complete = response => {\r\n      console.log('媒资上传到七牛云完成...')\r\n      console.log(response)\r\n\r\n      // 保存媒资信息\r\n      this.saveQiniuyunMedia(file.name, qnParams)\r\n    }\r\n\r\n    let subscription\r\n    // 调用sdk上传接口获得相应的observable，控制上传和暂停\r\n    let observable = qiniu.upload(file, key, token, putExtra, config)\r\n    observable.subscribe(next, error, complete)\r\n    console.log('媒资上传到七牛云开始...')\r\n  }\r\n\r\n  /**\r\n   * 音/视频上传到阿里云\r\n   * TODO: 异常系考虑\r\n   */\r\n  private async aliyunUpload(file: ElUploadInternalFileDetail) {\r\n    let fileName = file.name\r\n    let index = fileName.lastIndexOf('.')\r\n    let title = fileName.substr(0, index)\r\n    let body = {\r\n      fileName: fileName,\r\n      title: title\r\n    }\r\n    let vodToken: IVodTokenDTO = await getVodToken(body)\r\n\r\n    let userData = '{\"Vod\":{}}'\r\n    let uploader = this.createUploader(vodToken)\r\n    uploader.addFile(file, null, null, null, userData)\r\n    // 然后调用 startUpload 方法, 开始上传\r\n    if (uploader !== null) {\r\n      uploader.startUpload()\r\n    }\r\n  }\r\n\r\n  private createUploader(vodToken: IVodTokenDTO) {\r\n    let uploader = new AliyunUpload.Vod({\r\n      userId: vodToken.userId,\r\n      // 开始上传\r\n      onUploadstarted: uploadInfo => {\r\n        console.log('媒资上传到阿里云开始...')\r\n        console.log(uploadInfo)\r\n        uploader.setUploadAuthAndAddress(\r\n          uploadInfo,\r\n          vodToken.uploadAuth,\r\n          vodToken.uploadAddress,\r\n          vodToken.videoId\r\n        )\r\n      },\r\n      // 文件上传进度，单位：字节, 可以在这个函数中拿到上传进度并显示在页面上\r\n      onUploadProgress: (uploadInfo, totalSize, progress) => {\r\n        let percentage = Math.ceil(progress * 100)\r\n        console.log(`媒资上传到阿里云进度...${percentage}%`)\r\n        console.log(uploadInfo)\r\n\r\n        // 更新上传进度\r\n        let currentFile = this.fileList.find(\r\n          (item: ElUploadInternalFileDetail) => {\r\n            return uploadInfo.file.uid == item.uid\r\n          }\r\n        )\r\n        if (currentFile) {\r\n          currentFile.percentage = percentage\r\n        }\r\n      },\r\n      // 文件上传失败\r\n      onUploadFailed: (uploadInfo, code, message) => {\r\n        console.log('媒资上传到阿里云失败...')\r\n        console.log(uploadInfo)\r\n      },\r\n      // 文件上传成功\r\n      onUploadSucceed: uploadInfo => {\r\n        console.log('媒资上传到阿里云完成...')\r\n        console.log(uploadInfo)\r\n\r\n        // 保存媒资信息\r\n        this.saveAliyunMedia(uploadInfo.file.name, vodToken)\r\n      }\r\n    })\r\n    return uploader\r\n  }\r\n\r\n  /**\r\n   * 保存七牛云媒资信息\r\n   */\r\n  private async saveQiniuyunMedia(filename: string, qnParams: IQnParamsDTO) {\r\n    let body = {\r\n      bucket: qnParams.scope,\r\n      fileId: qnParams.key,\r\n      filename: filename,\r\n      type: '001003', // 文档\r\n      xc_key: qnParams.xc_key\r\n    }\r\n    await saveMedia(body)\r\n  }\r\n\r\n  /**\r\n   * 保存阿里云媒资信息\r\n   */\r\n  private async saveAliyunMedia(filename: string, vodToken: IVodTokenDTO) {\r\n    let bucket = JSON.parse(Base64.decode(vodToken.uploadAddress)).Bucket\r\n    let body = {\r\n      bucket: bucket,\r\n      fileId: vodToken.videoId,\r\n      filename: filename,\r\n      type: '001002' // 视频\r\n    }\r\n    await saveMedia(body)\r\n  }\r\n\r\n  /**\r\n   * 删除文件\r\n   * TODO: 调用删除接口\r\n   */\r\n  private handleDeleteFile() {\r\n    this.$confirm('此操作将永久移除该文件, 是否继续?', '提示', {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    })\r\n      .then(() => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '移除成功!'\r\n        })\r\n      })\r\n      .catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消移除'\r\n        })\r\n      })\r\n  }\r\n\r\n  /**\r\n   * 关闭对话框后刷新列表\r\n   */\r\n  private handleClosedDialog() {\r\n    this.$emit('closeDialog')\r\n  }\r\n}\r\n"],"sourceRoot":""}]}