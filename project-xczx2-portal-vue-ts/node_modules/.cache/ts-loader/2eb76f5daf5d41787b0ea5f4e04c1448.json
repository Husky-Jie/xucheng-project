{"remainingRequest":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\store\\modules\\user.ts","dependencies":[{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\store\\modules\\user.ts","mtime":1586849107738},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js","mtime":1577501200723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOlxcSmF2YVx1NUI2Nlx1NEU2MFxceHVjaGVuZy1wcm9qZWN0XFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6XFxKYXZhXHU1QjY2XHU0RTYwXFx4dWNoZW5nLXByb2plY3RcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJEOlxcSmF2YVx1NUI2Nlx1NEU2MFxceHVjaGVuZy1wcm9qZWN0XFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiRDpcXEphdmFcdTVCNjZcdTRFNjBcXHh1Y2hlbmctcHJvamVjdFxccHJvamVjdC14Y3p4Mi1wb3J0YWwtdnVlLXRzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJEOlxcSmF2YVx1NUI2Nlx1NEU2MFxceHVjaGVuZy1wcm9qZWN0XFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gInRzbGliIjsKaW1wb3J0IHsgVnVleE1vZHVsZSwgTW9kdWxlLCBBY3Rpb24sIE11dGF0aW9uLCBnZXRNb2R1bGUgfSBmcm9tICd2dWV4LW1vZHVsZS1kZWNvcmF0b3JzJzsKaW1wb3J0IHsgbG9naW4gfSBmcm9tICdAL2FwaS91c2Vycyc7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4sIGdldE5hbWUsIHNldE5hbWUsIHJlbW92ZU5hbWUgfSBmcm9tICdAL3V0aWxzL2Nvb2tpZXMnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7Cgp2YXIgVXNlciA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9WdWV4TW9kdWxlKSB7CiAgX2luaGVyaXRzKFVzZXIsIF9WdWV4TW9kdWxlKTsKCiAgZnVuY3Rpb24gVXNlcigpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXNlcik7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVXNlcikuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgICBfdGhpcy50b2tlbiA9IGdldFRva2VuKCkgfHwgJyc7CiAgICBfdGhpcy5uYW1lID0gZ2V0TmFtZSgpIHx8ICcnOwogICAgX3RoaXMuYXZhdGFyID0gJyc7CiAgICBfdGhpcy5pbnRyb2R1Y3Rpb24gPSAnJzsKICAgIF90aGlzLnJvbGVzID0gW107CiAgICBfdGhpcy51c2VySWQgPSAwOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFVzZXIsIFt7CiAgICBrZXk6ICJTRVRfVE9LRU4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIFNFVF9UT0tFTih0b2tlbikgewogICAgICB0aGlzLnRva2VuID0gdG9rZW47CiAgICB9CiAgfSwgewogICAga2V5OiAiU0VUX05BTUUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIFNFVF9OQU1FKG5hbWUpIHsKICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJTRVRfQVZBVEFSIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBTRVRfQVZBVEFSKGF2YXRhcikgewogICAgICB0aGlzLmF2YXRhciA9IGF2YXRhcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJTRVRfSU5UUk9EVUNUSU9OIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBTRVRfSU5UUk9EVUNUSU9OKGludHJvZHVjdGlvbikgewogICAgICB0aGlzLmludHJvZHVjdGlvbiA9IGludHJvZHVjdGlvbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJTRVRfUk9MRVMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIFNFVF9ST0xFUyhyb2xlcykgewogICAgICB0aGlzLnJvbGVzID0gcm9sZXM7CiAgICB9CiAgfSwgewogICAga2V5OiAiU0VUX1VTRVJfSUQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIFNFVF9VU0VSX0lEKHVzZXJJZCkgewogICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJMb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gTG9naW4odXNlckluZm8pIHsKICAgICAgdmFyIHVzZXJuYW1lLCBwYXNzd29yZCwgZGF0YTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBMb2dpbiQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZSwgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgICAgICAgICAgICB1c2VybmFtZSA9IHVzZXJuYW1lLnRyaW0oKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIC8vIFRPRE86IOW9k+eZu+W9leWksei0peaXtu+8jOW6lOivpeebtOaOpei/lOWbnumUmeivr+a2iOaBr++8jOS4jeW6lOivpee7p+e7reaJp+ihjOS6hgogICAgICAgICAgICAgIHNldFRva2VuKGRhdGEuYWNjZXNzX3Rva2VuKTsKICAgICAgICAgICAgICBzZXROYW1lKHVzZXJuYW1lKTsKICAgICAgICAgICAgICB0aGlzLlNFVF9UT0tFTihkYXRhLmFjY2Vzc190b2tlbik7CiAgICAgICAgICAgICAgdGhpcy5TRVRfTkFNRSh1c2VybmFtZSk7CiAgICAgICAgICAgICAgdGhpcy5TRVRfQVZBVEFSKCcnKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogIkxvZ091dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gTG9nT3V0KCkgewogICAgICByZW1vdmVUb2tlbigpOwogICAgICByZW1vdmVOYW1lKCk7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJRU5UX1BPUlRBTF9VUkwsICIvcGFnZXMvbGVhcmluZy1pbmRleC5odG1sIik7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVXNlcjsKfShWdWV4TW9kdWxlKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbTXV0YXRpb25dLCBVc2VyLnByb3RvdHlwZSwgIlNFVF9UT0tFTiIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtNdXRhdGlvbl0sIFVzZXIucHJvdG90eXBlLCAiU0VUX05BTUUiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbTXV0YXRpb25dLCBVc2VyLnByb3RvdHlwZSwgIlNFVF9BVkFUQVIiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbTXV0YXRpb25dLCBVc2VyLnByb3RvdHlwZSwgIlNFVF9JTlRST0RVQ1RJT04iLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbTXV0YXRpb25dLCBVc2VyLnByb3RvdHlwZSwgIlNFVF9ST0xFUyIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtNdXRhdGlvbl0sIFVzZXIucHJvdG90eXBlLCAiU0VUX1VTRVJfSUQiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbQWN0aW9uXSwgVXNlci5wcm90b3R5cGUsICJMb2dpbiIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtBY3Rpb25dLCBVc2VyLnByb3RvdHlwZSwgIkxvZ091dCIsIG51bGwpOwoKVXNlciA9IHRzbGliXzEuX19kZWNvcmF0ZShbTW9kdWxlKHsKICBkeW5hbWljOiB0cnVlLAogIHN0b3JlOiBzdG9yZSwKICBuYW1lOiAndXNlcicKfSldLCBVc2VyKTsKZXhwb3J0IHZhciBVc2VyTW9kdWxlID0gZ2V0TW9kdWxlKFVzZXIpOw=="},{"version":3,"sources":["D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\store\\modules\\user.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  VuexModule,\r\n  Module,\r\n  Action,\r\n  Mutation,\r\n  getModule\r\n} from 'vuex-module-decorators'\r\nimport { login } from '@/api/users'\r\nimport { IUserLogin } from '@/entity/user-login'\r\nimport {\r\n  getToken,\r\n  setToken,\r\n  removeToken,\r\n  getName,\r\n  setName,\r\n  removeName\r\n} from '@/utils/cookies'\r\nimport store from '@/store'\r\n\r\nexport interface IUserState {\r\n  token: string\r\n  name: string\r\n  avatar: string\r\n  introduction: string\r\n  roles: string[]\r\n  userId: number\r\n}\r\n\r\n@Module({ dynamic: true, store, name: 'user' })\r\nclass User extends VuexModule implements IUserState {\r\n  public token = getToken() || ''\r\n  public name = getName() || ''\r\n  public avatar = ''\r\n  public introduction = ''\r\n  public roles: string[] = []\r\n  public userId = 0\r\n\r\n  @Mutation\r\n  private SET_TOKEN(token: string) {\r\n    this.token = token\r\n  }\r\n\r\n  @Mutation\r\n  private SET_NAME(name: string) {\r\n    this.name = name\r\n  }\r\n\r\n  @Mutation\r\n  private SET_AVATAR(avatar: string) {\r\n    this.avatar = avatar\r\n  }\r\n\r\n  @Mutation\r\n  private SET_INTRODUCTION(introduction: string) {\r\n    this.introduction = introduction\r\n  }\r\n\r\n  @Mutation\r\n  private SET_ROLES(roles: string[]) {\r\n    this.roles = roles\r\n  }\r\n\r\n  @Mutation\r\n  private SET_USER_ID(userId: number) {\r\n    this.userId = userId\r\n  }\r\n\r\n  @Action\r\n  public async Login(userInfo: { username: string; password: string }) {\r\n    let { username, password } = userInfo\r\n    username = username.trim()\r\n    const data: IUserLogin = await login(username, password)\r\n\r\n    // TODO: 当登录失败时，应该直接返回错误消息，不应该继续执行了\r\n    setToken(data.access_token)\r\n    setName(username)\r\n    this.SET_TOKEN(data.access_token)\r\n    this.SET_NAME(username)\r\n    this.SET_AVATAR('')\r\n  }\r\n\r\n  @Action\r\n  public LogOut() {\r\n    removeToken()\r\n    removeName()\r\n    window.location.href = `${process.env.VUE_APP_CLIENT_PORTAL_URL}/pages/learing-index.html`\r\n  }\r\n}\r\n\r\nexport const UserModule = getModule(User)\r\n"],"sourceRoot":""}]}