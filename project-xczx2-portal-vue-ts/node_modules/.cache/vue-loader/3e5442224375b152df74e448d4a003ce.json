{"remainingRequest":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\src\\module-personal\\pages\\change-password\\components\\change-password-step2-setting-password.vue?vue&type=style&index=0&id=19ce2f68&lang=scss&scoped=true&","dependencies":[{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\src\\module-personal\\pages\\change-password\\components\\change-password-step2-setting-password.vue","mtime":1577540581818},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\css-loader\\dist\\cjs.js","mtime":1660903053592},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1660903053930},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\postcss-loader\\src\\index.js","mtime":1576202027988},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1660903055666},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnN0ZXAtYm9keSB7DQogIHdpZHRoOiA3NTBweDsNCiAgbWFyZ2luOiAwIGF1dG87DQp9DQovLyAudGl0IHsNCi8vICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KLy8gICB3aWR0aDogMTUwcHg7DQovLyAgIHRleHQtYWxpZ246IHJpZ2h0Ow0KLy8gfQ0K"},{"version":3,"sources":["change-password-step2-setting-password.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"change-password-step2-setting-password.vue","sourceRoot":"src/module-personal/pages/change-password/components","sourcesContent":["\r\n<template>\r\n  <div class=\"step-body\">\r\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" class=\"form\" label-width=\"110px\" size=\"mini\">\r\n      <el-form-item label=\"新密码：\" prop=\"password\">\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"6\">\r\n            <el-input v-model=\"form.password\" placeholder></el-input>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form-item>\r\n      <el-form-item label=\"验证新密码：\" prop=\"confirmPwd\">\r\n        <el-row :gutter=\"10\">\r\n          <el-col :span=\"6\">\r\n            <el-input v-model=\"form.confirmPwd\" placeholder></el-input>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n  <!-- <div>\r\n    <p>\r\n      <span class=\"tit\">新密码：</span>\r\n      <input type=\"text\" class=\"code-input\" />\r\n    </p>\r\n    <p>\r\n      <span class=\"tit\">验证新密码：</span>\r\n      <input type=\"text\" class=\"code-input\" />\r\n    </p>\r\n  </div>-->\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Prop } from 'vue-property-decorator'\r\nimport { Form as ElForm } from 'element-ui'\r\nimport { changePwd } from '@/api/learning-user'\r\n\r\n@Component\r\nexport default class ChangePasswordStep2SettingPassword extends Vue {\r\n  @Prop({ required: true, type: String, default: '' })\r\n  phone!: string\r\n  @Prop({ required: true, type: String, default: '' })\r\n  verifyToken!: string\r\n  // 表单数据\r\n  private form: any = {\r\n    phone: '',\r\n    password: '',\r\n    confirmPwd: ''\r\n  }\r\n  // 验证详情\r\n  // TODO: 密码其他校验\r\n  private validatePassword: any = (rule, value, callback) => {\r\n    if (value === '') {\r\n      callback(new Error('请输入密码'))\r\n    } else {\r\n      if (this.form.confirmPwd !== '') {\r\n        let form = this.$refs['form'] as ElForm\r\n        form.validateField('confirmPwd', () => {})\r\n      }\r\n      callback()\r\n    }\r\n  }\r\n  private validateConfirmPwd: any = (rule, value, callback) => {\r\n    if (value === '') {\r\n      callback(new Error('请再次输入密码'))\r\n    } else if (value !== this.form.password) {\r\n      callback(new Error('两次输入密码不一致!'))\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n  // 表单验证\r\n  private rules: any = {\r\n    password: [{ validator: this.validatePassword, trigger: 'change' }],\r\n    confirmPwd: [{ validator: this.validateConfirmPwd, trigger: 'change' }]\r\n  }\r\n\r\n  /**\r\n   * 新密码提交\r\n   */\r\n  public async changePwd(): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      let form = this.$refs['form'] as ElForm\r\n      form.validate(async (isValid: boolean) => {\r\n        if (isValid) {\r\n          this.form.phone = this.phone\r\n          await changePwd(this.verifyToken, this.form)\r\n          resolve()\r\n        } else {\r\n          reject()\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.step-body {\r\n  width: 750px;\r\n  margin: 0 auto;\r\n}\r\n// .tit {\r\n//   display: inline-block;\r\n//   width: 150px;\r\n//   text-align: right;\r\n// }\r\n</style>"]}]}