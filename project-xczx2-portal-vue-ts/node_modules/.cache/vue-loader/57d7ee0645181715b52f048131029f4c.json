{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-entering\\pages\\entering\\components\\personal-entering-step2-submit-information.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-entering\\pages\\entering\\components\\personal-entering-step2-submit-information.vue","mtime":1586849107721},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCB7IEZvcm0gYXMgRWxGb3JtIH0gZnJvbSAnZWxlbWVudC11aScNCmltcG9ydCBDb21tb25FbnRlcmluZ1N0ZXAyVXBsb2FkSW1hZ2UgZnJvbSAnLi9jb21tb24tZW50ZXJpbmctc3RlcDItdXBsb2FkLWltYWdlLnZ1ZScNCmltcG9ydCBDb21tb25FbnRlcmluZ1N0ZXAyTWFpbkNhdGVnb3J5IGZyb20gJy4vY29tbW9uLWVudGVyaW5nLXN0ZXAyLW1haW4tY2F0ZWdvcnkudnVlJw0KaW1wb3J0IENvbW1vbkVudGVyaW5nU3RlcDJQaG9uZVZlcmlmeUNvZGUgZnJvbSAnLi9jb21tb24tZW50ZXJpbmctc3RlcDItcGhvbmUtdmVyaWZ5Q29kZS52dWUnDQppbXBvcnQgeyBzYXZlUGVyc29uYWxPcmcgfSBmcm9tICdAL2FwaS90ZWFjaGluZy1wZXJzb25hbC1vcmcnDQppbXBvcnQgeyBJVGVhY2hpbmdQZXJzb25hbE9yZ0RUTyB9IGZyb20gJ0AvZW50aXR5L3RlYWNoaW5nLXBlcnNvbmFsLW9yZycNCg0KQENvbXBvbmVudCh7DQogIGNvbXBvbmVudHM6IHsNCiAgICBDb21tb25FbnRlcmluZ1N0ZXAyVXBsb2FkSW1hZ2UsDQogICAgQ29tbW9uRW50ZXJpbmdTdGVwMk1haW5DYXRlZ29yeSwNCiAgICBDb21tb25FbnRlcmluZ1N0ZXAyUGhvbmVWZXJpZnlDb2RlDQogIH0NCn0pDQpleHBvcnQgZGVmYXVsdCBjbGFzcyBQZXJzb25hbEVudGVyaW5nU3RlcDJTdWJtaXRmb3JtIGV4dGVuZHMgVnVlIHsNCiAgcHJpdmF0ZSBmb3JtOiBJVGVhY2hpbmdQZXJzb25hbE9yZ0RUTyA9IHsNCiAgICBlbWFpbDogJycsDQogICAgaWRDYXJkOiAnJywNCiAgICBpbnRybzogJycsDQogICAgbG9nbzogJycsDQogICAgbWFpbkNhdGVnb3J5OiAnJywNCiAgICBuYW1lOiAnJywNCiAgICBwaG9uZTogJycsDQogICAgcHJvbWlzZUxldHRlcjogJycsDQogICAgdGVhY2hlckNlcnRJbWc6ICcnLA0KICAgIHZlcmlmeUNvZGU6ICcnLA0KICAgIHZlcmlmeUtleTogJycNCiAgfQ0KICBwcml2YXRlIGNlcnRJbmRleDogc3RyaW5nID0gJzAnDQoNCiAgLy8gVE9ETzog6LWE5qC86K+B5Lmm5ZKM6K+B5Lmm57yW5Y+35LiA5LiA5a+55bqUDQogIC8vIOi1hOagvOivgeS5pg0KICBwcml2YXRlIHZhbGlkYXRlQ2VydEltZyA9IChydWxlOiBhbnksIHZhbHVlOiBhbnksIGNhbGxiYWNrOiBhbnkpID0+IHsNCiAgICBpZiAoIXZhbHVlICYmICF0aGlzLmZvcm0uZWR1Q2VydEltZyAmJiAhdGhpcy5mb3JtLm1ham9yQ2VydEltZykgew0KICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7foh7PlsJHmj5DkuqTkuIDlvKDmlZnluIjotYTmoLzor4HjgIHpq5jlrabljobor4HjgIHkuJPkuJror4HkuabnhafniYcnKSkNCiAgICB9IGVsc2Ugew0KICAgICAgY2FsbGJhY2soKQ0KICAgIH0NCiAgfQ0KICAvLyDor4HkuabnvJblj7cNCiAgcHJpdmF0ZSB2YWxpZGF0ZUNlcnRObyA9IChydWxlOiBhbnksIHZhbHVlOiBhbnksIGNhbGxiYWNrOiBhbnkpID0+IHsNCiAgICBpZiAoIXZhbHVlICYmICF0aGlzLmZvcm0uZWR1Q2VydE5vICYmICF0aGlzLmZvcm0ubWFqb3JDZXJ0Tm8pIHsNCiAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35aGr5YaZ6K+B5Lmm57yW5Y+3JykpDQogICAgfSBlbHNlIHsNCiAgICAgIGNhbGxiYWNrKCkNCiAgICB9DQogIH0NCiAgLy8g5omL5py65Y+35q2j5YiZ77yM5Y+C6ICD77yaaHR0cDovL2NhaWJhb2ppYW4uY29tL3Bob25lLXJlZ2V4cC5odG1sDQogIHByaXZhdGUgdmFsaWRhdGVQaG9uZSA9IChydWxlOiBhbnksIHZhbHVlOiBhbnksIGNhbGxiYWNrOiBhbnkpID0+IHsNCiAgICBpZiAoIS9eMVswLTldezEwfSQvLnRlc3QodmFsdWUpKSB7DQogICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeato+ehrueahOaJi+acuuWPtycpKQ0KICAgIH0gZWxzZSB7DQogICAgICBjYWxsYmFjaygpDQogICAgfQ0KICB9DQogIC8vIFRPRE86IOWinuWKoHJ1bGVz5qCh6aqMDQogIHByaXZhdGUgcnVsZXM6IGFueSA9IHsNCiAgICAvLyDouqvku73or4HmmI4NCiAgICBuYW1lOiBbDQogICAgICB7DQogICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiAn55yf5a6e5aeT5ZCN77yM6ZyA6KaB5LiO6Lqr5Lu96K+B5LiA6Ie0JywNCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgIH0NCiAgICBdLA0KICAgIGlkQ2FyZDogWw0KICAgICAgew0KICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgbWVzc2FnZTogJ+ivt+Whq+WGmei6q+S7veivgeWPt+eggScsDQogICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICB9DQogICAgXSwNCiAgICB0ZWFjaGVyQ2VydEltZzogW3sgdmFsaWRhdG9yOiB0aGlzLnZhbGlkYXRlQ2VydEltZywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sDQogICAgdGVhY2hlckNlcnRObzogW3sgdmFsaWRhdG9yOiB0aGlzLnZhbGlkYXRlQ2VydE5vLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwNCg0KICAgIC8vIOS4quS6uuS/oeaBrw0KICAgIGxvZ286IFsNCiAgICAgIHsNCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgIG1lc3NhZ2U6ICfor7for7fkuIrkvKDlsYXkuK3muIXmmbDlpLTlg4/vvIzkuI3lkIjop4TojIPkvJrlrqHmoLjkuI3pgJrov4fvvIjmn6XnnIvlm77kvovvvIknLA0KICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgfQ0KICAgIF0sDQogICAgbWFpbkNhdGVnb3J5OiBbDQogICAgICB7DQogICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5Li76JCl57G755uuJywNCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgIH0NCiAgICBdLA0KICAgIGVtYWlsOiBbDQogICAgICB7DQogICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiAn6K+35aGr5YaZ6YKu566xJywNCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgIH0NCiAgICBdLA0KICAgIGludHJvOiBbDQogICAgICB7DQogICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiAn6K+35aGr5YaZ5Liq5Lq6566A5LuLJywNCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgIH0NCiAgICBdLA0KICAgIHdvcmtFeHBlcmllbmNlOiBbDQogICAgICB7DQogICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiAn6K+35aGr5YaZ5pWZ5a2m5bel5L2c57uP5Y6GJywNCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgIH0NCiAgICBdLA0KICAgIHdvcmtSZXN1bHRzOiBbDQogICAgICB7DQogICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiAn6K+35aGr5YaZ5pWZ5a2m5bel5L2c5oiQ5p6cJywNCiAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgIH0NCiAgICBdLA0KICAgIHBob25lOiBbDQogICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35aGr5YaZ5omL5py65Y+356CBJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgIHsgdmFsaWRhdG9yOiB0aGlzLnZhbGlkYXRlUGhvbmUsIHRyaWdnZXI6ICdjaGFuZ2UnIH0NCiAgICBdLA0KICAgIHZlcmlmeUNvZGU6IFsNCiAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7floavlhpnpqozor4HnoIEnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9DQogICAgXSwNCiAgICBwcm9taXNlTGV0dGVyOiBbDQogICAgICB7DQogICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOg0KICAgICAgICAgICfor7floavlhpnlrozmr5XmnKzpobXpnaLnmoTkv6Hmga/lkI7vvIzngrnlh7vkuIvovb3mib/or7rkuabmqKHmnb/vvIzkuIrkvKDliqDnm5blhaznq6DnmoTmiavmj4/ku7YnLA0KICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgfQ0KICAgIF0NCiAgfQ0KDQogIC8qKg0KICAgKiDmj5DkuqTotYTmlpkNCiAgICovDQogIHB1YmxpYyBhc3luYyBzYXZlUGVyc29uYWxPcmcoKTogUHJvbWlzZTxib29sZWFuPiB7DQogICAgLy8gVE9ETzog6L+Z56eN5bWM5aWX5pa55byP5LiN5aW977yM5LiN5LyY6ZuFDQogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgIGxldCBmb3JtMSA9IHRoaXMuJHJlZnNbJ2Zvcm0xJ10gYXMgRWxGb3JtDQogICAgICBmb3JtMS52YWxpZGF0ZSgodmFsaWQ6IGJvb2xlYW4pID0+IHsNCiAgICAgICAgaWYgKCF2YWxpZCkgew0KICAgICAgICAgIHJlamVjdCgpDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCg0KICAgICAgICBsZXQgZm9ybTIgPSB0aGlzLiRyZWZzWydmb3JtMiddIGFzIEVsRm9ybQ0KICAgICAgICBmb3JtMi52YWxpZGF0ZShhc3luYyAodmFsaWQ6IGJvb2xlYW4pID0+IHsNCiAgICAgICAgICBpZiAoIXZhbGlkKSB7DQogICAgICAgICAgICByZWplY3QoKQ0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgfQ0KDQogICAgICAgICAgYXdhaXQgc2F2ZVBlcnNvbmFsT3JnKHRoaXMuZm9ybSkNCiAgICAgICAgICByZXNvbHZlKCkNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSkNCiAgfQ0KfQ0K"},{"version":3,"sources":["personal-entering-step2-submit-information.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"personal-entering-step2-submit-information.vue","sourceRoot":"src/module-entering/pages/entering/components","sourcesContent":["<template>\r\n  <!-- TODO: 可以拆成3个组件，方便维护 -->\r\n  <div class=\"step-body\">\r\n    <!-- 身份证明 -->\r\n    <span class=\"title\">身份证明</span>\r\n    <el-divider></el-divider>\r\n    <el-form ref=\"form1\" :model=\"form\" :rules=\"rules\" class=\"form\" label-width=\"200px\">\r\n      <el-form-item label=\"真实姓名：\" prop=\"name\">\r\n        <el-input v-model=\"form.name\" placeholder=\"真实姓名，需要与身份证一致\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"身份证号码：\" prop=\"idCard\">\r\n        <el-input v-model=\"form.idCard\" placeholder=\"请填写身份证号码\"></el-input>\r\n      </el-form-item>\r\n      <!-- TODO: 校验消息没有及时清除 -->\r\n      <el-form-item label=\"资格证书：\" prop=\"teacherCertImg\">\r\n        <el-tabs v-model=\"certIndex\">\r\n          <el-tab-pane label=\"教师资格证\" name=\"0\">\r\n            <common-entering-step2-upload-image\r\n              :imageUrl.sync=\"form.teacherCertImg\"\r\n            >请提交有效期内的教师资格证照片，需确保头像和文字清晰</common-entering-step2-upload-image>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"高学历证\" name=\"1\">\r\n            <common-entering-step2-upload-image\r\n              :imageUrl.sync=\"form.eduCertImg\"\r\n            >请提交大学本科以上学历水平证件照片，如学生证、毕业证等（需包含照片、姓名、专业、官方印章等有效信息）</common-entering-step2-upload-image>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"专业证书\" name=\"2\">\r\n            <common-entering-step2-upload-image\r\n              :imageUrl.sync=\"form.majorCertImg\"\r\n            >请提交教学能力或专业能力证明，如职称证书、考级证书等（需包含官方印章等有效信息）</common-entering-step2-upload-image>\r\n          </el-tab-pane>\r\n          <!-- TODO: 等待后端提供\"本人微博账号\"，\"其他\"字段 -->\r\n        </el-tabs>\r\n      </el-form-item>\r\n      <el-form-item label=\"证书编号：\" prop=\"teacherCertNo\">\r\n        <el-input\r\n          v-show=\"certIndex === '0'\"\r\n          v-model=\"form.teacherCertNo\"\r\n          placeholder=\"请填写证书编号，如音乐教师资格证（10字内，会标注在老师主页）\"\r\n        ></el-input>\r\n        <el-input v-show=\"certIndex === '1'\" v-model=\"form.eduCertNo\" placeholder=\"请填写证书编号\"></el-input>\r\n        <el-input v-show=\"certIndex === '2'\" v-model=\"form.majorCertNo\" placeholder=\"请填写证书编号\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!-- 个人信息 -->\r\n    <span class=\"title\">个人信息</span>\r\n    <el-divider></el-divider>\r\n    <el-form ref=\"form2\" :model=\"form\" :rules=\"rules\" class=\"form\" label-width=\"200px\">\r\n      <el-form-item label=\"头像：\" prop=\"logo\">\r\n        <common-entering-step2-upload-image :imageUrl.sync=\"form.logo\">请提交有效期内的教师资格证照片，需确保头像和文字清晰</common-entering-step2-upload-image>\r\n      </el-form-item>\r\n      <el-form-item label=\"主营类目：\" prop=\"mainCategory\">\r\n        <common-entering-step2-main-category :mainCategory.sync=\"form.mainCategory\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱：\" prop=\"email\">\r\n        <el-input v-model=\"form.email\" placeholder=\"请填写邮箱\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"个人简介：\" prop=\"intro\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          :rows=\"10\"\r\n          v-model=\"form.intro\"\r\n          placeholder=\"例：传智播客，目前已经成为拥有2000多名员工的教育集团；从成立最初的单一Java学科，到现在已包括JavaEE、Python+人工智能、前端与移动开发、UI/UE设计、大数据、Go语言与区块链等14门学科培训；从屈指可数的几间教室，发展成为分布于北京、上海、广州、深圳、武汉、郑州、西安、长沙、济南、重庆、南京、杭州、成都、石家庄、合肥、太原、厦门、沈阳等18所城市直营中心的规模。\"\r\n          maxlength=\"500\"\r\n          show-word-limit\r\n        ></el-input>\r\n      </el-form-item>\r\n      <!-- TODO: 等待后端提供开始时间、结束时间字段，并且支持多条记录 -->\r\n      <el-form-item label=\"教学工作经历：\" prop=\"workExperience\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          :rows=\"10\"\r\n          v-model=\"form.workExperience\"\r\n          placeholder=\"请填写教学工作经历\"\r\n          maxlength=\"500\"\r\n          show-word-limit\r\n        ></el-input>\r\n      </el-form-item>\r\n      <!-- TODO: 等待后端提供开始时间、结束时间字段，并且支持多条记录 -->\r\n      <el-form-item label=\"教学工作成果：\" prop=\"workResults\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          :rows=\"10\"\r\n          v-model=\"form.workResults\"\r\n          placeholder=\"教学工作成果\"\r\n          maxlength=\"500\"\r\n          show-word-limit\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"手机：\">\r\n        <common-entering-step2-phone-verifyCode :phoneForm.sync=\"form\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"承诺书：\" prop=\"promiseLetter\">\r\n        <common-entering-step2-upload-image :imageUrl.sync=\"form.promiseLetter\">\r\n          请填写完毕本页面的信息后，点击下载\r\n          <a href=\"/doc/承诺书模板.docx\" download>承诺书模板</a>，\r\n          <br />上传加盖公章的扫描件\r\n        </common-entering-step2-upload-image>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport { Form as ElForm } from 'element-ui'\r\nimport CommonEnteringStep2UploadImage from './common-entering-step2-upload-image.vue'\r\nimport CommonEnteringStep2MainCategory from './common-entering-step2-main-category.vue'\r\nimport CommonEnteringStep2PhoneVerifyCode from './common-entering-step2-phone-verifyCode.vue'\r\nimport { savePersonalOrg } from '@/api/teaching-personal-org'\r\nimport { ITeachingPersonalOrgDTO } from '@/entity/teaching-personal-org'\r\n\r\n@Component({\r\n  components: {\r\n    CommonEnteringStep2UploadImage,\r\n    CommonEnteringStep2MainCategory,\r\n    CommonEnteringStep2PhoneVerifyCode\r\n  }\r\n})\r\nexport default class PersonalEnteringStep2Submitform extends Vue {\r\n  private form: ITeachingPersonalOrgDTO = {\r\n    email: '',\r\n    idCard: '',\r\n    intro: '',\r\n    logo: '',\r\n    mainCategory: '',\r\n    name: '',\r\n    phone: '',\r\n    promiseLetter: '',\r\n    teacherCertImg: '',\r\n    verifyCode: '',\r\n    verifyKey: ''\r\n  }\r\n  private certIndex: string = '0'\r\n\r\n  // TODO: 资格证书和证书编号一一对应\r\n  // 资格证书\r\n  private validateCertImg = (rule: any, value: any, callback: any) => {\r\n    if (!value && !this.form.eduCertImg && !this.form.majorCertImg) {\r\n      callback(new Error('请至少提交一张教师资格证、高学历证、专业证书照片'))\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n  // 证书编号\r\n  private validateCertNo = (rule: any, value: any, callback: any) => {\r\n    if (!value && !this.form.eduCertNo && !this.form.majorCertNo) {\r\n      callback(new Error('请填写证书编号'))\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n  // 手机号正则，参考：http://caibaojian.com/phone-regexp.html\r\n  private validatePhone = (rule: any, value: any, callback: any) => {\r\n    if (!/^1[0-9]{10}$/.test(value)) {\r\n      callback(new Error('请输入正确的手机号'))\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n  // TODO: 增加rules校验\r\n  private rules: any = {\r\n    // 身份证明\r\n    name: [\r\n      {\r\n        required: true,\r\n        message: '真实姓名，需要与身份证一致',\r\n        trigger: 'change'\r\n      }\r\n    ],\r\n    idCard: [\r\n      {\r\n        required: true,\r\n        message: '请填写身份证号码',\r\n        trigger: 'change'\r\n      }\r\n    ],\r\n    teacherCertImg: [{ validator: this.validateCertImg, trigger: 'change' }],\r\n    teacherCertNo: [{ validator: this.validateCertNo, trigger: 'change' }],\r\n\r\n    // 个人信息\r\n    logo: [\r\n      {\r\n        required: true,\r\n        message: '请请上传居中清晰头像，不合规范会审核不通过（查看图例）',\r\n        trigger: 'change'\r\n      }\r\n    ],\r\n    mainCategory: [\r\n      {\r\n        required: true,\r\n        message: '请选择主营类目',\r\n        trigger: 'change'\r\n      }\r\n    ],\r\n    email: [\r\n      {\r\n        required: true,\r\n        message: '请填写邮箱',\r\n        trigger: 'change'\r\n      }\r\n    ],\r\n    intro: [\r\n      {\r\n        required: true,\r\n        message: '请填写个人简介',\r\n        trigger: 'change'\r\n      }\r\n    ],\r\n    workExperience: [\r\n      {\r\n        required: true,\r\n        message: '请填写教学工作经历',\r\n        trigger: 'change'\r\n      }\r\n    ],\r\n    workResults: [\r\n      {\r\n        required: true,\r\n        message: '请填写教学工作成果',\r\n        trigger: 'change'\r\n      }\r\n    ],\r\n    phone: [\r\n      { required: true, message: '请填写手机号码', trigger: 'change' },\r\n      { validator: this.validatePhone, trigger: 'change' }\r\n    ],\r\n    verifyCode: [\r\n      { required: true, message: '请填写验证码', trigger: 'change' }\r\n    ],\r\n    promiseLetter: [\r\n      {\r\n        required: true,\r\n        message:\r\n          '请填写完毕本页面的信息后，点击下载承诺书模板，上传加盖公章的扫描件',\r\n        trigger: 'change'\r\n      }\r\n    ]\r\n  }\r\n\r\n  /**\r\n   * 提交资料\r\n   */\r\n  public async savePersonalOrg(): Promise<boolean> {\r\n    // TODO: 这种嵌套方式不好，不优雅\r\n    return new Promise((resolve, reject) => {\r\n      let form1 = this.$refs['form1'] as ElForm\r\n      form1.validate((valid: boolean) => {\r\n        if (!valid) {\r\n          reject()\r\n          return\r\n        }\r\n\r\n        let form2 = this.$refs['form2'] as ElForm\r\n        form2.validate(async (valid: boolean) => {\r\n          if (!valid) {\r\n            reject()\r\n            return\r\n          }\r\n\r\n          await savePersonalOrg(this.form)\r\n          resolve()\r\n        })\r\n      })\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.step-body {\r\n  .title {\r\n    font-size: 24px;\r\n  }\r\n\r\n  .form {\r\n    width: 700px;\r\n    padding-top: 40px;\r\n\r\n    .el-upload__tip {\r\n      line-height: 20px;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}