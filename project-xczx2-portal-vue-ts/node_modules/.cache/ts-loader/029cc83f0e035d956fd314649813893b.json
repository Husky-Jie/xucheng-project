{"remainingRequest":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-entering\\pages\\entering\\components\\common-entering-step2-upload-image.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-entering\\pages\\entering\\components\\common-entering-step2-upload-image.vue","mtime":1661430573808},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkU6XFxjb3Vyc2VcXDIwMjJcXFx1NUI2Nlx1NjIxMFx1NTcyOFx1N0VCRlxcZnJvbnRfY29kZVxccHJvamVjdC14Y3p4Mi1wb3J0YWwtdnVlLXRzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJFOlxcY291cnNlXFwyMDIyXFxcdTVCNjZcdTYyMTBcdTU3MjhcdTdFQkZcXGZyb250X2NvZGVcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJFOlxcY291cnNlXFwyMDIyXFxcdTVCNjZcdTYyMTBcdTU3MjhcdTdFQkZcXGZyb250X2NvZGVcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJFOlxcY291cnNlXFwyMDIyXFxcdTVCNjZcdTYyMTBcdTU3MjhcdTdFQkZcXGZyb250X2NvZGVcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRTpcXGNvdXJzZVxcMjAyMlxcXHU1QjY2XHU2MjEwXHU1NzI4XHU3RUJGXFxmcm9udF9jb2RlXFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUsIFByb3BTeW5jLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOwppbXBvcnQgKiBhcyBxaW5pdSBmcm9tICdxaW5pdS1qcyc7CmltcG9ydCB7IGdldFFuUGFyYW1zIH0gZnJvbSAnQC9hcGkvY29tbW9uJzsKCnZhciBDb21tb25FbnRlcmluZ1N0ZXAyVXBsb2FkSW1hZ2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfVnVlKSB7CiAgX2luaGVyaXRzKENvbW1vbkVudGVyaW5nU3RlcDJVcGxvYWRJbWFnZSwgX1Z1ZSk7CgogIGZ1bmN0aW9uIENvbW1vbkVudGVyaW5nU3RlcDJVcGxvYWRJbWFnZSgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29tbW9uRW50ZXJpbmdTdGVwMlVwbG9hZEltYWdlKTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihDb21tb25FbnRlcmluZ1N0ZXAyVXBsb2FkSW1hZ2UpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgX3RoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgX3RoaXMuZmlsZUxpc3QgPSBbXTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhDb21tb25FbnRlcmluZ1N0ZXAyVXBsb2FkSW1hZ2UsIFt7CiAgICBrZXk6ICJvbkltYWdlVXJsQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25JbWFnZVVybENoYW5nZWQobmV3SW1hZ2VVcmwsIG9sZEltYWdlVXJsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLW9uSW1hZ2VVcmxDaGFuZ2Vk5YmNLS0tLS0tLS0tLS0tLS0nKQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZpbGVMaXN0KQogICAgICBpZiAobmV3SW1hZ2VVcmwpIHsKICAgICAgICB0aGlzLmZpbGVMaXN0ID0gW3sKICAgICAgICAgIHVybDogbmV3SW1hZ2VVcmwKICAgICAgICB9XTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZpbGVMaXN0ID0gW107CiAgICAgIH0gLy/op6PlhrPlm57pgIDliLDkuIrkuIDpobXot6/lvoTliY3nvIDmtojlpLHpl67popgKICAgICAgLy8gaWYodGhpcy5zeW5jZWRJbWFnZVVybC5sZW5ndGg+MCAmJiB0aGlzLnN5bmNlZEltYWdlVXJsLmluZGV4T2YoYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9TRVJWRVJfUElDU0VSVkVSX1VSTH1gKTwwKXsKICAgICAgLy8gICB0aGlzLnN5bmNlZEltYWdlVXJsID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9TRVJWRVJfUElDU0VSVkVSX1VSTH1gK3RoaXMuc3luY2VkSW1hZ2VVcmw7CiAgICAgIC8vICAgYWxlcnQodGhpcy5zeW5jZWRJbWFnZVVybCkKICAgICAgLy8gfQogICAgICAvLyBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS1vbkltYWdlVXJsQ2hhbmdlZOWQji0tLS0tLS0tLS0tLS0tJykKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5maWxlTGlzdCkKCiAgICB9IC8vIGNvbXB1dGVkCgogIH0sIHsKICAgIGtleTogImhhbmRsZUJlZm9yZVVwbG9hZCIsCgogICAgLyoqDQogICAgICog5LiK5Lyg5paH5Lu25LmL5YmN55qE6ZKp5a2QDQogICAgICogVE9ETzog5aKe5Yqg5YW25LuW5paH5Lu25qC85byPDQogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZycgfHwgZmlsZS50eXBlID09PSAnaW1hZ2UvcG5nJyB8fCBmaWxlLnR5cGUgPT09ICdpbWFnZS9ibXAnOwogICAgICB2YXIgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwoKICAgICAgaWYgKCFpc0pQRykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWktOWDj+WbvueJh+WPquiDveaYryBKUEcvUE5HL0JNUCDmoLzlvI8hJyk7CiAgICAgIH0KCiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsKICAgIH0KICAgIC8qKg0KICAgICAqIOS4iuS8oOaIkOWKn+mSqeWtkA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVVcGxvYWRTdWNjZXNzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICB0aGlzLnN5bmNlZEltYWdlVXJsID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfU0VSVkVSX1BJQ1NFUlZFUl9VUkwpICsgcmVzLmZpbGVuYW1lOwogICAgICBjb25zb2xlLmxvZyhyZXMubXNnICsgcmVzLmZpbGVuYW1lKTsKCiAgICAgIGlmIChyZXMuY29kZSA9PSAxKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICog5paH5Lu25LiK5Lyg5aSx6LSl6ZKp5a2QDQogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZVVwbG9hZEVycm9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRFcnJvcihlcnIpIHsKICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOWksei0pTonICsgZXJyKTsKICAgIH0KICAgIC8qKg0KICAgICAqIOimhueblum7mOiupOeahOS4iuS8oOihjOS4ug0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVIdHRwUmVxdWVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSHR0cFJlcXVlc3Qob3B0aW9ucykgewogICAgICB2YXIgZmlsZSA9IG9wdGlvbnMuZmlsZTsKICAgICAgdmFyIGZpbGVuYW1lID0gZmlsZS5uYW1lOwogICAgICB2YXIgaW5kZXggPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpOwogICAgICB2YXIgc3VmZml4ID0gZmlsZW5hbWUuc3Vic3RyKGluZGV4KTsgLy8g5paH5qGj5LiK5Lyg5Yiw5LiD54mb5LqRCgogICAgICB0aGlzLnFpbml1eXVuVXBsb2FkKGZpbGUpOwogICAgfQogICAgLyoqDQogICAgICog5paH5qGj5LiK5Lyg5Yiw5LiD54mb5LqRDQogICAgICogVE9ETzog5byC5bi457O76ICD6JmRIDQwMQ0KICAgICAqIFRPRE86IOWQjuerr+aPkOS+m+WFrOW8gOi1hOa6kOaOpeWPow0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJxaW5pdXl1blVwbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcWluaXV5dW5VcGxvYWQoZmlsZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBxblBhcmFtcywgdG9rZW4sIGNvbmZpZywgcHV0RXh0cmEsIGtleSwgbmV4dCwgZXJyb3IsIGNvbXBsZXRlLCBzdWJzY3JpcHRpb24sIG9ic2VydmFibGU7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcWluaXV5dW5VcGxvYWQkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoZ2V0UW5QYXJhbXMoKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcW5QYXJhbXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIC8vIOW8gOWni+S4iuS8oAogICAgICAgICAgICAgIHRva2VuID0gcW5QYXJhbXMucW5Ub2tlbjsKICAgICAgICAgICAgICBjb25maWcgPSB7CiAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsCiAgICAgICAgICAgICAgICByZWdpb246IG51bGwgLy8g6Ieq5Yqo5YiG5p6Q5LiK5Lyg5Z+f5ZCN5Yy65Z+fCgogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcHV0RXh0cmEgPSB7CiAgICAgICAgICAgICAgICBmbmFtZTogJycsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LAogICAgICAgICAgICAgICAgbWltZVR5cGU6IG51bGwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGtleSA9IHFuUGFyYW1zLmtleTsKCiAgICAgICAgICAgICAgbmV4dCA9IGZ1bmN0aW9uIG5leHQocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHZhciB0b3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSBNYXRoLmNlaWwodG90YWwucGVyY2VudCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiXHU1QTkyXHU4RDQ0XHU0RTBBXHU0RjIwXHU1MjMwXHU0RTAzXHU3MjVCXHU0RTkxXHU4RkRCXHU1RUE2Li4uIi5jb25jYXQocGVyY2VudGFnZSwgIiUiKSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihyZXNwb25zZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+Wqkui1hOS4iuS8oOWIsOS4g+eJm+S6keWksei0pS4uLicpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzMi5zeW5jZWRJbWFnZVVybCA9ICJodHRwOi8vIi5jb25jYXQocW5QYXJhbXMuZG9tYWluLCAiLyIpLmNvbmNhdChxblBhcmFtcy5rZXkpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+Wqkui1hOS4iuS8oOWIsOS4g+eJm+S6keWujOaIkC4uLicpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIC8vIOiwg+eUqHNka+S4iuS8oOaOpeWPo+iOt+W+l+ebuOW6lOeahG9ic2VydmFibGXvvIzmjqfliLbkuIrkvKDlkozmmoLlgZwKICAgICAgICAgICAgICBvYnNlcnZhYmxlID0gcWluaXUudXBsb2FkKGZpbGUsIGtleSwgdG9rZW4sIHB1dEV4dHJhLCBjb25maWcpOwogICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+Wqkui1hOS4iuS8oOWIsOS4g+eJm+S6keW8gOWniy4uLicpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDngrnlh7vmlofku7bliJfooajkuK3lt7LkuIrkvKDnmoTmlofku7bml7bnmoTpkqnlrZANCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaGFuZGxlT25QcmV2aWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVPblByZXZpZXcoZmlsZSkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfQogICAgLyoqDQogICAgICog5paH5Lu25YiX6KGo56e76Zmk5paH5Lu25pe255qE6ZKp5a2QDQogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZU9uUmVtb3ZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVPblJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLnN5bmNlZEltYWdlVXJsID0gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBsb2FkRGlzYWJsZWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmZpbGVMaXN0Lmxlbmd0aCA+IDA7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQ29tbW9uRW50ZXJpbmdTdGVwMlVwbG9hZEltYWdlOwp9KFZ1ZSk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3BTeW5jKCdpbWFnZVVybCcsIHsKICB0eXBlOiBTdHJpbmcsCiAgcmVxdWlyZWQ6IGZhbHNlLAogIGRlZmF1bHQ6ICcnCn0pXSwgQ29tbW9uRW50ZXJpbmdTdGVwMlVwbG9hZEltYWdlLnByb3RvdHlwZSwgInN5bmNlZEltYWdlVXJsIiwgdm9pZCAwKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbV2F0Y2goJ3N5bmNlZEltYWdlVXJsJyldLCBDb21tb25FbnRlcmluZ1N0ZXAyVXBsb2FkSW1hZ2UucHJvdG90eXBlLCAib25JbWFnZVVybENoYW5nZWQiLCBudWxsKTsKCkNvbW1vbkVudGVyaW5nU3RlcDJVcGxvYWRJbWFnZSA9IHRzbGliXzEuX19kZWNvcmF0ZShbQ29tcG9uZW50XSwgQ29tbW9uRW50ZXJpbmdTdGVwMlVwbG9hZEltYWdlKTsKZXhwb3J0IGRlZmF1bHQgQ29tbW9uRW50ZXJpbmdTdGVwMlVwbG9hZEltYWdlOw=="},{"version":3,"sources":["E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-entering\\pages\\entering\\components\\common-entering-step2-upload-image.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, PropSync, Watch } from 'vue-property-decorator'\r\nimport {\r\n  ElUploadInternalRawFile,\r\n  ElUploadInternalFileDetail,\r\n  HttpRequestOptions\r\n} from 'element-ui/types/upload'\r\nimport * as qiniu from 'qiniu-js'\r\nimport { IQnParamsDTO } from '@/entity/media-page-list'\r\nimport { getQnParams } from '@/api/common'\r\n\r\n@Component\r\nexport default class CommonEnteringStep2UploadImage extends Vue {\r\n  private dialogVisible: boolean = false\r\n\r\n  @PropSync('imageUrl', { type: String, required: false, default: '' })\r\n  syncedImageUrl!: string\r\n\r\n  @Watch('syncedImageUrl')\r\n  onImageUrlChanged(newImageUrl: string, oldImageUrl: string) {\r\n    // console.log('--------------onImageUrlChanged前--------------')\r\n    // console.log(this.fileList)\r\n    if (newImageUrl) {\r\n      this.fileList = [{ url: newImageUrl }]\r\n    } else {\r\n      this.fileList = []\r\n    }\r\n    //解决回退到上一页路径前缀消失问题\r\n    // if(this.syncedImageUrl.length>0 && this.syncedImageUrl.indexOf(`${process.env.VUE_APP_SERVER_PICSERVER_URL}`)<0){\r\n      \r\n    //   this.syncedImageUrl = `${process.env.VUE_APP_SERVER_PICSERVER_URL}`+this.syncedImageUrl;\r\n    //   alert(this.syncedImageUrl)\r\n    // }\r\n    // console.log('--------------onImageUrlChanged后--------------')\r\n    // console.log(this.fileList)\r\n  }\r\n\r\n  private fileList: any[] = []\r\n\r\n  // computed\r\n  get uploadDisabled() {\r\n    return this.fileList.length > 0\r\n  }\r\n\r\n  /**\r\n   * 上传文件之前的钩子\r\n   * TODO: 增加其他文件格式\r\n   */\r\n  private handleBeforeUpload(file: ElUploadInternalRawFile) {\r\n    const isJPG =\r\n      file.type === 'image/jpeg' ||\r\n      file.type === 'image/png' ||\r\n      file.type === 'image/bmp'\r\n    const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n    if (!isJPG) {\r\n      this.$message.error('上传头像图片只能是 JPG/PNG/BMP 格式!')\r\n    }\r\n    if (!isLt2M) {\r\n      this.$message.error('上传头像图片大小不能超过 2MB!')\r\n    }\r\n    return isJPG && isLt2M\r\n  }\r\n  /**\r\n   * 上传成功钩子\r\n   */\r\n  private handleUploadSuccess(res,file){\r\n      this.syncedImageUrl = `${process.env.VUE_APP_SERVER_PICSERVER_URL}`+res.filename\r\n      console.log(res.msg+res.filename)\r\n      if(res.code==1){\r\n        this.$message.error(res.msg)\r\n      }\r\n  }\r\n  /**\r\n   * 文件上传失败钩子\r\n   */\r\n\r\n  private handleUploadError(err){\r\n    console.log('上传失败:'+err)\r\n  }\r\n  /**\r\n   * 覆盖默认的上传行为\r\n   */\r\n  private handleHttpRequest(options: HttpRequestOptions) {\r\n    let file = options.file\r\n    let filename = file.name\r\n    let index = filename.lastIndexOf('.')\r\n    let suffix = filename.substr(index)\r\n\r\n    // 文档上传到七牛云\r\n    this.qiniuyunUpload(file)\r\n  }\r\n\r\n  /**\r\n   * 文档上传到七牛云\r\n   * TODO: 异常系考虑 401\r\n   * TODO: 后端提供公开资源接口\r\n   */\r\n  private async qiniuyunUpload(file: ElUploadInternalFileDetail) {\r\n    // 准备工作\r\n    let qnParams: IQnParamsDTO = await getQnParams()\r\n\r\n    // 开始上传\r\n    let token = qnParams.qnToken\r\n    let config = {\r\n      useCdnDomain: true,\r\n      region: null // 自动分析上传域名区域\r\n    }\r\n    let putExtra = {\r\n      fname: '',\r\n      params: {},\r\n      mimeType: null\r\n    }\r\n    let key = qnParams.key\r\n\r\n    let next = response => {\r\n      let total = response.total\r\n      let percentage = Math.ceil(total.percent)\r\n      console.log(`媒资上传到七牛云进度...${percentage}%`)\r\n      console.log(response)\r\n    }\r\n    let error = response => {\r\n      console.log('媒资上传到七牛云失败...')\r\n      console.log(response)\r\n    }\r\n    let complete = response => {\r\n      this.syncedImageUrl = `http://${qnParams.domain}/${qnParams.key}`\r\n      console.log('媒资上传到七牛云完成...')\r\n      console.log(response)\r\n    }\r\n\r\n    let subscription\r\n    // 调用sdk上传接口获得相应的observable，控制上传和暂停\r\n    let observable = qiniu.upload(file, key, token, putExtra, config)\r\n    observable.subscribe(next, error, complete)\r\n    console.log('媒资上传到七牛云开始...')\r\n  }\r\n\r\n  /**\r\n   * 点击文件列表中已上传的文件时的钩子\r\n   */\r\n  private handleOnPreview(file: ElUploadInternalFileDetail) {\r\n    this.dialogVisible = true\r\n  }\r\n\r\n  /**\r\n   * 文件列表移除文件时的钩子\r\n   */\r\n  private handleOnRemove(\r\n    file: ElUploadInternalFileDetail,\r\n    fileList: ElUploadInternalFileDetail[]\r\n  ) {\r\n    this.syncedImageUrl = ''\r\n  }\r\n}\r\n"],"sourceRoot":""}]}