{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\teaching-company\\company.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\teaching-company\\company.vue","mtime":1578755244377},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBXYXRjaCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCB7IG1peGlucyB9IGZyb20gJ3Z1ZS1jbGFzcy1jb21wb25lbnQnDQppbXBvcnQgeyBJS1ZEYXRhIH0gZnJvbSAnQC9hcGkvdHlwZXMnIC8vIOmAmueUqCBpbnRlcmZhY2UNCmltcG9ydCB7IGdldENvbXBhbnksIHVwZGF0ZUNvbXBhbnkgfSBmcm9tICdAL2FwaS90ZWFjaGluZy1jb21wYW55JyAvLyBhcGkgaW50ZXJmYWNlIOivvueoiw0KaW1wb3J0IHsgSVRlYWNoaW5nQ29tcGFueSB9IGZyb20gJ0AvZW50aXR5L3RlYWNoaW5nLWNvbXBhbnknDQppbXBvcnQgeyBJQ291cnNlQ2F0ZWdvcnkgfSBmcm9tICdAL2VudGl0eS9jb3Vyc2UtYWRkLWJhc2UnDQppbXBvcnQgTWl4aW5Ub29scyBmcm9tICdAL3V0aWxzL21peGlucy52dWUnDQppbXBvcnQgeyBGb3JtIGFzIEVsRm9ybSB9IGZyb20gJ2VsZW1lbnQtdWknDQoNCkBDb21wb25lbnQoew0KICBuYW1lOiAnQ29tcGFueUluZm8nLA0KICBjb21wb25lbnRzOiB7fQ0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgbWl4aW5zKE1peGluVG9vbHMpIHsNCiAgcHJpdmF0ZSBpc0VkaXQ6IGJvb2xlYW4gPSBmYWxzZQ0KICBwcml2YXRlIGxvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZQ0KICBwcml2YXRlIGNvbXBhbnlEYXRhITogSVRlYWNoaW5nQ29tcGFueQ0KICBwcml2YXRlIGNhdGVnb3J5VHJlZURhdGE6IElDb3Vyc2VDYXRlZ29yeVtdID0gW10NCiAgcHJpdmF0ZSBkZWZhdWx0UHJvcHMgPSB7DQogICAgY2hpbGRyZW46ICdjaGlsZHJlblRyZWVOb2RlcycsDQogICAgdmFsdWU6ICdpZCcsDQogICAgbGFiZWw6ICdsYWJlbCcNCiAgfQ0KDQogIGNvbnN0cnVjdG9yKHByb3BzKSB7DQogICAgc3VwZXIocHJvcHMpDQogICAgLy8gdGhpcy5jb21wYW55RGF0YSA9IHsNCiAgICAvLyAgIG5hbWU6ICcnLA0KICAgIC8vICAgYWRkcmVzczogJycsDQogICAgLy8gICBwaG9uZTogJycsDQogICAgLy8gICBlbWFpbDogJycsDQogICAgLy8gICBicmllZkludHJvOiAnJywNCiAgICAvLyAgIG1haW5DYXRlZ29yeTogJycNCiAgICAvLyB9DQogICAgLy8gVE9ETzog5rWL6K+V5q2k5Yqf6IO9DQogICAgdGhpcy5jb21wYW55RGF0YSA9IHsNCiAgICAgIGFkZHJlc3M6ICcnLA0KICAgICAgbmFtZTogJycsDQogICAgICBwaG9uZTogJycsDQogICAgICB0aXRsZTogJycsDQogICAgICB2ZXJpZnlDb2RlOiAnJywNCiAgICAgIHZlcmlmeUtleTogJycNCiAgICB9DQogIH0NCg0KICBwcml2YXRlIHJ1bGVzID0gew0KICAgIG5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH1dDQogIH0NCg0KICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgLy8vIOS4muWKoQ0KDQogIHByaXZhdGUgYXN5bmMgZ2V0RGF0ZSgpIHsNCiAgICB0aGlzLmNvbXBhbnlEYXRhID0gYXdhaXQgZ2V0Q29tcGFueSgpDQogIH0NCg0KICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgLy8vIOeUn+WRveWRqOacnw0KDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXREYXRlKCkNCiAgfQ0KDQogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAvLy8g5LqL5Lu2DQoNCiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTYXZlKCkgew0KICAgIGxldCBmb3JtOiBFbEZvcm0gPSB0aGlzLiRyZWZzWydmb3JtJ10gYXMgRWxGb3JtDQogICAgZm9ybS52YWxpZGF0ZShhc3luYyAodmFsaWQ6IGJvb2xlYW4pID0+IHsNCiAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICAgIGF3YWl0IHVwZGF0ZUNvbXBhbnkodGhpcy5jb21wYW55RGF0YSkNCiAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgn5re75Yqg5oiQ5YqfJykNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlDQogICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgfSwgMC41ICogMTAwMCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0pDQogIH0NCg0KICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCn0NCg=="},{"version":3,"sources":["company.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"company.vue","sourceRoot":"src/module-organization/pages/teaching-company","sourcesContent":["<template>\r\n  <div class=\"workspace\">\r\n    <div class=\"banner\">\r\n      <span class=\"primary-title\">机构资料</span>\r\n      <span class=\"btn-edit\" v-if=\"isEdit===false\">\r\n        <el-button type=\"text\" size=\"mini\" @click=\"isEdit=true\" icon=\"el-icon-edit\">修改</el-button>\r\n      </span>\r\n      <el-button\r\n        v-if=\"isEdit\"\r\n        type=\"primary\"\r\n        size=\"medium\"\r\n        class=\"btn-add el-button\"\r\n        @click=\"handleSave\"\r\n        :loading=\"loading\"\r\n      >保存</el-button>\r\n    </div>\r\n\r\n    <!-- 表单 -->\r\n    <div class=\"form\">\r\n      <el-form\r\n        ref=\"form\"\r\n        v-if=\"companyData\"\r\n        :model=\"companyData\"\r\n        :rules=\"rules\"\r\n        label-width=\"120px\"\r\n      >\r\n        <el-form-item label=\"机构名称：\" prop=\"name\">\r\n          <el-input v-model=\"companyData.name\" :disabled=\"!isEdit\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"机构所在地区：\" prop=\"address\">\r\n          <el-input v-model=\"companyData.address\" :disabled=\"!isEdit\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"机构联系方式：\" prop=\"phone\">\r\n          <el-input v-model=\"companyData.phone\" :disabled=\"!isEdit\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"机构邮箱：\" prop=\"email\">\r\n          <el-input v-model=\"companyData.email\" :disabled=\"!isEdit\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"机构简介：\" prop=\"briefIntro\">\r\n          <el-input v-model=\"companyData.briefIntro\" :disabled=\"!isEdit\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"课程类目：\" prop=\"mainCategory\">\r\n          <el-input v-model=\"companyData.mainCategory\" :disabled=\"!isEdit\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <!-- end -->\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Watch, Vue } from 'vue-property-decorator'\r\nimport { mixins } from 'vue-class-component'\r\nimport { IKVData } from '@/api/types' // 通用 interface\r\nimport { getCompany, updateCompany } from '@/api/teaching-company' // api interface 课程\r\nimport { ITeachingCompany } from '@/entity/teaching-company'\r\nimport { ICourseCategory } from '@/entity/course-add-base'\r\nimport MixinTools from '@/utils/mixins.vue'\r\nimport { Form as ElForm } from 'element-ui'\r\n\r\n@Component({\r\n  name: 'CompanyInfo',\r\n  components: {}\r\n})\r\nexport default class extends mixins(MixinTools) {\r\n  private isEdit: boolean = false\r\n  private loading: boolean = false\r\n  private companyData!: ITeachingCompany\r\n  private categoryTreeData: ICourseCategory[] = []\r\n  private defaultProps = {\r\n    children: 'childrenTreeNodes',\r\n    value: 'id',\r\n    label: 'label'\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    // this.companyData = {\r\n    //   name: '',\r\n    //   address: '',\r\n    //   phone: '',\r\n    //   email: '',\r\n    //   briefIntro: '',\r\n    //   mainCategory: ''\r\n    // }\r\n    // TODO: 测试此功能\r\n    this.companyData = {\r\n      address: '',\r\n      name: '',\r\n      phone: '',\r\n      title: '',\r\n      verifyCode: '',\r\n      verifyKey: ''\r\n    }\r\n  }\r\n\r\n  private rules = {\r\n    name: [{ required: true, message: '请输入名称', trigger: 'blur' }]\r\n  }\r\n\r\n  ///////////////////////////\r\n  /// 业务\r\n\r\n  private async getDate() {\r\n    this.companyData = await getCompany()\r\n  }\r\n\r\n  ///////////////////////////\r\n  /// 生命周期\r\n\r\n  created() {\r\n    this.getDate()\r\n  }\r\n\r\n  ///////////////////////////\r\n  /// 事件\r\n\r\n  private async handleSave() {\r\n    let form: ElForm = this.$refs['form'] as ElForm\r\n    form.validate(async (valid: boolean) => {\r\n      if (valid) {\r\n        this.loading = true\r\n        await updateCompany(this.companyData)\r\n        this.showMessage('添加成功')\r\n        setTimeout(() => {\r\n          this.loading = false\r\n          this.isEdit = false\r\n          return true\r\n        }, 0.5 * 1000)\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  ///////////////////////////\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.workspace {\r\n  .banner {\r\n    .btn-add {\r\n      float: right;\r\n    }\r\n    .btn-edit {\r\n      padding-left: 10px;\r\n    }\r\n  }\r\n  .form {\r\n    padding-top: 20px;\r\n    width: 600px;\r\n    margin: 0px auto;\r\n  }\r\n}\r\n</style>\r\n"]}]}