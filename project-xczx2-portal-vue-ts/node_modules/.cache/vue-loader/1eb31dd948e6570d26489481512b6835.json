{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\work-record-manage\\work-record-overall.vue?vue&type=style&index=0&id=d0bef43c&lang=scss&scoped=true&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\work-record-manage\\work-record-overall.vue","mtime":1584973675727},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\css-loader\\dist\\cjs.js","mtime":1660903053592},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1660903053930},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\postcss-loader\\src\\index.js","mtime":1576202027988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1660903055666},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jb3Vyc2UtbGlzdCB7DQogIC5uYXYtYmFyIHsNCiAgICBtYXJnaW4tdG9wOiAxNnB4Ow0KICB9DQoNCiAgLndvcmtzcGFjZSAuYmFubmVyIC5idG4tYWRkIHsNCiAgICBmbG9hdDogcmlnaHQ7DQogIH0NCg0KICAuc2VhcmNoZXIgew0KICAgIG1hcmdpbi10b3A6IDE2cHg7DQoNCiAgICBkaXYgew0KICAgICAgd2lkdGg6IDIxOHB4Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgIH0NCiAgfQ0KDQogIC5kYXRhTGlzdCB7DQogICAgbWFyZ2luLXRvcDogMTZweDsNCiAgfQ0KDQogIC5kYXRhTGlzdC1wYWdpbmF0aW9uIHsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgd2lkdGg6IDEwMCU7DQogIH0NCn0NCg=="},{"version":3,"sources":["work-record-overall.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoLA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"work-record-overall.vue","sourceRoot":"src/module-organization/pages/work-record-manage","sourcesContent":["<template>\r\n  <div class=\"course-list portal-content\">\r\n    <div class=\"workspace\">\r\n      <el-page-header @back=\"goToWorkRecordListView\" content=\"批阅详情\"></el-page-header>\r\n\r\n      <!-- TODO: 样式调整 -->\r\n      <!-- <div class=\"banner\">\r\n        <span class=\"primary-title\">批阅详情</span>\r\n      </div>-->\r\n\r\n      <el-row>\r\n        <el-col :span=\"8\">课程名称：{{ workRecOverall.courseName }}</el-col>\r\n        <el-col :span=\"8\">课程包含作业数：{{ workRecOverall.workNumber }}</el-col>\r\n      </el-row>\r\n\r\n      <el-row>\r\n        <el-col :span=\"8\">课程总人数：{{ workRecOverall.learnerNumber }}</el-col>\r\n        <el-col :span=\"8\">提交作业人数：{{ workRecOverall.committerNumber }}</el-col>\r\n        <el-col\r\n          :span=\"8\"\r\n        >作业总数/待批阅数：{{ workRecOverall.answerNumber }} / {{ workRecOverall.tobeReviewed }}</el-col>\r\n      </el-row>\r\n\r\n      <!-- 数据列表-->\r\n      <el-tabs v-model=\"recGroupIndex\" @tab-click=\"handleClickRecGroupTap\">\r\n        <el-tab-pane\r\n          v-for=\"(item, index) in workRecOverall.recGroupDTOList\"\r\n          :key=\"index\"\r\n          :label=\"item.teachplanName\"\r\n          :name=\"index.toString()\"\r\n        >\r\n          <el-table\r\n            class=\"dataList\"\r\n            :data=\"workRecordList\"\r\n            border\r\n            style=\"width: 100%\"\r\n            :header-cell-style=\"{ textAlign: 'center' }\"\r\n          >\r\n            <el-table-column prop=\"username\" label=\"用户名\" align=\"center\"></el-table-column>\r\n\r\n            <el-table-column label=\"提交时间\" align=\"center\">\r\n              <template slot-scope=\"scope\">{{ scope.row.createDate | dateTimeFormat }}</template>\r\n            </el-table-column>\r\n\r\n            <el-table-column prop=\"correctComment\" label=\"评语\" align=\"center\"></el-table-column>\r\n\r\n            <el-table-column label=\"状态\" align=\"center\">\r\n              <template slot-scope=\"scope\">{{ getCourseWorkStatus(scope.row.status) }}</template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"操作\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  type=\"text\"\r\n                  size=\"mini\"\r\n                  :disabled=\"scope.row.status !== '306002'\"\r\n                  @click=\"handleOpenWorkRecordDialog(scope.row)\"\r\n                >批阅</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </div>\r\n\r\n    <!-- 上传资料对话框 -->\r\n    <work-record-correction-dialog\r\n      :dialogVisible.sync=\"dialogVisible\"\r\n      :question=\"question\"\r\n      :answer=\"answer\"\r\n      :workRecord=\"workRecord\"\r\n      @refreshList=\"getWorkRecordReadOverAll\"\r\n    ></work-record-correction-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Watch } from 'vue-property-decorator'\r\nimport Pagination from '@/components/pagination/index.vue'\r\nimport WorkRecordCorrectionDialog from './components/work-record-correction-dialog.vue'\r\nimport { IKVData } from '@/api/types'\r\nimport { COURSE_WORK_STATUS } from '@/api/constants'\r\nimport {\r\n  IWorkRecOverallDTO,\r\n  IWorkRecGroupDTO,\r\n  IWorkRecordDTO\r\n} from '@/entity/work-record-page-list'\r\nimport { getWorkRecordReadOverAll, defaultWorkRecord } from '@/api/work-record'\r\n\r\n@Component({\r\n  components: {\r\n    Pagination,\r\n    WorkRecordCorrectionDialog\r\n  }\r\n})\r\nexport default class WorkRecordOverall extends Vue {\r\n  // 批阅状态列表\r\n  private courseWorkStatus: IKVData[] = COURSE_WORK_STATUS\r\n  // 课程作业提交Id\r\n  private courseWorkId: number = 0\r\n  // 作业批阅详情\r\n  private workRecOverall: IWorkRecOverallDTO = {}\r\n  // 课程计划索引\r\n  private recGroupIndex: string = '0'\r\n  // 作业提交记录\r\n  private workRecordList: IWorkRecordDTO[] | undefined = []\r\n  // 作业批阅对话框\r\n  private dialogVisible: boolean = false\r\n  // 单条作业\r\n  private workRecord: IWorkRecordDTO = Object.assign({}, defaultWorkRecord)\r\n  // 题目\r\n  private question: string | undefined = ''\r\n  // 学生作业详情\r\n  private answer: string | undefined = ''\r\n\r\n  // 计算属性\r\n  getCourseWorkStatus(status: string) {\r\n    let item = this.courseWorkStatus.find((value: IKVData) => {\r\n      return status == value.code\r\n    })\r\n    return !item ? '' : item.desc\r\n  }\r\n\r\n  /**\r\n   * 生命周期钩子\r\n   */\r\n  created() {\r\n    let courseWorkId: any = this.$route.query.courseWorkId\r\n    this.courseWorkId = parseInt(courseWorkId)\r\n    this.getWorkRecordReadOverAll()\r\n  }\r\n\r\n  /**\r\n   * 作业批阅详情\r\n   */\r\n  private async getWorkRecordReadOverAll() {\r\n    this.workRecOverall = await getWorkRecordReadOverAll(this.courseWorkId)\r\n    if (this.workRecOverall.recGroupDTOList) {\r\n      this.workRecordList = this.workRecOverall.recGroupDTOList[0].workRecordList\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 跳转到作业批改页面\r\n   */\r\n  private goToWorkRecordListView() {\r\n    this.$router.go(-1)\r\n  }\r\n\r\n  /**\r\n   * 点击Tap切换课程计划\r\n   */\r\n  private handleClickRecGroupTap(tab: any, event: any) {\r\n    let index: number = parseInt(this.recGroupIndex)\r\n    if (this.workRecOverall.recGroupDTOList) {\r\n      this.workRecordList = this.workRecOverall.recGroupDTOList[\r\n        index\r\n      ].workRecordList\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 打开作业批阅对话框\r\n   */\r\n  private handleOpenWorkRecordDialog(row: IWorkRecordDTO) {\r\n    this.question = row.question\r\n    this.answer = row.answer\r\n\r\n    this.workRecord.coursePubId = row.coursePubId\r\n    this.workRecord.teachplanId = row.teachplanId\r\n    this.workRecord.teachplanName = row.teachplanName\r\n    this.workRecord.workId = row.workId\r\n    this.workRecord.workRecordId = row.workRecordId\r\n\r\n    this.dialogVisible = true\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.course-list {\r\n  .nav-bar {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .workspace .banner .btn-add {\r\n    float: right;\r\n  }\r\n\r\n  .searcher {\r\n    margin-top: 16px;\r\n\r\n    div {\r\n      width: 218px;\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n\r\n  .dataList {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .dataList-pagination {\r\n    text-align: center;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n"]}]}