{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\store\\modules\\user.ts","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\store\\modules\\user.ts","mtime":1586849107738},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js","mtime":1577501200723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOlxcaXRjYXN0MjAyMlxceGNfZWR1My4wXFxjb2RlXzE0OF9iYWNrdXBcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDpcXGl0Y2FzdDIwMjJcXHhjX2VkdTMuMFxcY29kZV8xNDhfYmFja3VwXFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiRDpcXGl0Y2FzdDIwMjJcXHhjX2VkdTMuMFxcY29kZV8xNDhfYmFja3VwXFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiRDpcXGl0Y2FzdDIwMjJcXHhjX2VkdTMuMFxcY29kZV8xNDhfYmFja3VwXFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkQ6XFxpdGNhc3QyMDIyXFx4Y19lZHUzLjBcXGNvZGVfMTQ4X2JhY2t1cFxccHJvamVjdC14Y3p4Mi1wb3J0YWwtdnVlLXRzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IFZ1ZXhNb2R1bGUsIE1vZHVsZSwgQWN0aW9uLCBNdXRhdGlvbiwgZ2V0TW9kdWxlIH0gZnJvbSAndnVleC1tb2R1bGUtZGVjb3JhdG9ycyc7CmltcG9ydCB7IGxvZ2luIH0gZnJvbSAnQC9hcGkvdXNlcnMnOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuLCBnZXROYW1lLCBzZXROYW1lLCByZW1vdmVOYW1lIH0gZnJvbSAnQC91dGlscy9jb29raWVzJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwoKdmFyIFVzZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfVnVleE1vZHVsZSkgewogIF9pbmhlcml0cyhVc2VyLCBfVnVleE1vZHVsZSk7CgogIGZ1bmN0aW9uIFVzZXIoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVzZXIpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFVzZXIpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgX3RoaXMudG9rZW4gPSBnZXRUb2tlbigpIHx8ICcnOwogICAgX3RoaXMubmFtZSA9IGdldE5hbWUoKSB8fCAnJzsKICAgIF90aGlzLmF2YXRhciA9ICcnOwogICAgX3RoaXMuaW50cm9kdWN0aW9uID0gJyc7CiAgICBfdGhpcy5yb2xlcyA9IFtdOwogICAgX3RoaXMudXNlcklkID0gMDsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhVc2VyLCBbewogICAga2V5OiAiU0VUX1RPS0VOIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBTRVRfVE9LRU4odG9rZW4pIHsKICAgICAgdGhpcy50b2tlbiA9IHRva2VuOwogICAgfQogIH0sIHsKICAgIGtleTogIlNFVF9OQU1FIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBTRVRfTkFNRShuYW1lKSB7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiU0VUX0FWQVRBUiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gU0VUX0FWQVRBUihhdmF0YXIpIHsKICAgICAgdGhpcy5hdmF0YXIgPSBhdmF0YXI7CiAgICB9CiAgfSwgewogICAga2V5OiAiU0VUX0lOVFJPRFVDVElPTiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gU0VUX0lOVFJPRFVDVElPTihpbnRyb2R1Y3Rpb24pIHsKICAgICAgdGhpcy5pbnRyb2R1Y3Rpb24gPSBpbnRyb2R1Y3Rpb247CiAgICB9CiAgfSwgewogICAga2V5OiAiU0VUX1JPTEVTIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBTRVRfUk9MRVMocm9sZXMpIHsKICAgICAgdGhpcy5yb2xlcyA9IHJvbGVzOwogICAgfQogIH0sIHsKICAgIGtleTogIlNFVF9VU0VSX0lEIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBTRVRfVVNFUl9JRCh1c2VySWQpIHsKICAgICAgdGhpcy51c2VySWQgPSB1c2VySWQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiTG9naW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIExvZ2luKHVzZXJJbmZvKSB7CiAgICAgIHZhciB1c2VybmFtZSwgcGFzc3dvcmQsIGRhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gTG9naW4kKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUsIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICAgICAgICAgICAgdXNlcm5hbWUgPSB1c2VybmFtZS50cmltKCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAvLyBUT0RPOiDlvZPnmbvlvZXlpLHotKXml7bvvIzlupTor6Xnm7TmjqXov5Tlm57plJnor6/mtojmga/vvIzkuI3lupTor6Xnu6fnu63miafooYzkuoYKICAgICAgICAgICAgICBzZXRUb2tlbihkYXRhLmFjY2Vzc190b2tlbik7CiAgICAgICAgICAgICAgc2V0TmFtZSh1c2VybmFtZSk7CiAgICAgICAgICAgICAgdGhpcy5TRVRfVE9LRU4oZGF0YS5hY2Nlc3NfdG9rZW4pOwogICAgICAgICAgICAgIHRoaXMuU0VUX05BTUUodXNlcm5hbWUpOwogICAgICAgICAgICAgIHRoaXMuU0VUX0FWQVRBUignJyk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJMb2dPdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIExvZ091dCgpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgcmVtb3ZlTmFtZSgpOwogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0NMSUVOVF9QT1JUQUxfVVJMLCAiL3BhZ2VzL2xlYXJpbmctaW5kZXguaHRtbCIpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFVzZXI7Cn0oVnVleE1vZHVsZSk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW011dGF0aW9uXSwgVXNlci5wcm90b3R5cGUsICJTRVRfVE9LRU4iLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbTXV0YXRpb25dLCBVc2VyLnByb3RvdHlwZSwgIlNFVF9OQU1FIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW011dGF0aW9uXSwgVXNlci5wcm90b3R5cGUsICJTRVRfQVZBVEFSIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW011dGF0aW9uXSwgVXNlci5wcm90b3R5cGUsICJTRVRfSU5UUk9EVUNUSU9OIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW011dGF0aW9uXSwgVXNlci5wcm90b3R5cGUsICJTRVRfUk9MRVMiLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbTXV0YXRpb25dLCBVc2VyLnByb3RvdHlwZSwgIlNFVF9VU0VSX0lEIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW0FjdGlvbl0sIFVzZXIucHJvdG90eXBlLCAiTG9naW4iLCBudWxsKTsKCnRzbGliXzEuX19kZWNvcmF0ZShbQWN0aW9uXSwgVXNlci5wcm90b3R5cGUsICJMb2dPdXQiLCBudWxsKTsKClVzZXIgPSB0c2xpYl8xLl9fZGVjb3JhdGUoW01vZHVsZSh7CiAgZHluYW1pYzogdHJ1ZSwKICBzdG9yZTogc3RvcmUsCiAgbmFtZTogJ3VzZXInCn0pXSwgVXNlcik7CmV4cG9ydCB2YXIgVXNlck1vZHVsZSA9IGdldE1vZHVsZShVc2VyKTs="},{"version":3,"sources":["D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\itcast2022\\xc_edu3.0\\code_148_backup\\project-xczx2-portal-vue-ts\\src\\store\\modules\\user.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  VuexModule,\r\n  Module,\r\n  Action,\r\n  Mutation,\r\n  getModule\r\n} from 'vuex-module-decorators'\r\nimport { login } from '@/api/users'\r\nimport { IUserLogin } from '@/entity/user-login'\r\nimport {\r\n  getToken,\r\n  setToken,\r\n  removeToken,\r\n  getName,\r\n  setName,\r\n  removeName\r\n} from '@/utils/cookies'\r\nimport store from '@/store'\r\n\r\nexport interface IUserState {\r\n  token: string\r\n  name: string\r\n  avatar: string\r\n  introduction: string\r\n  roles: string[]\r\n  userId: number\r\n}\r\n\r\n@Module({ dynamic: true, store, name: 'user' })\r\nclass User extends VuexModule implements IUserState {\r\n  public token = getToken() || ''\r\n  public name = getName() || ''\r\n  public avatar = ''\r\n  public introduction = ''\r\n  public roles: string[] = []\r\n  public userId = 0\r\n\r\n  @Mutation\r\n  private SET_TOKEN(token: string) {\r\n    this.token = token\r\n  }\r\n\r\n  @Mutation\r\n  private SET_NAME(name: string) {\r\n    this.name = name\r\n  }\r\n\r\n  @Mutation\r\n  private SET_AVATAR(avatar: string) {\r\n    this.avatar = avatar\r\n  }\r\n\r\n  @Mutation\r\n  private SET_INTRODUCTION(introduction: string) {\r\n    this.introduction = introduction\r\n  }\r\n\r\n  @Mutation\r\n  private SET_ROLES(roles: string[]) {\r\n    this.roles = roles\r\n  }\r\n\r\n  @Mutation\r\n  private SET_USER_ID(userId: number) {\r\n    this.userId = userId\r\n  }\r\n\r\n  @Action\r\n  public async Login(userInfo: { username: string; password: string }) {\r\n    let { username, password } = userInfo\r\n    username = username.trim()\r\n    const data: IUserLogin = await login(username, password)\r\n\r\n    // TODO: 当登录失败时，应该直接返回错误消息，不应该继续执行了\r\n    setToken(data.access_token)\r\n    setName(username)\r\n    this.SET_TOKEN(data.access_token)\r\n    this.SET_NAME(username)\r\n    this.SET_AVATAR('')\r\n  }\r\n\r\n  @Action\r\n  public LogOut() {\r\n    removeToken()\r\n    removeName()\r\n    window.location.href = `${process.env.VUE_APP_CLIENT_PORTAL_URL}/pages/learing-index.html`\r\n  }\r\n}\r\n\r\nexport const UserModule = getModule(User)\r\n"],"sourceRoot":""}]}