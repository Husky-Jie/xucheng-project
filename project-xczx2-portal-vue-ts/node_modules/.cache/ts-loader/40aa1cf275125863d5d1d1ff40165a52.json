{"remainingRequest":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\src\\store\\modules\\user.ts","dependencies":[{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\src\\store\\modules\\user.ts","mtime":1586849107738},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js","mtime":1577501200723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOlxcaXRjYXN0MjAyM1xceGNfZWR1My4xXFxjb2RlXzQwMlxccHJvamVjdC14Y3p4Mi1wb3J0YWwtdnVlLXRzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOlxcaXRjYXN0MjAyM1xceGNfZWR1My4xXFxjb2RlXzQwMlxccHJvamVjdC14Y3p4Mi1wb3J0YWwtdnVlLXRzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkQ6XFxpdGNhc3QyMDIzXFx4Y19lZHUzLjFcXGNvZGVfNDAyXFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiRDpcXGl0Y2FzdDIwMjNcXHhjX2VkdTMuMVxcY29kZV80MDJcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRDpcXGl0Y2FzdDIwMjNcXHhjX2VkdTMuMVxcY29kZV80MDJcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSAidHNsaWIiOwppbXBvcnQgeyBWdWV4TW9kdWxlLCBNb2R1bGUsIEFjdGlvbiwgTXV0YXRpb24sIGdldE1vZHVsZSB9IGZyb20gJ3Z1ZXgtbW9kdWxlLWRlY29yYXRvcnMnOwppbXBvcnQgeyBsb2dpbiB9IGZyb20gJ0AvYXBpL3VzZXJzJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiwgZ2V0TmFtZSwgc2V0TmFtZSwgcmVtb3ZlTmFtZSB9IGZyb20gJ0AvdXRpbHMvY29va2llcyc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKCnZhciBVc2VyID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1Z1ZXhNb2R1bGUpIHsKICBfaW5oZXJpdHMoVXNlciwgX1Z1ZXhNb2R1bGUpOwoKICBmdW5jdGlvbiBVc2VyKCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVc2VyKTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihVc2VyKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICAgIF90aGlzLnRva2VuID0gZ2V0VG9rZW4oKSB8fCAnJzsKICAgIF90aGlzLm5hbWUgPSBnZXROYW1lKCkgfHwgJyc7CiAgICBfdGhpcy5hdmF0YXIgPSAnJzsKICAgIF90aGlzLmludHJvZHVjdGlvbiA9ICcnOwogICAgX3RoaXMucm9sZXMgPSBbXTsKICAgIF90aGlzLnVzZXJJZCA9IDA7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVXNlciwgW3sKICAgIGtleTogIlNFVF9UT0tFTiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gU0VUX1RPS0VOKHRva2VuKSB7CiAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJTRVRfTkFNRSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gU0VUX05BTUUobmFtZSkgewogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgfQogIH0sIHsKICAgIGtleTogIlNFVF9BVkFUQVIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoYXZhdGFyKSB7CiAgICAgIHRoaXMuYXZhdGFyID0gYXZhdGFyOwogICAgfQogIH0sIHsKICAgIGtleTogIlNFVF9JTlRST0RVQ1RJT04iLAogICAgdmFsdWU6IGZ1bmN0aW9uIFNFVF9JTlRST0RVQ1RJT04oaW50cm9kdWN0aW9uKSB7CiAgICAgIHRoaXMuaW50cm9kdWN0aW9uID0gaW50cm9kdWN0aW9uOwogICAgfQogIH0sIHsKICAgIGtleTogIlNFVF9ST0xFUyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gU0VUX1JPTEVTKHJvbGVzKSB7CiAgICAgIHRoaXMucm9sZXMgPSByb2xlczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJTRVRfVVNFUl9JRCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gU0VUX1VTRVJfSUQodXNlcklkKSB7CiAgICAgIHRoaXMudXNlcklkID0gdXNlcklkOwogICAgfQogIH0sIHsKICAgIGtleTogIkxvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBMb2dpbih1c2VySW5mbykgewogICAgICB2YXIgdXNlcm5hbWUsIHBhc3N3b3JkLCBkYXRhOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIExvZ2luJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLCBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgICAgICAgICAgIHVzZXJuYW1lID0gdXNlcm5hbWUudHJpbSgpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAobG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgLy8gVE9ETzog5b2T55m75b2V5aSx6LSl5pe277yM5bqU6K+l55u05o6l6L+U5Zue6ZSZ6K+v5raI5oGv77yM5LiN5bqU6K+l57un57ut5omn6KGM5LqGCiAgICAgICAgICAgICAgc2V0VG9rZW4oZGF0YS5hY2Nlc3NfdG9rZW4pOwogICAgICAgICAgICAgIHNldE5hbWUodXNlcm5hbWUpOwogICAgICAgICAgICAgIHRoaXMuU0VUX1RPS0VOKGRhdGEuYWNjZXNzX3Rva2VuKTsKICAgICAgICAgICAgICB0aGlzLlNFVF9OQU1FKHVzZXJuYW1lKTsKICAgICAgICAgICAgICB0aGlzLlNFVF9BVkFUQVIoJycpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiTG9nT3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBMb2dPdXQoKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIHJlbW92ZU5hbWUoKTsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9DTElFTlRfUE9SVEFMX1VSTCwgIi9wYWdlcy9sZWFyaW5nLWluZGV4Lmh0bWwiKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBVc2VyOwp9KFZ1ZXhNb2R1bGUpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtNdXRhdGlvbl0sIFVzZXIucHJvdG90eXBlLCAiU0VUX1RPS0VOIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW011dGF0aW9uXSwgVXNlci5wcm90b3R5cGUsICJTRVRfTkFNRSIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtNdXRhdGlvbl0sIFVzZXIucHJvdG90eXBlLCAiU0VUX0FWQVRBUiIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtNdXRhdGlvbl0sIFVzZXIucHJvdG90eXBlLCAiU0VUX0lOVFJPRFVDVElPTiIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtNdXRhdGlvbl0sIFVzZXIucHJvdG90eXBlLCAiU0VUX1JPTEVTIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW011dGF0aW9uXSwgVXNlci5wcm90b3R5cGUsICJTRVRfVVNFUl9JRCIsIG51bGwpOwoKdHNsaWJfMS5fX2RlY29yYXRlKFtBY3Rpb25dLCBVc2VyLnByb3RvdHlwZSwgIkxvZ2luIiwgbnVsbCk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW0FjdGlvbl0sIFVzZXIucHJvdG90eXBlLCAiTG9nT3V0IiwgbnVsbCk7CgpVc2VyID0gdHNsaWJfMS5fX2RlY29yYXRlKFtNb2R1bGUoewogIGR5bmFtaWM6IHRydWUsCiAgc3RvcmU6IHN0b3JlLAogIG5hbWU6ICd1c2VyJwp9KV0sIFVzZXIpOwpleHBvcnQgdmFyIFVzZXJNb2R1bGUgPSBnZXRNb2R1bGUoVXNlcik7"},{"version":3,"sources":["D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\itcast2023\\xc_edu3.1\\code_402\\project-xczx2-portal-vue-ts\\src\\store\\modules\\user.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  VuexModule,\r\n  Module,\r\n  Action,\r\n  Mutation,\r\n  getModule\r\n} from 'vuex-module-decorators'\r\nimport { login } from '@/api/users'\r\nimport { IUserLogin } from '@/entity/user-login'\r\nimport {\r\n  getToken,\r\n  setToken,\r\n  removeToken,\r\n  getName,\r\n  setName,\r\n  removeName\r\n} from '@/utils/cookies'\r\nimport store from '@/store'\r\n\r\nexport interface IUserState {\r\n  token: string\r\n  name: string\r\n  avatar: string\r\n  introduction: string\r\n  roles: string[]\r\n  userId: number\r\n}\r\n\r\n@Module({ dynamic: true, store, name: 'user' })\r\nclass User extends VuexModule implements IUserState {\r\n  public token = getToken() || ''\r\n  public name = getName() || ''\r\n  public avatar = ''\r\n  public introduction = ''\r\n  public roles: string[] = []\r\n  public userId = 0\r\n\r\n  @Mutation\r\n  private SET_TOKEN(token: string) {\r\n    this.token = token\r\n  }\r\n\r\n  @Mutation\r\n  private SET_NAME(name: string) {\r\n    this.name = name\r\n  }\r\n\r\n  @Mutation\r\n  private SET_AVATAR(avatar: string) {\r\n    this.avatar = avatar\r\n  }\r\n\r\n  @Mutation\r\n  private SET_INTRODUCTION(introduction: string) {\r\n    this.introduction = introduction\r\n  }\r\n\r\n  @Mutation\r\n  private SET_ROLES(roles: string[]) {\r\n    this.roles = roles\r\n  }\r\n\r\n  @Mutation\r\n  private SET_USER_ID(userId: number) {\r\n    this.userId = userId\r\n  }\r\n\r\n  @Action\r\n  public async Login(userInfo: { username: string; password: string }) {\r\n    let { username, password } = userInfo\r\n    username = username.trim()\r\n    const data: IUserLogin = await login(username, password)\r\n\r\n    // TODO: 当登录失败时，应该直接返回错误消息，不应该继续执行了\r\n    setToken(data.access_token)\r\n    setName(username)\r\n    this.SET_TOKEN(data.access_token)\r\n    this.SET_NAME(username)\r\n    this.SET_AVATAR('')\r\n  }\r\n\r\n  @Action\r\n  public LogOut() {\r\n    removeToken()\r\n    removeName()\r\n    window.location.href = `${process.env.VUE_APP_CLIENT_PORTAL_URL}/pages/learing-index.html`\r\n  }\r\n}\r\n\r\nexport const UserModule = getModule(User)\r\n"],"sourceRoot":""}]}