{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\order-manage\\order-list.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\order-manage\\order-list.vue","mtime":1586849107727},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InDQppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvcGFnaW5hdGlvbi9pbmRleC52dWUnDQppbXBvcnQgeyBJS1ZEYXRhIH0gZnJvbSAnQC9hcGkvdHlwZXMnDQppbXBvcnQgeyBPUkRFUl9UWVBFX1NUQVRVUyB9IGZyb20gJ0AvYXBpL2NvbnN0YW50cycNCmltcG9ydCB7IElPcmRlclBhZ2VWTyB9IGZyb20gJ0AvZW50aXR5L29yZGVyLXBhZ2UtbGlzdCcNCmltcG9ydCB7IGdldE9yZGVyUGFnZUxpc3QgfSBmcm9tICdAL2FwaS9vcmRlcnMnDQoNCkBDb21wb25lbnQoew0KICBjb21wb25lbnRzOiB7DQogICAgUGFnaW5hdGlvbg0KICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJMaXN0IGV4dGVuZHMgVnVlIHsNCiAgLy8g6K6i5Y2V5Lqk5piT57G75Z6L54q25oCBDQogIHByaXZhdGUgb3JkZXJUeXBlU3RhdHVzOiBJS1ZEYXRhW10gPSBPUkRFUl9UWVBFX1NUQVRVUw0KDQogIC8vIOS6pOaYk+aXtumXtA0KICBwcml2YXRlIG9yZGVyRGF0ZTogc3RyaW5nW10gPSBbXQ0KICAvLyDmmK/lkKbovb3lhaXkuK0NCiAgcHJpdmF0ZSBsaXN0TG9hZGluZzogYm9vbGVhbiA9IGZhbHNlDQogIC8vIOivt+axguWPguaVsFF1ZXJ5DQogIHByaXZhdGUgbGlzdFF1ZXJ5ID0gew0KICAgIHBhZ2VObzogMSwNCiAgICBwYWdlU2l6ZTogMTANCiAgfQ0KICAvLyDor7fmsYLlj4LmlbBib2R5DQogIHByaXZhdGUgbGlzdFF1ZXJ5RGF0YSA9IHsNCiAgICBvcmRlclN0YXJ0OiAnJywNCiAgICBvcmRlckVuZDogJycsDQogICAgY291cnNlTmFtZTogJycsDQogICAgc3RhdHVzOiAnJywNCiAgICBvcmRlck5vOiAnJywNCiAgICB1c2VySWQ6ICcnDQogIH0NCiAgLy8g6K6i5Y2V5YiX6KGoDQogIHByaXZhdGUgbGlzdFJlc3VsdDogSU9yZGVyUGFnZVZPID0ge30NCg0KICAvLyDorqHnrpflsZ7mgKcNCiAgZ2V0T3JkZXJUeXBlU3RhdHVzKHN0YXR1czogbnVtYmVyKSB7DQogICAgbGV0IGl0ZW0gPSB0aGlzLm9yZGVyVHlwZVN0YXR1cy5maW5kKCh2YWx1ZTogSUtWRGF0YSkgPT4gew0KICAgICAgcmV0dXJuIHN0YXR1cy50b1N0cmluZygpID09PSB2YWx1ZS5jb2RlDQogICAgfSkNCiAgICByZXR1cm4gIWl0ZW0gPyAnJyA6IGl0ZW0uZGVzYw0KICB9DQoNCiAgLyoqDQogICAqIOeUn+WRveWRqOacn+mSqeWtkA0KICAgKi8NCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldE9yZGVyUGFnZUxpc3QoKQ0KICB9DQoNCiAgLyoqDQogICAqIOiuouWNleWIl+ihqA0KICAgKi8NCiAgcHJpdmF0ZSBhc3luYyBnZXRPcmRlclBhZ2VMaXN0KCkgew0KICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlDQogICAgdGhpcy5saXN0UmVzdWx0ID0gYXdhaXQgZ2V0T3JkZXJQYWdlTGlzdCh0aGlzLmxpc3RRdWVyeSwgdGhpcy5saXN0UXVlcnlEYXRhKQ0KICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQ0KICB9DQoNCiAgLyoqDQogICAqIOWkhOeQhuS6pOaYk+aXtumXtA0KICAgKi8NCiAgcHJpdmF0ZSBoYW5kbGVPcmRlckRhdGVDaGFuZ2Uob3JkZXJEYXRlOiBzdHJpbmdbXSkgew0KICAgIGlmIChvcmRlckRhdGUgJiYgb3JkZXJEYXRlLmxlbmd0aCA+IDApIHsNCiAgICAgIHRoaXMubGlzdFF1ZXJ5RGF0YS5vcmRlclN0YXJ0ID0gb3JkZXJEYXRlWzBdICsgJyAwMDowMDowMCcNCiAgICAgIHRoaXMubGlzdFF1ZXJ5RGF0YS5vcmRlckVuZCA9IG9yZGVyRGF0ZVsxXSArICcgMjM6NTk6NTknDQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMubGlzdFF1ZXJ5RGF0YS5vcmRlclN0YXJ0ID0gJycNCiAgICAgIHRoaXMubGlzdFF1ZXJ5RGF0YS5vcmRlckVuZCA9ICcnDQogICAgfQ0KICB9DQoNCiAgLy8g55uR5o6nIHdhdGNoDQogIC8vIOe/u+mhtSBwYWdlU2l6ZQ0KICBAV2F0Y2goJ2xpc3RRdWVyeS5wYWdlU2l6ZScsIHsgaW1tZWRpYXRlOiB0cnVlIH0pDQogIHByaXZhdGUgd2F0Y2hMaXN0UXVlcnlQYWdlU2l6ZShuZXdWYWw6IG51bWJlcikgew0KICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VObyA9IDENCiAgfQ0KfQ0K"},{"version":3,"sources":["order-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"order-list.vue","sourceRoot":"src/module-organization/pages/order-manage","sourcesContent":["<template>\r\n  <div class=\"course-list portal-content\">\r\n    <div class=\"workspace\">\r\n      <div class=\"banner\">\r\n        <span class=\"primary-title\">订单明细</span>\r\n      </div>\r\n\r\n      <!-- 搜索栏 -->\r\n      <div class=\"searcher\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"6\">\r\n            <el-date-picker\r\n              class=\"el-date-picker\"\r\n              style=\"width: 100%;\"\r\n              v-model=\"orderDate\"\r\n              type=\"daterange\"\r\n              align=\"right\"\r\n              unlink-panels\r\n              range-separator=\"~\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              @change=\"handleOrderDateChange\"\r\n            ></el-date-picker>\r\n          </el-col>\r\n          <el-col :span=\"4\">\r\n            <el-input\r\n              v-model=\"listQueryData.courseName\"\r\n              class=\"el-input\"\r\n              placeholder=\"请输入课程名称\"\r\n              clearable\r\n            />\r\n          </el-col>\r\n          <el-col :span=\"4\">\r\n            <el-select\r\n              v-model=\"listQueryData.status\"\r\n              class=\"el-input\"\r\n              placeholder=\"请选择结算状态\"\r\n              clearable\r\n            >\r\n              <el-option\r\n                v-for=\"item in orderTypeStatus\"\r\n                :key=\"item.code\"\r\n                :label=\"item.desc\"\r\n                :value=\"item.code\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-col>\r\n          <el-col :span=\"4\">\r\n            <el-input\r\n              v-model=\"listQueryData.orderNo\"\r\n              class=\"el-input\"\r\n              placeholder=\"请输入订单号\"\r\n              clearable\r\n            />\r\n          </el-col>\r\n          <el-col :span=\"4\">\r\n            <el-input\r\n              v-model=\"listQueryData.userId\"\r\n              class=\"el-input\"\r\n              placeholder=\"请输入学员ID\"\r\n              clearable\r\n            />\r\n          </el-col>\r\n          <el-col :span=\"2\" style=\"text-align: right;\">\r\n            <el-button type=\"primary\" size=\"medium\" class=\"el-button\" @click=\"getOrderPageList\">查询</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n\r\n      <!-- 数据列表 -->\r\n      <el-table\r\n        class=\"dataList\"\r\n        v-loading=\"listLoading\"\r\n        :data=\"listResult.items\"\r\n        border\r\n        style=\"width: 100%\"\r\n        :header-cell-style=\"{ textAlign: 'center' }\"\r\n      >\r\n        <el-table-column prop=\"orderNo\" label=\"订单号\" align=\"center\"></el-table-column>\r\n\r\n        <el-table-column label=\"交易时间\" align=\"center\">\r\n          <template slot-scope=\"scope\">{{ scope.row.createDate | dateTimeFormat }}</template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"userId\" label=\"学员ID\" align=\"center\"></el-table-column>\r\n\r\n        <el-table-column prop=\"coursePubName\" label=\"课程名称\" align=\"center\"></el-table-column>\r\n\r\n        <el-table-column label=\"交易金额\" align=\"center\">\r\n          <template slot-scope=\"scope\">&#165;{{ scope.row.price.toFixed(2) }}</template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"结算金额\" align=\"center\">\r\n          <template slot-scope=\"scope\">&#165;{{ scope.row.price.toFixed(2) }}</template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"status\" label=\"结算状态\" align=\"center\">\r\n          <template slot-scope=\"scope\">{{ getOrderTypeStatus(scope.row.status) }}</template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 翻页控制 -->\r\n      <div class=\"dataList-pagination\">\r\n        <Pagination\r\n          v-show=\"listResult.counts > 0\"\r\n          :total=\"listResult.counts\"\r\n          :page.sync=\"listQuery.pageNo\"\r\n          :limit.sync=\"listQuery.pageSize\"\r\n          @pagination=\"getOrderPageList\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Watch } from 'vue-property-decorator'\r\nimport Pagination from '@/components/pagination/index.vue'\r\nimport { IKVData } from '@/api/types'\r\nimport { ORDER_TYPE_STATUS } from '@/api/constants'\r\nimport { IOrderPageVO } from '@/entity/order-page-list'\r\nimport { getOrderPageList } from '@/api/orders'\r\n\r\n@Component({\r\n  components: {\r\n    Pagination\r\n  }\r\n})\r\nexport default class OrderList extends Vue {\r\n  // 订单交易类型状态\r\n  private orderTypeStatus: IKVData[] = ORDER_TYPE_STATUS\r\n\r\n  // 交易时间\r\n  private orderDate: string[] = []\r\n  // 是否载入中\r\n  private listLoading: boolean = false\r\n  // 请求参数Query\r\n  private listQuery = {\r\n    pageNo: 1,\r\n    pageSize: 10\r\n  }\r\n  // 请求参数body\r\n  private listQueryData = {\r\n    orderStart: '',\r\n    orderEnd: '',\r\n    courseName: '',\r\n    status: '',\r\n    orderNo: '',\r\n    userId: ''\r\n  }\r\n  // 订单列表\r\n  private listResult: IOrderPageVO = {}\r\n\r\n  // 计算属性\r\n  getOrderTypeStatus(status: number) {\r\n    let item = this.orderTypeStatus.find((value: IKVData) => {\r\n      return status.toString() === value.code\r\n    })\r\n    return !item ? '' : item.desc\r\n  }\r\n\r\n  /**\r\n   * 生命周期钩子\r\n   */\r\n  created() {\r\n    this.getOrderPageList()\r\n  }\r\n\r\n  /**\r\n   * 订单列表\r\n   */\r\n  private async getOrderPageList() {\r\n    this.listLoading = true\r\n    this.listResult = await getOrderPageList(this.listQuery, this.listQueryData)\r\n    this.listLoading = false\r\n  }\r\n\r\n  /**\r\n   * 处理交易时间\r\n   */\r\n  private handleOrderDateChange(orderDate: string[]) {\r\n    if (orderDate && orderDate.length > 0) {\r\n      this.listQueryData.orderStart = orderDate[0] + ' 00:00:00'\r\n      this.listQueryData.orderEnd = orderDate[1] + ' 23:59:59'\r\n    } else {\r\n      this.listQueryData.orderStart = ''\r\n      this.listQueryData.orderEnd = ''\r\n    }\r\n  }\r\n\r\n  // 监控 watch\r\n  // 翻页 pageSize\r\n  @Watch('listQuery.pageSize', { immediate: true })\r\n  private watchListQueryPageSize(newVal: number) {\r\n    this.listQuery.pageNo = 1\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.course-list {\r\n  .nav-bar {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .searcher {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .dataList {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .dataList-pagination {\r\n    text-align: center;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>"]}]}