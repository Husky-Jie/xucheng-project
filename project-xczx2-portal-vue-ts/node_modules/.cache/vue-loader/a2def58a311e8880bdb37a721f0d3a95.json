{"remainingRequest":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\learning-member\\member.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\learning-member\\member.vue","mtime":1586849107726},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFdhdGNoLCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJw0KaW1wb3J0IHsgbWl4aW5zIH0gZnJvbSAndnVlLWNsYXNzLWNvbXBvbmVudCcNCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJ0AvY29tcG9uZW50cy9wYWdpbmF0aW9uL2luZGV4LnZ1ZScNCmltcG9ydCBCaW5kRGlhbG9nIGZyb20gJy4vYmluZC1kaWFsb2cudnVlJw0KaW1wb3J0IHsNCiAgbWVtYmVyUGFnZUxpc3QsDQogIGZpbmRVc2VyQnlQaG9uZSwNCiAgYmluZFVzZXIsDQogIHVuYmluZFVzZXINCn0gZnJvbSAnQC9hcGkvbGVhcm5pbmctbWVtYmVyJyAvLyBhcGkgaW50ZXJmYWNlIOivvueoiw0KaW1wb3J0IHsgSUxlYXJuaW5nTWVtYmVyUGFnZUxpc3QsIElNZW1iZXJEVE8gfSBmcm9tICdAL2VudGl0eS9sZWFybmluZy1tZW1iZXInDQppbXBvcnQgTWl4aW5Ub29scyBmcm9tICdAL3V0aWxzL21peGlucy52dWUnDQppbXBvcnQgeyBFbEZvcm0gfSBmcm9tICdlbGVtZW50LXVpL3R5cGVzL2Zvcm0nDQoNCkBDb21wb25lbnQoew0KICBuYW1lOiAnTWVtYmVyTGlzdCcsDQogIGNvbXBvbmVudHM6IHsNCiAgICBQYWdpbmF0aW9uLA0KICAgIEJpbmREaWFsb2cNCiAgfSwNCiAgZmlsdGVyczoge30NCn0pDQpleHBvcnQgZGVmYXVsdCBjbGFzcyBleHRlbmRzIG1peGlucyhNaXhpblRvb2xzKSB7DQogIC8vIOexu+Wei+mAieaLqeW8ueWHuuWvueivneahhg0KICBwcml2YXRlIGRpYWxvZ1Zpc2libGU6IGJvb2xlYW4gPSBmYWxzZSAvLyDmmK/lkKbmmL7npLoNCg0KICAvLyDmn6Xor6INCiAgcHJpdmF0ZSBsaXN0RGF0YTogSUxlYXJuaW5nTWVtYmVyUGFnZUxpc3QgPSB7fSAvLyDmlbDmja7kvZMNCiAgcHJpdmF0ZSBsaXN0TG9hZGluZzogYm9vbGVhbiA9IGZhbHNlIC8vIOaYr+WQpui9veWFpeS4rQ0KICAvLyBhcGkgcGFyYW1zDQogIHByaXZhdGUgbGlzdFF1ZXJ5ID0gew0KICAgIHBhZ2VObzogMSwNCiAgICBwYWdlU2l6ZTogMTANCiAgfQ0KICAvLyBhcGkgcG9zdCBib2R5DQogIHByaXZhdGUgbGlzdFF1ZXJ5RGF0YSA9IHt9DQoNCiAgLy8g5Lia5Yqh5Ye95pWwDQogIHByaXZhdGUgYXN5bmMgZ2V0TGlzdCgpIHsNCiAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQ0KICAgIHRoaXMubGlzdERhdGEgPSBhd2FpdCBtZW1iZXJQYWdlTGlzdCh0aGlzLmxpc3RRdWVyeSkNCiAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UNCiAgfQ0KDQogIC8vIOeUn+WRveWRqOacnyBsaWZlDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRMaXN0KCkNCiAgfQ0KDQogIC8vIOS6i+S7tiBoYW5kbGUNCg0KICAvKiog6Kej57uRDQogICAqLw0KICBwcml2YXRlIGFzeW5jIGhhbmRsZVVuYmluZFVzZXIoaW5kZXg6IG51bWJlciwgcm93OiBJTWVtYmVyRFRPKSB7DQogICAgdHJ5IHsNCiAgICAgIGlmIChyb3cubWVtYmVySWQpIHsNCiAgICAgICAgYXdhaXQgdGhpcy5zaG93Q29uZmlybSgn56Gu6K6k6KaB6Kej57uR55So5oi35LmIPycpDQogICAgICAgIGF3YWl0IHVuYmluZFVzZXIocm93Lm1lbWJlcklkKQ0KICAgICAgICBhd2FpdCB0aGlzLmdldExpc3QoKQ0KICAgICAgfQ0KICAgIH0gY2F0Y2ggKGVycm9yKSB7fQ0KICB9DQoNCiAgLyoqIOaYvuekuue7keWumueql+WPow0KICAgKi8NCiAgcHJpdmF0ZSBoYW5kbGVTaG93RGxnKCkgew0KICAgIGxldCBkbGc6IEJpbmREaWFsb2cgPSB0aGlzLiRyZWZzWydkbGcnXSBhcyBCaW5kRGlhbG9nDQogICAgZGxnLnJlc3RGb3JtKCkNCiAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogIH0NCg0KICAvLyDnm5Hmjqcgd2F0Y2gNCiAgLy8g5pCc57Si5qCPDQogIC8vIEBXYXRjaCgnbGlzdFF1ZXJ5RGF0YScsIHsgZGVlcDogdHJ1ZSwgaW1tZWRpYXRlOiB0cnVlIH0pDQogIC8vIHByaXZhdGUgd2F0Y2hMaXN0UXVlcnlEYXRhKG5ld1ZhbDogc3RyaW5nKSB7DQogIC8vICAgaWYgKG5ld1ZhbCA9PSAnJykgew0KICAvLyAgICAgcmV0dXJuDQogIC8vICAgfQ0KICAvLyAgIHRoaXMuZ2V0TGlzdCgpDQogIC8vIH0NCiAgLy8g57+76aG1IHBhZ2VTaXplDQogIEBXYXRjaCgnbGlzdFF1ZXJ5LnBhZ2VTaXplJywgeyBpbW1lZGlhdGU6IHRydWUgfSkNCiAgcHJpdmF0ZSB3YXRjaExpc3RRdWVyeVBhZ2VTaXplKG5ld1ZhbDogbnVtYmVyKSB7DQogICAgdGhpcy5saXN0UXVlcnkucGFnZU5vID0gMQ0KICB9DQp9DQo="},{"version":3,"sources":["member.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"member.vue","sourceRoot":"src/module-organization/pages/learning-member","sourcesContent":["<template>\r\n  <div class=\"workspace\">\r\n    <div class=\"banner\">\r\n      <span class=\"primary-title\">机构成员</span>\r\n      <el-button type=\"primary\" size=\"medium\" class=\"btn-add el-button\" @click=\"handleShowDlg\">+绑定用户</el-button>\r\n    </div>\r\n\r\n    <!-- 搜索栏 -->\r\n    <!-- <div class=\"searcher\">\r\n      <el-input\r\n        class=\"el-input\"\r\n        placeholder=\"课程名称\"\r\n        suffix-icon=\"el-icon-search\"\r\n        v-model=\"listQueryData.courseName\"\r\n      />\r\n      <el-select v-model=\"listQueryData.auditStatus\" placeholder=\"请选择\">\r\n        <el-option\r\n          v-for=\"item in aduitStatusOptions\"\r\n          :key=\"item.code\"\r\n          :label=\"item.desc\"\r\n          :value=\"item.code\"\r\n        ></el-option>\r\n      </el-select>\r\n    </div>-->\r\n\r\n    <!-- 数据列表 -->\r\n    <el-table\r\n      class=\"dataList\"\r\n      v-loading=\"listLoading\"\r\n      :data=\"listData.items\"\r\n      border\r\n      style=\"width: 100%\"\r\n      :header-cell-style=\"{textAlign: 'center'}\"\r\n    >\r\n      <el-table-column prop=\"name\" label=\"成员\" width=\"100\" align=\"center\"></el-table-column>\r\n      <el-table-column prop=\"phone\" label=\"手机\" width=\"150\" align=\"center\"></el-table-column>\r\n      <el-table-column prop=\"intro\" label=\"成员介绍\"></el-table-column>\r\n      <!-- <el-table-column prop=\"createDate\" label=\"关联课程数\" align=\"center\" width=\"100\"></el-table-column> -->\r\n      <el-table-column label=\"操作\" align=\"center\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" size=\"mini\" @click=\"handleUnbindUser(scope.$index, scope.row)\">解绑</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 翻页控制 -->\r\n    <div class=\"dataList-pagination\">\r\n      <Pagination\r\n        v-show=\"listData.counts > 0\"\r\n        :total=\"listData.counts\"\r\n        :page.sync=\"listQuery.pageNo\"\r\n        :limit.sync=\"listQuery.pageSize\"\r\n        @pagination=\"getList\"\r\n      />\r\n    </div>\r\n\r\n    <!-- 类型提示框 -->\r\n    <BindDialog ref=\"dlg\" :dialogVisible.sync=\"dialogVisible\" @getList=\"getList\"></BindDialog>\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Watch, Vue } from 'vue-property-decorator'\r\nimport { mixins } from 'vue-class-component'\r\nimport Pagination from '@/components/pagination/index.vue'\r\nimport BindDialog from './bind-dialog.vue'\r\nimport {\r\n  memberPageList,\r\n  findUserByPhone,\r\n  bindUser,\r\n  unbindUser\r\n} from '@/api/learning-member' // api interface 课程\r\nimport { ILearningMemberPageList, IMemberDTO } from '@/entity/learning-member'\r\nimport MixinTools from '@/utils/mixins.vue'\r\nimport { ElForm } from 'element-ui/types/form'\r\n\r\n@Component({\r\n  name: 'MemberList',\r\n  components: {\r\n    Pagination,\r\n    BindDialog\r\n  },\r\n  filters: {}\r\n})\r\nexport default class extends mixins(MixinTools) {\r\n  // 类型选择弹出对话框\r\n  private dialogVisible: boolean = false // 是否显示\r\n\r\n  // 查询\r\n  private listData: ILearningMemberPageList = {} // 数据体\r\n  private listLoading: boolean = false // 是否载入中\r\n  // api params\r\n  private listQuery = {\r\n    pageNo: 1,\r\n    pageSize: 10\r\n  }\r\n  // api post body\r\n  private listQueryData = {}\r\n\r\n  // 业务函数\r\n  private async getList() {\r\n    this.listLoading = true\r\n    this.listData = await memberPageList(this.listQuery)\r\n    this.listLoading = false\r\n  }\r\n\r\n  // 生命周期 life\r\n  created() {\r\n    this.getList()\r\n  }\r\n\r\n  // 事件 handle\r\n\r\n  /** 解绑\r\n   */\r\n  private async handleUnbindUser(index: number, row: IMemberDTO) {\r\n    try {\r\n      if (row.memberId) {\r\n        await this.showConfirm('确认要解绑用户么?')\r\n        await unbindUser(row.memberId)\r\n        await this.getList()\r\n      }\r\n    } catch (error) {}\r\n  }\r\n\r\n  /** 显示绑定窗口\r\n   */\r\n  private handleShowDlg() {\r\n    let dlg: BindDialog = this.$refs['dlg'] as BindDialog\r\n    dlg.restForm()\r\n    this.dialogVisible = true\r\n  }\r\n\r\n  // 监控 watch\r\n  // 搜索栏\r\n  // @Watch('listQueryData', { deep: true, immediate: true })\r\n  // private watchListQueryData(newVal: string) {\r\n  //   if (newVal == '') {\r\n  //     return\r\n  //   }\r\n  //   this.getList()\r\n  // }\r\n  // 翻页 pageSize\r\n  @Watch('listQuery.pageSize', { immediate: true })\r\n  private watchListQueryPageSize(newVal: number) {\r\n    this.listQuery.pageNo = 1\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.workspace .banner .btn-add {\r\n  float: right;\r\n}\r\n\r\n.searcher {\r\n  margin-top: 16px;\r\n\r\n  div {\r\n    width: 218px;\r\n    margin-right: 10px;\r\n  }\r\n}\r\n\r\n.dataList {\r\n  margin-top: 16px;\r\n}\r\n\r\n.dataList-pagination {\r\n  text-align: center;\r\n  width: 100%;\r\n}\r\n</style>\r\n"]}]}