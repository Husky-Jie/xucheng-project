{"remainingRequest":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\media-add-dialog.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\media-add-dialog.vue","mtime":1676692684068},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6XFxKYXZhXHU1QjY2XHU0RTYwXFx4dWNoZW5nLXByb2plY3RcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDpcXEphdmFcdTVCNjZcdTRFNjBcXHh1Y2hlbmctcHJvamVjdFxccHJvamVjdC14Y3p4Mi1wb3J0YWwtdnVlLXRzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkQ6XFxKYXZhXHU1QjY2XHU0RTYwXFx4dWNoZW5nLXByb2plY3RcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJEOlxcSmF2YVx1NUI2Nlx1NEU2MFxceHVjaGVuZy1wcm9qZWN0XFxwcm9qZWN0LXhjengyLXBvcnRhbC12dWUtdHNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkQ6XFxKYXZhXHU1QjY2XHU0RTYwXFx4dWNoZW5nLXByb2plY3RcXHByb2plY3QteGN6eDItcG9ydGFsLXZ1ZS10c1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSAidHNsaWIiOwppbXBvcnQgeyBDb21wb25lbnQsIFZ1ZSwgUHJvcFN5bmMgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0ICogYXMgcWluaXUgZnJvbSAncWluaXUtanMnOwppbXBvcnQgeyBCYXNlNjQgfSBmcm9tICdqcy1iYXNlNjQnOwppbXBvcnQgeyBnZXRRblBhcmFtcyB9IGZyb20gJ0AvYXBpL2NvbW1vbic7CmltcG9ydCB7IGdldFZvZFRva2VuLCBzYXZlTWVkaWEgfSBmcm9tICdAL2FwaS9tZWRpYSc7CmltcG9ydCB7IHVwbG9hZEJ5UGllY2VzIH0gZnJvbSAnQC91dGlscy91cGxvYWR0b29scyc7Cgp2YXIgTWVkaWFBZGREaWFsb2cgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfVnVlKSB7CiAgX2luaGVyaXRzKE1lZGlhQWRkRGlhbG9nLCBfVnVlKTsKCiAgZnVuY3Rpb24gTWVkaWFBZGREaWFsb2coKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lZGlhQWRkRGlhbG9nKTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihNZWRpYUFkZERpYWxvZykuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7IC8vIOaWh+aho+WQjue8gOWQjeWIl+ihqAoKICAgIF90aGlzLm1zRG9jdW1lbnRTdWZmaXggPSBbJy5kb2MnLCAnLmRvY3gnLCAnLnhscycsICcueGxzeCcsICcucHB0JywgJy5wcHR4JywgJy5wZGYnXTsgLy8g6Z+zL+inhumikeWQjue8gOWQjeWIl+ihqAoKICAgIF90aGlzLmF1ZGlvVmlkZW9TdWZmaXggPSBbJy5tcDMnLCAnLndtYScsICcuYXZpJywgJy5tcDQnXTsgLy8g5LiK5Lyg55qE5paH5Lu25YiX6KGoCgogICAgX3RoaXMuZmlsZUxpc3QgPSBbXTsKICAgIHJldHVybiBfdGhpczsKICB9CiAgLyoqDQogICAqIOeUn+WRveWRqOacn+mSqeWtkA0KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhNZWRpYUFkZERpYWxvZywgW3sKICAgIGtleTogImNyZWF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7fQogICAgLyoqDQogICAgICog5paH5Lu254q25oCB5pS55Y+Y5pe255qE6ZKp5a2QDQogICAgICovCiAgICAvLyDmlofku7bliIblnZfkuIrkvKAgCgogIH0sIHsKICAgIGtleTogImhhbmRsZUNoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBmaWxlTGlzdDsKICAgICAgdXBsb2FkQnlQaWVjZXMoewogICAgICAgIGZpbGU6IGZpbGUsCiAgICAgICAgcGllY2VTaXplOiA1LAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkgewogICAgICAgICAgZmlsZS5wZXJjZW50YWdlID0gZGF0YS5udW0gLyBkYXRhLmNodW5rQ291bnQgKiAxMDA7CiAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2Vzczo6JyArIGRhdGEpOwogICAgICAgIH0sCiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKGUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUsIGZpbGVMaXN0KTsgLy8g5Ye66ZSZ5LqG5Y+v5Lul5LuO5YiX6KGo5Lit5Yig6Zmk5ZCnCiAgICAgICAgICAvLyBmaWxlTGlzdC5mb3JFYWNoKChuLGkpID0+IHsgaWYobi51aWQgPT0gZmlsZS51aWQpewogICAgICAgICAgLy8gICBmaWxlTGlzdC5zcGxpY2UoaSwxKQogICAgICAgICAgLy8gfSB9KQoKICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcjo6JyArICfop4bpopHliIbniYfkuIrkvKDlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5LiK5Lyg5paH5Lu25LmL5YmN55qE6ZKp5a2QDQogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZUJlZm9yZVVwbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIHZhbGlkU3VmZml4ID0gdGhpcy5tc0RvY3VtZW50U3VmZml4LmNvbmNhdCh0aGlzLmF1ZGlvVmlkZW9TdWZmaXgpOwogICAgICB2YXIgZmlsZW5hbWUgPSBmaWxlLm5hbWU7CiAgICAgIHZhciBpbmRleCA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgIHZhciBzdWZmaXggPSBmaWxlbmFtZS5zdWJzdHIoaW5kZXgpOwogICAgICB2YXIgaXNWYWxpZCA9IHZhbGlkU3VmZml4LmluZGV4T2Yoc3VmZml4KSAhPT0gLTE7CgogICAgICBpZiAoIWlzVmFsaWQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJcdTRFMEFcdTRGMjBcdTVBOTJcdThENDRcdTY1ODdcdTRFRjZcdTUzRUFcdTgwRkRcdTY2MkYgIi5jb25jYXQodmFsaWRTdWZmaXgudG9TdHJpbmcoKSwgIiBcdTY4M0NcdTVGMEZcdUZGMDEiKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpc1ZhbGlkOwogICAgfQogICAgLyoqDQogICAgICog6KaG55uW6buY6K6k55qE5LiK5Lyg6KGM5Li6DQogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZUh0dHBSZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVIdHRwUmVxdWVzdChvcHRpb25zKSB7CiAgICAgIHZhciBmaWxlID0gb3B0aW9ucy5maWxlOwogICAgICB2YXIgZmlsZW5hbWUgPSBmaWxlLm5hbWU7CiAgICAgIHZhciBpbmRleCA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgIHZhciBzdWZmaXggPSBmaWxlbmFtZS5zdWJzdHIoaW5kZXgpOwoKICAgICAgaWYgKHRoaXMuYXVkaW9WaWRlb1N1ZmZpeC5pbmRleE9mKHN1ZmZpeCkgIT09IC0xKSB7CiAgICAgICAgLy8g6Z+zL+inhumikeS4iuS8oOWIsOmYv+mHjOS6kQogICAgICAgIHRoaXMuYWxpeXVuVXBsb2FkKGZpbGUpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOaWh+aho+S4iuS8oOWIsOS4g+eJm+S6kQogICAgICAgIHRoaXMucWluaXV5dW5VcGxvYWQoZmlsZSk7CiAgICAgIH0KICAgIH0KICAgIC8qKg0KICAgICAqIOaWh+aho+S4iuS8oOWIsOS4g+eJm+S6kQ0KICAgICAqIFRPRE86IOW8guW4uOezu+iAg+iZkSA0MDENCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicWluaXV5dW5VcGxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHFpbml1eXVuVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcW5QYXJhbXMsIHRva2VuLCBjb25maWcsIHB1dEV4dHJhLCBrZXksIG5leHQsIGVycm9yLCBjb21wbGV0ZSwgc3Vic2NyaXB0aW9uLCBvYnNlcnZhYmxlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHFpbml1eXVuVXBsb2FkJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGdldFFuUGFyYW1zKCkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHFuUGFyYW1zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAvLyDlvIDlp4vkuIrkvKAKICAgICAgICAgICAgICB0b2tlbiA9IHFuUGFyYW1zLnFuVG9rZW47CiAgICAgICAgICAgICAgY29uZmlnID0gewogICAgICAgICAgICAgICAgdXNlQ2RuRG9tYWluOiB0cnVlLAogICAgICAgICAgICAgICAgcmVnaW9uOiBudWxsIC8vIOiHquWKqOWIhuaekOS4iuS8oOWfn+WQjeWMuuWfnwoKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHB1dEV4dHJhID0gewogICAgICAgICAgICAgICAgZm5hbWU6ICcnLAogICAgICAgICAgICAgICAgcGFyYW1zOiB7fSwKICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBudWxsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBrZXkgPSBxblBhcmFtcy5rZXk7CgogICAgICAgICAgICAgIG5leHQgPSBmdW5jdGlvbiBuZXh0KHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICAgICAgICAgIHZhciBwZXJjZW50YWdlID0gTWF0aC5jZWlsKHRvdGFsLnBlcmNlbnQpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlx1NUE5Mlx1OEQ0NFx1NEUwQVx1NEYyMFx1NTIzMFx1NEUwM1x1NzI1Qlx1NEU5MVx1OEZEQlx1NUVBNi4uLiIuY29uY2F0KHBlcmNlbnRhZ2UsICIlIikpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOyAvLyDmm7TmlrDkuIrkvKDov5vluqYKCiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEZpbGUgPSBfdGhpczIuZmlsZUxpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZS51aWQgPT0gaXRlbS51aWQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbGUpIHsKICAgICAgICAgICAgICAgICAgY3VycmVudEZpbGUucGVyY2VudGFnZSA9IHBlcmNlbnRhZ2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihyZXNwb25zZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+Wqkui1hOS4iuS8oOWIsOS4g+eJm+S6keWksei0pS4uLicpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflqpLotYTkuIrkvKDliLDkuIPniZvkupHlrozmiJAuLi4nKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsgLy8g5L+d5a2Y5aqS6LWE5L+h5oGvCgogICAgICAgICAgICAgICAgX3RoaXMyLnNhdmVRaW5pdXl1bk1lZGlhKGZpbGUubmFtZSwgcW5QYXJhbXMpOwogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIC8vIOiwg+eUqHNka+S4iuS8oOaOpeWPo+iOt+W+l+ebuOW6lOeahG9ic2VydmFibGXvvIzmjqfliLbkuIrkvKDlkozmmoLlgZwKICAgICAgICAgICAgICBvYnNlcnZhYmxlID0gcWluaXUudXBsb2FkKGZpbGUsIGtleSwgdG9rZW4sIHB1dEV4dHJhLCBjb25maWcpOwogICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+Wqkui1hOS4iuS8oOWIsOS4g+eJm+S6keW8gOWniy4uLicpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDpn7Mv6KeG6aKR5LiK5Lyg5Yiw6Zi/6YeM5LqRDQogICAgICogVE9ETzog5byC5bi457O76ICD6JmRDQogICAgICovCgogIH0sIHsKICAgIGtleTogImFsaXl1blVwbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWxpeXVuVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGZpbGVOYW1lLCBpbmRleCwgdGl0bGUsIGJvZHksIHZvZFRva2VuLCB1c2VyRGF0YSwgdXBsb2FkZXI7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gYWxpeXVuVXBsb2FkJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBmaWxlTmFtZSA9IGZpbGUubmFtZTsKICAgICAgICAgICAgICBpbmRleCA9IGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgICAgICAgICAgdGl0bGUgPSBmaWxlTmFtZS5zdWJzdHIoMCwgaW5kZXgpOwogICAgICAgICAgICAgIGJvZHkgPSB7CiAgICAgICAgICAgICAgICBmaWxlTmFtZTogZmlsZU5hbWUsCiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGdldFZvZFRva2VuKGJvZHkpKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICB2b2RUb2tlbiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIHVzZXJEYXRhID0gJ3siVm9kIjp7fX0nOwogICAgICAgICAgICAgIHVwbG9hZGVyID0gdGhpcy5jcmVhdGVVcGxvYWRlcih2b2RUb2tlbik7CiAgICAgICAgICAgICAgdXBsb2FkZXIuYWRkRmlsZShmaWxlLCBudWxsLCBudWxsLCBudWxsLCB1c2VyRGF0YSk7IC8vIOeEtuWQjuiwg+eUqCBzdGFydFVwbG9hZCDmlrnms5UsIOW8gOWni+S4iuS8oAoKICAgICAgICAgICAgICBpZiAodXBsb2FkZXIgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHVwbG9hZGVyLnN0YXJ0VXBsb2FkKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZVVwbG9hZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVVcGxvYWRlcih2b2RUb2tlbikgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciB1cGxvYWRlciA9IG5ldyBBbGl5dW5VcGxvYWQuVm9kKHsKICAgICAgICB1c2VySWQ6IHZvZFRva2VuLnVzZXJJZCwKICAgICAgICAvLyDlvIDlp4vkuIrkvKAKICAgICAgICBvblVwbG9hZHN0YXJ0ZWQ6IGZ1bmN0aW9uIG9uVXBsb2Fkc3RhcnRlZCh1cGxvYWRJbmZvKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5aqS6LWE5LiK5Lyg5Yiw6Zi/6YeM5LqR5byA5aeLLi4uJyk7CiAgICAgICAgICBjb25zb2xlLmxvZyh1cGxvYWRJbmZvKTsKICAgICAgICAgIHVwbG9hZGVyLnNldFVwbG9hZEF1dGhBbmRBZGRyZXNzKHVwbG9hZEluZm8sIHZvZFRva2VuLnVwbG9hZEF1dGgsIHZvZFRva2VuLnVwbG9hZEFkZHJlc3MsIHZvZFRva2VuLnZpZGVvSWQpOwogICAgICAgIH0sCiAgICAgICAgLy8g5paH5Lu25LiK5Lyg6L+b5bqm77yM5Y2V5L2N77ya5a2X6IqCLCDlj6/ku6XlnKjov5nkuKrlh73mlbDkuK3mi7/liLDkuIrkvKDov5vluqblubbmmL7npLrlnKjpobXpnaLkuIoKICAgICAgICBvblVwbG9hZFByb2dyZXNzOiBmdW5jdGlvbiBvblVwbG9hZFByb2dyZXNzKHVwbG9hZEluZm8sIHRvdGFsU2l6ZSwgcHJvZ3Jlc3MpIHsKICAgICAgICAgIHZhciBwZXJjZW50YWdlID0gTWF0aC5jZWlsKHByb2dyZXNzICogMTAwKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJcdTVBOTJcdThENDRcdTRFMEFcdTRGMjBcdTUyMzBcdTk2M0ZcdTkxQ0NcdTRFOTFcdThGREJcdTVFQTYuLi4iLmNvbmNhdChwZXJjZW50YWdlLCAiJSIpKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHVwbG9hZEluZm8pOyAvLyDmm7TmlrDkuIrkvKDov5vluqYKCiAgICAgICAgICB2YXIgY3VycmVudEZpbGUgPSBfdGhpczMuZmlsZUxpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gdXBsb2FkSW5mby5maWxlLnVpZCA9PSBpdGVtLnVpZDsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChjdXJyZW50RmlsZSkgewogICAgICAgICAgICBjdXJyZW50RmlsZS5wZXJjZW50YWdlID0gcGVyY2VudGFnZTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIOaWh+S7tuS4iuS8oOWksei0pQogICAgICAgIG9uVXBsb2FkRmFpbGVkOiBmdW5jdGlvbiBvblVwbG9hZEZhaWxlZCh1cGxvYWRJbmZvLCBjb2RlLCBtZXNzYWdlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5aqS6LWE5LiK5Lyg5Yiw6Zi/6YeM5LqR5aSx6LSlLi4uJyk7CiAgICAgICAgICBjb25zb2xlLmxvZyh1cGxvYWRJbmZvKTsKICAgICAgICB9LAogICAgICAgIC8vIOaWh+S7tuS4iuS8oOaIkOWKnwogICAgICAgIG9uVXBsb2FkU3VjY2VlZDogZnVuY3Rpb24gb25VcGxvYWRTdWNjZWVkKHVwbG9hZEluZm8pIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCflqpLotYTkuIrkvKDliLDpmL/ph4zkupHlrozmiJAuLi4nKTsKICAgICAgICAgIGNvbnNvbGUubG9nKHVwbG9hZEluZm8pOyAvLyDkv53lrZjlqpLotYTkv6Hmga8KCiAgICAgICAgICBfdGhpczMuc2F2ZUFsaXl1bk1lZGlhKHVwbG9hZEluZm8uZmlsZS5uYW1lLCB2b2RUb2tlbik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHVwbG9hZGVyOwogICAgfQogICAgLyoqDQogICAgICog5L+d5a2Y5LiD54mb5LqR5aqS6LWE5L+h5oGvDQogICAgICovCgogIH0sIHsKICAgIGtleTogInNhdmVRaW5pdXl1bk1lZGlhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlUWluaXV5dW5NZWRpYShmaWxlbmFtZSwgcW5QYXJhbXMpIHsKICAgICAgdmFyIGJvZHk7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc2F2ZVFpbml1eXVuTWVkaWEkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGJvZHkgPSB7CiAgICAgICAgICAgICAgICBidWNrZXQ6IHFuUGFyYW1zLnNjb3BlLAogICAgICAgICAgICAgICAgZmlsZUlkOiBxblBhcmFtcy5rZXksCiAgICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZW5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiAnMDAxMDAzJywKICAgICAgICAgICAgICAgIHhjX2tleTogcW5QYXJhbXMueGNfa2V5CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzYXZlTWVkaWEoYm9keSkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDkv53lrZjpmL/ph4zkupHlqpLotYTkv6Hmga8NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic2F2ZUFsaXl1bk1lZGlhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlQWxpeXVuTWVkaWEoZmlsZW5hbWUsIHZvZFRva2VuKSB7CiAgICAgIHZhciBidWNrZXQsIGJvZHk7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gc2F2ZUFsaXl1bk1lZGlhJChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBidWNrZXQgPSBKU09OLnBhcnNlKEJhc2U2NC5kZWNvZGUodm9kVG9rZW4udXBsb2FkQWRkcmVzcykpLkJ1Y2tldDsKICAgICAgICAgICAgICBib2R5ID0gewogICAgICAgICAgICAgICAgYnVja2V0OiBidWNrZXQsCiAgICAgICAgICAgICAgICBmaWxlSWQ6IHZvZFRva2VuLnZpZGVvSWQsCiAgICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZW5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiAnMDAxMDAyJyAvLyDop4bpopEKCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChzYXZlTWVkaWEoYm9keSkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICAvKioNCiAgICAgKiDliKDpmaTmlofku7YNCiAgICAgKiBUT0RPOiDosIPnlKjliKDpmaTmjqXlj6MNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiaGFuZGxlRGVsZXRlRmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlRmlsZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXnp7vpmaTor6Xmlofku7YsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIG1lc3NhZ2U6ICfnp7vpmaTmiJDlip8hJwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojnp7vpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogICAgLyoqDQogICAgICog5YWz6Zet5a+56K+d5qGG5ZCO5Yi35paw5YiX6KGoDQogICAgICovCgogIH0sIHsKICAgIGtleTogImhhbmRsZUNsb3NlZERpYWxvZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xvc2VkRGlhbG9nKCkgewogICAgICB0aGlzLiRlbWl0KCdjbG9zZURpYWxvZycpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE1lZGlhQWRkRGlhbG9nOwp9KFZ1ZSk7Cgp0c2xpYl8xLl9fZGVjb3JhdGUoW1Byb3BTeW5jKCdkaWFsb2dWaXNpYmxlJywgewogIHR5cGU6IEJvb2xlYW4sCiAgZGVmYXVsdDogZmFsc2UKfSldLCBNZWRpYUFkZERpYWxvZy5wcm90b3R5cGUsICJzeW5jRGlhbG9nVmlzaWJsZSIsIHZvaWQgMCk7CgpNZWRpYUFkZERpYWxvZyA9IHRzbGliXzEuX19kZWNvcmF0ZShbQ29tcG9uZW50XSwgTWVkaWFBZGREaWFsb2cpOwpleHBvcnQgZGVmYXVsdCBNZWRpYUFkZERpYWxvZzs="},{"version":3,"sources":["D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Java学习\\xucheng-project\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\media-manage\\components\\media-add-dialog.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, PropSync } from 'vue-property-decorator'\r\nimport {\r\n  ElUploadInternalRawFile,\r\n  ElUploadInternalFileDetail,\r\n  HttpRequestOptions\r\n} from 'element-ui/types/upload'\r\n\r\nimport * as qiniu from 'qiniu-js'\r\nimport { Base64 } from 'js-base64'\r\nimport { IQnParamsDTO, IVodTokenDTO } from '@/entity/media-page-list'\r\nimport { getQnParams } from '@/api/common'\r\nimport { getVodToken, saveMedia } from '@/api/media'\r\nimport {uploadByPieces} from '@/utils/uploadtools'\r\n\r\n@Component\r\nexport default class MediaAddDialog extends Vue {\r\n  @PropSync('dialogVisible', { type: Boolean, default: false })\r\n  syncDialogVisible!: boolean\r\n\r\n  // 文档后缀名列表\r\n  private msDocumentSuffix: string[] = [\r\n    '.doc',\r\n    '.docx',\r\n    '.xls',\r\n    '.xlsx',\r\n    '.ppt',\r\n    '.pptx',\r\n    '.pdf'\r\n  ]\r\n  // 音/视频后缀名列表\r\n  private audioVideoSuffix: string[] = ['.mp3', '.wma', '.avi', '.mp4']\r\n  // 上传的文件列表\r\n  private fileList: ElUploadInternalFileDetail[] = []\r\n\r\n  /**\r\n   * 生命周期钩子\r\n   */\r\n  created() {}\r\n\r\n  /**\r\n   * 文件状态改变时的钩子\r\n   */\r\n  // 文件分块上传 \r\n  private handleChange(\r\n    file: ElUploadInternalFileDetail,\r\n    fileList: ElUploadInternalFileDetail[]\r\n  ) {\r\n    this.fileList = fileList\r\n    uploadByPieces({\r\n      file,\r\n      pieceSize: 5, //分片大小\r\n      success: (data) => {\r\n        file.percentage = (data.num/data.chunkCount) * 100\r\n        console.log('success::' + data)\r\n      },\r\n      error: (e) => {\r\n        console.log(file, fileList)\r\n        // 出错了可以从列表中删除吧\r\n        // fileList.forEach((n,i) => { if(n.uid == file.uid){\r\n        //   fileList.splice(i,1)\r\n        // } })\r\n        console.log('error::' + '视频分片上传失败')\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 上传文件之前的钩子\r\n   */\r\n  private handleBeforeUpload(file: ElUploadInternalRawFile) {\r\n    let validSuffix = this.msDocumentSuffix.concat(this.audioVideoSuffix)\r\n    let filename = file.name\r\n    let index = filename.lastIndexOf('.')\r\n    let suffix = filename.substr(index)\r\n\r\n    const isValid = validSuffix.indexOf(suffix) !== -1\r\n    if (!isValid) {\r\n      this.$message.error(`上传媒资文件只能是 ${validSuffix.toString()} 格式！`)\r\n    }\r\n    return isValid\r\n  }\r\n\r\n  /**\r\n   * 覆盖默认的上传行为\r\n   */\r\n  private handleHttpRequest(options: HttpRequestOptions) {\r\n    let file = options.file\r\n    let filename = file.name\r\n    let index = filename.lastIndexOf('.')\r\n    let suffix = filename.substr(index)\r\n\r\n    if (this.audioVideoSuffix.indexOf(suffix) !== -1) {\r\n      // 音/视频上传到阿里云\r\n      this.aliyunUpload(file)\r\n    } else {\r\n      // 文档上传到七牛云\r\n      this.qiniuyunUpload(file)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 文档上传到七牛云\r\n   * TODO: 异常系考虑 401\r\n   */\r\n  private async qiniuyunUpload(file: ElUploadInternalFileDetail) {\r\n    // 准备工作\r\n    let qnParams: IQnParamsDTO = await getQnParams()\r\n\r\n    // 开始上传\r\n    let token = qnParams.qnToken\r\n    let config = {\r\n      useCdnDomain: true,\r\n      region: null // 自动分析上传域名区域\r\n    }\r\n    let putExtra = {\r\n      fname: '',\r\n      params: {},\r\n      mimeType: null\r\n    }\r\n    let key = qnParams.key\r\n\r\n    let next = response => {\r\n      let total = response.total\r\n      let percentage = Math.ceil(total.percent)\r\n      console.log(`媒资上传到七牛云进度...${percentage}%`)\r\n      console.log(response)\r\n\r\n      // 更新上传进度\r\n      let currentFile = this.fileList.find(\r\n        (item: ElUploadInternalFileDetail) => {\r\n          return file.uid == item.uid\r\n        }\r\n      )\r\n      if (currentFile) {\r\n        currentFile.percentage = percentage\r\n      }\r\n    }\r\n    let error = response => {\r\n      console.log('媒资上传到七牛云失败...')\r\n      console.log(response)\r\n    }\r\n    let complete = response => {\r\n      console.log('媒资上传到七牛云完成...')\r\n      console.log(response)\r\n\r\n      // 保存媒资信息\r\n      this.saveQiniuyunMedia(file.name, qnParams)\r\n    }\r\n\r\n    let subscription\r\n    // 调用sdk上传接口获得相应的observable，控制上传和暂停\r\n    let observable = qiniu.upload(file, key, token, putExtra, config)\r\n    observable.subscribe(next, error, complete)\r\n    console.log('媒资上传到七牛云开始...')\r\n  }\r\n\r\n  /**\r\n   * 音/视频上传到阿里云\r\n   * TODO: 异常系考虑\r\n   */\r\n  private async aliyunUpload(file: ElUploadInternalFileDetail) {\r\n    let fileName = file.name\r\n    let index = fileName.lastIndexOf('.')\r\n    let title = fileName.substr(0, index)\r\n    let body = {\r\n      fileName: fileName,\r\n      title: title\r\n    }\r\n    let vodToken: IVodTokenDTO = await getVodToken(body)\r\n\r\n    let userData = '{\"Vod\":{}}'\r\n    let uploader = this.createUploader(vodToken)\r\n    uploader.addFile(file, null, null, null, userData)\r\n    // 然后调用 startUpload 方法, 开始上传\r\n    if (uploader !== null) {\r\n      uploader.startUpload()\r\n    }\r\n  }\r\n\r\n  private createUploader(vodToken: IVodTokenDTO) {\r\n    let uploader = new AliyunUpload.Vod({\r\n      userId: vodToken.userId,\r\n      // 开始上传\r\n      onUploadstarted: uploadInfo => {\r\n        console.log('媒资上传到阿里云开始...')\r\n        console.log(uploadInfo)\r\n        uploader.setUploadAuthAndAddress(\r\n          uploadInfo,\r\n          vodToken.uploadAuth,\r\n          vodToken.uploadAddress,\r\n          vodToken.videoId\r\n        )\r\n      },\r\n      // 文件上传进度，单位：字节, 可以在这个函数中拿到上传进度并显示在页面上\r\n      onUploadProgress: (uploadInfo, totalSize, progress) => {\r\n        let percentage = Math.ceil(progress * 100)\r\n        console.log(`媒资上传到阿里云进度...${percentage}%`)\r\n        console.log(uploadInfo)\r\n\r\n        // 更新上传进度\r\n        let currentFile = this.fileList.find(\r\n          (item: ElUploadInternalFileDetail) => {\r\n            return uploadInfo.file.uid == item.uid\r\n          }\r\n        )\r\n        if (currentFile) {\r\n          currentFile.percentage = percentage\r\n        }\r\n      },\r\n      // 文件上传失败\r\n      onUploadFailed: (uploadInfo, code, message) => {\r\n        console.log('媒资上传到阿里云失败...')\r\n        console.log(uploadInfo)\r\n      },\r\n      // 文件上传成功\r\n      onUploadSucceed: uploadInfo => {\r\n        console.log('媒资上传到阿里云完成...')\r\n        console.log(uploadInfo)\r\n\r\n        // 保存媒资信息\r\n        this.saveAliyunMedia(uploadInfo.file.name, vodToken)\r\n      }\r\n    })\r\n    return uploader\r\n  }\r\n\r\n  /**\r\n   * 保存七牛云媒资信息\r\n   */\r\n  private async saveQiniuyunMedia(filename: string, qnParams: IQnParamsDTO) {\r\n    let body = {\r\n      bucket: qnParams.scope,\r\n      fileId: qnParams.key,\r\n      filename: filename,\r\n      type: '001003', // 文档\r\n      xc_key: qnParams.xc_key\r\n    }\r\n    await saveMedia(body)\r\n  }\r\n\r\n  /**\r\n   * 保存阿里云媒资信息\r\n   */\r\n  private async saveAliyunMedia(filename: string, vodToken: IVodTokenDTO) {\r\n    let bucket = JSON.parse(Base64.decode(vodToken.uploadAddress)).Bucket\r\n    let body = {\r\n      bucket: bucket,\r\n      fileId: vodToken.videoId,\r\n      filename: filename,\r\n      type: '001002' // 视频\r\n    }\r\n    await saveMedia(body)\r\n  }\r\n\r\n  /**\r\n   * 删除文件\r\n   * TODO: 调用删除接口\r\n   */\r\n  private handleDeleteFile() {\r\n    this.$confirm('此操作将永久移除该文件, 是否继续?', '提示', {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    })\r\n      .then(() => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '移除成功!'\r\n        })\r\n      })\r\n      .catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消移除'\r\n        })\r\n      })\r\n  }\r\n\r\n  /**\r\n   * 关闭对话框后刷新列表\r\n   */\r\n  private handleClosedDialog() {\r\n    this.$emit('closeDialog')\r\n  }\r\n}\r\n"],"sourceRoot":""}]}