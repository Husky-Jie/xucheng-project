{"remainingRequest":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\work-manage\\work-list.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\work-manage\\work-list.vue","mtime":1586849107728},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"E:\\course\\2022\\学成在线\\front_code\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJ0AvY29tcG9uZW50cy9wYWdpbmF0aW9uL2luZGV4LnZ1ZScNCmltcG9ydCBXb3JrQWRkRGlhbG9nIGZyb20gJy4vY29tcG9uZW50cy93b3JrLWFkZC1kaWFsb2cudnVlJw0KaW1wb3J0IHsgSVdvcmtQYWdlTGlzdCwgSVdvcmtEVE8sIElXb3JrVk8gfSBmcm9tICdAL2VudGl0eS93b3JrLXBhZ2UtbGlzdCcNCmltcG9ydCB7IGdldFdvcmtQYWdlTGlzdCwgZGVsZXRlV29yaywgZGVmYXVsdFdvcmsgfSBmcm9tICdAL2FwaS93b3JrcycNCg0KQENvbXBvbmVudCh7DQogIGNvbXBvbmVudHM6IHsNCiAgICBQYWdpbmF0aW9uLA0KICAgIFdvcmtBZGREaWFsb2cNCiAgfSwNCiAgZmlsdGVyczogew0KICAgIGJpbmRDb3Vyc2VzRm9ybWF0OiAodmFsdWU6IHN0cmluZ1tdKSA9PiB7DQogICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZS5sZW5ndGggPT0gMCkgew0KICAgICAgICByZXR1cm4gJycNCiAgICAgIH0NCiAgICAgIHJldHVybiAn44CKJyArIHZhbHVlLmpvaW4oJ+OAi++8jOOAiicpICsgJ+OAiycNCiAgICB9DQogIH0NCn0pDQpleHBvcnQgZGVmYXVsdCBjbGFzcyBXb3JrTGlzdCBleHRlbmRzIFZ1ZSB7DQogIC8vIOaYr+WQpui9veWFpeS4rQ0KICBwcml2YXRlIGxpc3RMb2FkaW5nOiBib29sZWFuID0gZmFsc2UNCiAgLy8g6K+35rGC5Y+C5pWwUXVlcnkNCiAgcHJpdmF0ZSBsaXN0UXVlcnkgPSB7DQogICAgcGFnZU5vOiAxLA0KICAgIHBhZ2VTaXplOiAxMA0KICB9DQogIC8vIOS9nOS4muWIl+ihqA0KICBwcml2YXRlIGxpc3RSZXN1bHQ6IElXb3JrUGFnZUxpc3QgPSB7fQ0KICAvLyDmlrDlop7kvZzkuJrlr7nor53moYYNCiAgcHJpdmF0ZSBkaWFsb2dWaXNpYmxlOiBib29sZWFuID0gZmFsc2UNCiAgLy8g5Y2V5p2h5L2c5LiaDQogIHByaXZhdGUgd29yazogSVdvcmtWTyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRXb3JrKQ0KDQogIC8qKg0KICAgKiDkvZzkuJrliJfooagNCiAgICovDQogIHByaXZhdGUgYXN5bmMgZ2V0V29ya1BhZ2VMaXN0KCkgew0KICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlDQogICAgdGhpcy5saXN0UmVzdWx0ID0gYXdhaXQgZ2V0V29ya1BhZ2VMaXN0KHRoaXMubGlzdFF1ZXJ5KQ0KICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQ0KICB9DQoNCiAgLyoqDQogICAqIOaWsOWinuS9nOS4mg0KICAgKi8NCiAgcHJpdmF0ZSBoYW5kbGVPcGVuQWRkV29ya0RpYWxvZygpIHsNCiAgICB0aGlzLndvcmsgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0V29yaykNCiAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogIH0NCg0KICAvKioNCiAgICog57yW6L6R5L2c5LiaDQogICAqLw0KICBwcml2YXRlIGhhbmRsZU9wZW5FZGl0V29ya0RpYWxvZyhyb3c6IElXb3JrRFRPKSB7DQogICAgdGhpcy53b3JrLndvcmtJZCA9IHJvdy53b3JrSWQNCiAgICB0aGlzLndvcmsudGl0bGUgPSByb3cudGl0bGUNCiAgICB0aGlzLndvcmsucXVlc3Rpb24gPSByb3cucXVlc3Rpb24NCiAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogIH0NCg0KICAvKioNCiAgICog56e76Zmk5L2c5LiaDQogICAqIFRPRE86IOetieW+heWQjuWPsOS4muWKoeehruiupA0KICAgKi8NCiAgcHJpdmF0ZSBoYW5kbGVPcGVuRGVsZXRlV29ya0NvbmZpcm0od29ya0lkOiBudW1iZXIpIHsNCiAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXnp7vpmaTor6XkvZzkuJosIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICB0eXBlOiAnd2FybmluZycNCiAgICB9KQ0KICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gew0KICAgICAgICBsZXQgd29yazogSVdvcmtEVE8gPSBhd2FpdCBkZWxldGVXb3JrKHdvcmtJZCkNCiAgICAgICAgdGhpcy5nZXRXb3JrUGFnZUxpc3QoKQ0KDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICBtZXNzYWdlOiAn56e76Zmk5oiQ5YqfIScNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOenu+mZpCcNCiAgICAgICAgfSkNCiAgICAgIH0pDQogIH0NCg0KICAvLyDnm5Hmjqcgd2F0Y2gNCiAgLy8g5pCc57Si5qCPDQogIEBXYXRjaCgnbGlzdFF1ZXJ5RGF0YScsIHsgZGVlcDogdHJ1ZSwgaW1tZWRpYXRlOiB0cnVlIH0pDQogIHByaXZhdGUgd2F0Y2hMaXN0UXVlcnlEYXRhKG5ld1ZhbDogc3RyaW5nKSB7DQogICAgaWYgKG5ld1ZhbCA9PSAnJykgew0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIHRoaXMuZ2V0V29ya1BhZ2VMaXN0KCkNCiAgfQ0KDQogIC8vIOe/u+mhtSBwYWdlU2l6ZQ0KICBAV2F0Y2goJ2xpc3RRdWVyeS5wYWdlU2l6ZScsIHsgaW1tZWRpYXRlOiB0cnVlIH0pDQogIHByaXZhdGUgd2F0Y2hMaXN0UXVlcnlQYWdlU2l6ZShuZXdWYWw6IG51bWJlcikgew0KICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VObyA9IDENCiAgfQ0KfQ0K"},{"version":3,"sources":["work-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"work-list.vue","sourceRoot":"src/module-organization/pages/work-manage","sourcesContent":["<template>\r\n  <div class=\"course-list portal-content\">\r\n    <div class=\"workspace\">\r\n      <div class=\"banner\">\r\n        <span class=\"primary-title\">作业管理</span>\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"medium\"\r\n          class=\"btn-add el-button\"\r\n          @click=\"handleOpenAddWorkDialog\"\r\n        >+新增作业</el-button>\r\n      </div>\r\n\r\n      <!-- 数据列表 -->\r\n      <el-table\r\n        class=\"dataList\"\r\n        v-loading=\"listLoading\"\r\n        :data=\"listResult.items\"\r\n        border\r\n        style=\"width: 100%\"\r\n        :header-cell-style=\"{ textAlign: 'center' }\"\r\n      >\r\n        <el-table-column prop=\"title\" label=\"作业信息\" width=\"400\" align=\"center\"></el-table-column>\r\n\r\n        <el-table-column label=\"绑定课程\" align=\"center\">\r\n          <template slot-scope=\"scope\">{{ scope.row.bindCourses | bindCoursesFormat }}</template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"userNum\" label=\"答题人数\" align=\"center\"></el-table-column>\r\n\r\n        <el-table-column label=\"修改时间\" align=\"center\">\r\n          <template slot-scope=\"scope\">{{ scope.row.changeDate | dateTimeFormat }}</template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"操作\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" size=\"mini\" @click=\"handleOpenEditWorkDialog(scope.row)\">编辑</el-button>\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"mini\"\r\n              @click=\"handleOpenDeleteWorkConfirm(scope.row.workId)\"\r\n            >移除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 翻页控制 -->\r\n      <div class=\"dataList-pagination\">\r\n        <Pagination\r\n          v-show=\"listResult.counts > 0\"\r\n          :total=\"listResult.counts\"\r\n          :page.sync=\"listQuery.pageNo\"\r\n          :limit.sync=\"listQuery.pageSize\"\r\n          @pagination=\"getWorkPageList\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 上传资料对话框 -->\r\n    <work-add-dialog\r\n      :dialogVisible.sync=\"dialogVisible\"\r\n      :work=\"work\"\r\n      @refreshList=\"getWorkPageList\"\r\n    ></work-add-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Watch } from 'vue-property-decorator'\r\nimport Pagination from '@/components/pagination/index.vue'\r\nimport WorkAddDialog from './components/work-add-dialog.vue'\r\nimport { IWorkPageList, IWorkDTO, IWorkVO } from '@/entity/work-page-list'\r\nimport { getWorkPageList, deleteWork, defaultWork } from '@/api/works'\r\n\r\n@Component({\r\n  components: {\r\n    Pagination,\r\n    WorkAddDialog\r\n  },\r\n  filters: {\r\n    bindCoursesFormat: (value: string[]) => {\r\n      if (value == null || value.length == 0) {\r\n        return ''\r\n      }\r\n      return '《' + value.join('》，《') + '》'\r\n    }\r\n  }\r\n})\r\nexport default class WorkList extends Vue {\r\n  // 是否载入中\r\n  private listLoading: boolean = false\r\n  // 请求参数Query\r\n  private listQuery = {\r\n    pageNo: 1,\r\n    pageSize: 10\r\n  }\r\n  // 作业列表\r\n  private listResult: IWorkPageList = {}\r\n  // 新增作业对话框\r\n  private dialogVisible: boolean = false\r\n  // 单条作业\r\n  private work: IWorkVO = Object.assign({}, defaultWork)\r\n\r\n  /**\r\n   * 作业列表\r\n   */\r\n  private async getWorkPageList() {\r\n    this.listLoading = true\r\n    this.listResult = await getWorkPageList(this.listQuery)\r\n    this.listLoading = false\r\n  }\r\n\r\n  /**\r\n   * 新增作业\r\n   */\r\n  private handleOpenAddWorkDialog() {\r\n    this.work = Object.assign({}, defaultWork)\r\n    this.dialogVisible = true\r\n  }\r\n\r\n  /**\r\n   * 编辑作业\r\n   */\r\n  private handleOpenEditWorkDialog(row: IWorkDTO) {\r\n    this.work.workId = row.workId\r\n    this.work.title = row.title\r\n    this.work.question = row.question\r\n    this.dialogVisible = true\r\n  }\r\n\r\n  /**\r\n   * 移除作业\r\n   * TODO: 等待后台业务确认\r\n   */\r\n  private handleOpenDeleteWorkConfirm(workId: number) {\r\n    this.$confirm('此操作将永久移除该作业, 是否继续?', '提示', {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    })\r\n      .then(async () => {\r\n        let work: IWorkDTO = await deleteWork(workId)\r\n        this.getWorkPageList()\r\n\r\n        this.$message({\r\n          type: 'success',\r\n          message: '移除成功!'\r\n        })\r\n      })\r\n      .catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消移除'\r\n        })\r\n      })\r\n  }\r\n\r\n  // 监控 watch\r\n  // 搜索栏\r\n  @Watch('listQueryData', { deep: true, immediate: true })\r\n  private watchListQueryData(newVal: string) {\r\n    if (newVal == '') {\r\n      return\r\n    }\r\n    this.getWorkPageList()\r\n  }\r\n\r\n  // 翻页 pageSize\r\n  @Watch('listQuery.pageSize', { immediate: true })\r\n  private watchListQueryPageSize(newVal: number) {\r\n    this.listQuery.pageNo = 1\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.course-list {\r\n  .nav-bar {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .workspace .banner .btn-add {\r\n    float: right;\r\n  }\r\n\r\n  .searcher {\r\n    margin-top: 16px;\r\n\r\n    div {\r\n      width: 218px;\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n\r\n  .dataList {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  .dataList-pagination {\r\n    text-align: center;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n"]}]}