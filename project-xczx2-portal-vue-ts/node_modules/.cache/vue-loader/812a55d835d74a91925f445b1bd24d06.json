{"remainingRequest":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\course-manage\\course-list.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\src\\module-organization\\pages\\course-manage\\course-list.vue","mtime":1663235363766},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1576202003988},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1660903053026},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660903053464},{"path":"D:\\itcast2022\\xc_edu3.0\\code_0\\project-xczx2-portal-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1660903053930}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBXYXRjaCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCB7IG1peGlucyB9IGZyb20gJ3Z1ZS1jbGFzcy1jb21wb25lbnQnDQppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvcGFnaW5hdGlvbi9pbmRleC52dWUnDQppbXBvcnQgQ291cnNlQWRkVHlwZURpYWxvZyBmcm9tICcuL2NvdXJzZS1hZGR0eXBlLWRpYWxvZy52dWUnDQppbXBvcnQgeyBJS1ZEYXRhIH0gZnJvbSAnQC9hcGkvdHlwZXMnIC8vIOmAmueUqCBpbnRlcmZhY2UNCmltcG9ydCB7DQogIEFVRElUX1NUQVRVUywNCiAgQ09VUlNFX0NIQVJHRV9UWVBFX1NUQVRVUywNCiAgQ09VU0VfUFVCTElDX1NUQVRVUywNCiAgQ09VU0VfVFlQRV9TVEFUVVMNCn0gZnJvbSAnQC9hcGkvY29uc3RhbnRzJyAvLyDpgJrnlKjluLjph4/lrprkuYkNCmltcG9ydCB7DQogIGxpc3QsDQogIGNvbW1pdENvdXJzZSwNCiAgcHVibGlzaENvdXJzZSwNCiAgb2ZmbGluZUNvdXJzZSwNCiAgcmVtb3ZlQ291cnNlDQp9IGZyb20gJ0AvYXBpL2NvdXJzZXMnIC8vIGFwaSBpbnRlcmZhY2Ug6K++56iLDQppbXBvcnQgeyBJQ291cnNlUGFnZUxpc3QsIElDb3Vyc2VCYXNlRFRPIH0gZnJvbSAnQC9lbnRpdHkvY291cnNlLXBhZ2UtbGlzdCcNCmltcG9ydCBNaXhpblRvb2xzIGZyb20gJ0AvdXRpbHMvbWl4aW5zLnZ1ZScNCg0KQENvbXBvbmVudCh7DQogIG5hbWU6ICdDb3Vyc2VMaXN0JywNCiAgY29tcG9uZW50czogew0KICAgIFBhZ2luYXRpb24sDQogICAgQ291cnNlQWRkVHlwZURpYWxvZw0KICB9LA0KICBmaWx0ZXJzOiB7DQogICAgYXVkaXRTdGF0dXNUZXh0OiBmdW5jdGlvbih2YWx1ZTogc3RyaW5nKSB7DQogICAgICBsZXQgZmluZHMgPSBBVURJVF9TVEFUVVMuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5jb2RlID09IHZhbHVlDQogICAgICB9KQ0KICAgICAgaWYgKGZpbmRzICYmIGZpbmRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgcmV0dXJuIGZpbmRzWzBdLmRlc2MNCiAgICAgIH0NCiAgICB9LA0KICAgIGNoYXJnZVRleHQ6IGZ1bmN0aW9uKHZhbHVlOiBzdHJpbmcpIHsNCiAgICAgIGxldCBmaW5kcyA9IENPVVJTRV9DSEFSR0VfVFlQRV9TVEFUVVMuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5jb2RlID09IHZhbHVlDQogICAgICB9KQ0KICAgICAgaWYgKGZpbmRzICYmIGZpbmRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgcmV0dXJuIGZpbmRzWzBdLmRlc2MNCiAgICAgIH0NCiAgICB9LA0KICAgIHRlYWNobW9kZVRleHQ6IGZ1bmN0aW9uKHZhbHVlOiBzdHJpbmcpIHsNCiAgICAgIGxldCBmaW5kcyA9IENPVVNFX1RZUEVfU1RBVFVTLmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgcmV0dXJuIGl0ZW0uY29kZSA9PSB2YWx1ZQ0KICAgICAgfSkNCiAgICAgIGlmIChmaW5kcyAmJiBmaW5kcy5sZW5ndGggPiAwKSB7DQogICAgICAgIHJldHVybiBmaW5kc1swXS5kZXNjDQogICAgICB9DQogICAgfQ0KICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgZXh0ZW5kcyBtaXhpbnMoTWl4aW5Ub29scykgew0KICAvLyDmlbDmja4NCiAgLy8g5a6h5qC457G75Z6LDQogIHByaXZhdGUgYWR1aXRTdGF0dXNPcHRpb25zOiBJS1ZEYXRhW10gPSBBVURJVF9TVEFUVVMNCg0KICBwcml2YXRlIGNvdXJzZVB1Ymxpc2hTdGF0dXM6IElLVkRhdGFbXSA9IENPVVNFX1BVQkxJQ19TVEFUVVMNCg0KICAvLyDnsbvlnovpgInmi6nlvLnlh7rlr7nor53moYYNCiAgcHJpdmF0ZSB0eXBlRGlhbG9nVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlIC8vIOaYr+WQpuaYvuekug0KDQogIC8vIOafpeivog0KICBwcml2YXRlIGxpc3REYXRhOiBJQ291cnNlUGFnZUxpc3QgPSB7fSAvLyDmlbDmja7kvZMNCiAgcHJpdmF0ZSBsaXN0TG9hZGluZzogYm9vbGVhbiA9IGZhbHNlIC8vIOaYr+WQpui9veWFpeS4rQ0KICAvLyBhcGkgcGFyYW1zDQogIHByaXZhdGUgbGlzdFF1ZXJ5ID0gew0KICAgIHBhZ2VObzogMSwNCiAgICBwYWdlU2l6ZTogMTANCiAgfQ0KICAvLyBhcGkgcG9zdCBib2R5DQogIHByaXZhdGUgbGlzdFF1ZXJ5RGF0YSA9IHsNCiAgICBjb3Vyc2VOYW1lOiAnJywNCiAgICBhdWRpdFN0YXR1czogJycNCiAgfQ0KDQogIC8vIOS4muWKoeWHveaVsA0KICBwcml2YXRlIGFzeW5jIGdldExpc3QoKSB7DQogICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWUNCiAgICB0aGlzLmxpc3REYXRhID0gYXdhaXQgbGlzdCh0aGlzLmxpc3RRdWVyeSwgdGhpcy5saXN0UXVlcnlEYXRhKQ0KICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQ0KICB9DQoNCiAgLy8g55Sf5ZG95ZGo5pyfIGxpZmUNCiAgY3JlYXRlZCgpIHsNCiAgICAvLyB0aGlzLmdldExpc3QoKTsNCiAgfQ0KDQogIC8vIOS6i+S7tiBoYW5kbGUNCiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVQcmV2aWV3KGluZGV4OiBudW1iZXIsIHJvdzogSUNvdXJzZUJhc2VEVE8pIHsNCiAgICBpZiAocm93LmNvdXJzZUJhc2VJZCkgew0KICAgICAgd2luZG93Lm9wZW4oDQogICAgICAgIGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfU0VSVkVSX0FQSV9VUkx9L2NvbnRlbnQvY291cnNlL3ByZXZpZXcvJHtyb3cuY291cnNlQmFzZUlkfWAsDQogICAgICAgICdfYmxhbmsnDQogICAgICApDQogICAgICAvLyB3aW5kb3cub3BlbigNCiAgICAgIC8vICAgYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9TRVJWRVJfQVBJX1VSTH0vY29udGVudC9jb3Vyc2UvcHJldmlldy8ke3Jvdy5jb3Vyc2VCYXNlSWR9LyR7cm93LmNvbXBhbnlJZH1gLA0KICAgICAgLy8gICAnX2JsYW5rJw0KICAgICAgLy8gKQ0KICAgIH0NCiAgfQ0KICBwcml2YXRlIGhhbmRsZUVkaXQoaW5kZXg6IG51bWJlciwgcm93OiBJQ291cnNlQmFzZURUTykgew0KICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgIHBhdGg6IGAvb3JnYW5pemF0aW9uL2NvdXJzZS1hZGQ/Y291cnNlQmFzZUlkPSR7cm93LmlkfSZ0ZWFjaG1vZGU9JHtyb3cudGVhY2htb2RlfWANCiAgICAgIC8vcGF0aDogYC9vcmdhbml6YXRpb24vY291cnNlLWFkZD9jb3Vyc2VCYXNlSWQ9JHtyb3cuY291cnNlQmFzZUlkfSZ0ZWFjaG1vZGU9JHtyb3cudGVhY2htb2RlfWANCiAgICB9KQ0KICB9DQogIHByaXZhdGUgYXN5bmMgaGFuZGxlQ29tbWl0KGluZGV4OiBudW1iZXIsIHJvdzogSUNvdXJzZUJhc2VEVE8pIHsNCiAgICBpZiAocm93LmNvdXJzZUJhc2VJZCkgew0KICAgICAgYXdhaXQgY29tbWl0Q291cnNlKHJvdy5jb3Vyc2VCYXNlSWQpDQogICAgICBhd2FpdCB0aGlzLmdldExpc3QoKQ0KICAgIH0NCiAgfQ0KICBwcml2YXRlIGFzeW5jIGhhbmRsZVB1Ymxpc2goaW5kZXg6IG51bWJlciwgcm93OiBJQ291cnNlQmFzZURUTykgew0KICAgIGlmIChyb3cuY291cnNlQmFzZUlkKSB7DQogICAgICBhd2FpdCBwdWJsaXNoQ291cnNlKHJvdy5jb3Vyc2VCYXNlSWQpDQogICAgICBhd2FpdCB0aGlzLmdldExpc3QoKQ0KICAgIH0NCiAgfQ0KICBwcml2YXRlIGFzeW5jIGhhbmRsZVZpZXdEZXRhaWwoaW5kZXg6IG51bWJlciwgcm93OiBJQ291cnNlQmFzZURUTykgew0KICAgIGlmIChyb3cuY291cnNlUHViSWQpIHsNCiAgICAgIHdpbmRvdy5vcGVuKA0KICAgICAgICBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX1NFUlZFUl9RSU5JVV9VUkx9L2NvdXJzZV9wdWIvJHtyb3cuY291cnNlUHViSWR9Lmh0bWxgLA0KICAgICAgICAnX2JsYW5rJw0KICAgICAgKQ0KICAgIH0NCiAgfQ0KICBwcml2YXRlIGFzeW5jIGhhbmRsZU9mZmxpbmUoaW5kZXg6IG51bWJlciwgcm93OiBJQ291cnNlQmFzZURUTykgew0KICAgIGlmIChyb3cuY291cnNlQmFzZUlkKSB7DQogICAgICBhd2FpdCBvZmZsaW5lQ291cnNlKHJvdy5jb3Vyc2VCYXNlSWQpDQogICAgICBhd2FpdCB0aGlzLmdldExpc3QoKQ0KICAgIH0NCiAgfQ0KICBwcml2YXRlIGFzeW5jIGhhbmRsZURlbGV0ZShpbmRleDogbnVtYmVyLCByb3c6IElDb3Vyc2VCYXNlRFRPKSB7DQogICAgdHJ5IHsNCiAgICAgIGF3YWl0IHRoaXMuc2hvd0RlbGV0ZUNvbmZpcm0oKQ0KICAgICAgaWYgKHJvdy5jb3Vyc2VCYXNlSWQpIHsNCiAgICAgICAgYXdhaXQgcmVtb3ZlQ291cnNlKHJvdy5jb3Vyc2VCYXNlSWQpDQogICAgICAgIGF3YWl0IHRoaXMuZ2V0TGlzdCgpDQogICAgICB9DQogICAgfSBjYXRjaCAoZXJyb3IpIHt9DQogIH0NCiAgcHJpdmF0ZSBoYW5kbGVTaG93VHlwZURsZygpIHsNCiAgICB0aGlzLnR5cGVEaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICB9DQoNCiAgLy8g55uR5o6nIHdhdGNoDQogIC8vIOaQnOe0ouagjw0KICBAV2F0Y2goJ2xpc3RRdWVyeURhdGEnLCB7IGRlZXA6IHRydWUsIGltbWVkaWF0ZTogdHJ1ZSB9KQ0KICBwcml2YXRlIHdhdGNoTGlzdFF1ZXJ5RGF0YShuZXdWYWw6IHN0cmluZykgew0KICAgIGlmIChuZXdWYWwgPT0gJycpIHsNCiAgICAgIHJldHVybg0KICAgIH0NCiAgICB0aGlzLmdldExpc3QoKQ0KICB9DQogIC8vIOe/u+mhtSBwYWdlU2l6ZQ0KICBAV2F0Y2goJ2xpc3RRdWVyeS5wYWdlU2l6ZScsIHsgaW1tZWRpYXRlOiB0cnVlIH0pDQogIHByaXZhdGUgd2F0Y2hMaXN0UXVlcnlQYWdlU2l6ZShuZXdWYWw6IG51bWJlcikgew0KICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VObyA9IDENCiAgfQ0KfQ0K"},{"version":3,"sources":["course-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"course-list.vue","sourceRoot":"src/module-organization/pages/course-manage","sourcesContent":["<template>\r\n  <div class=\"workspace\">\r\n    <div class=\"banner\">\r\n      <span class=\"primary-title\">课程管理</span>\r\n      <el-button\r\n        type=\"primary\"\r\n        size=\"medium\"\r\n        class=\"btn-add el-button\"\r\n        @click=\"handleShowTypeDlg\"\r\n      >+添加课程</el-button>\r\n    </div>\r\n\r\n    <!-- 搜索栏 -->\r\n    <div class=\"searcher\">\r\n      <el-input\r\n        class=\"el-input\"\r\n        placeholder=\"课程名称\"\r\n        suffix-icon=\"el-icon-search\"\r\n        v-model=\"listQueryData.courseName\"\r\n      />\r\n      <el-select v-model=\"listQueryData.auditStatus\" placeholder=\"请选择\">\r\n        <el-option\r\n          v-for=\"item in aduitStatusOptions\" \r\n          :key=\"item.code\"\r\n          :label=\"item.desc\"\r\n          :value=\"item.code\"\r\n        ></el-option>\r\n      </el-select>\r\n     <el-select v-model=\"listQueryData.publishStatus\" placeholder=\"请选择\">\r\n        <el-option\r\n          v-for=\"item in coursePublishStatus\"\r\n          :key=\"item.code\"\r\n          :label=\"item.desc\"\r\n          :value=\"item.code\"\r\n        ></el-option>\r\n      </el-select>\r\n    </div>\r\n\r\n    <!-- 数据列表 -->\r\n    <el-table\r\n      class=\"dataList\"\r\n      v-loading=\"listLoading\"\r\n      :data=\"listData.items\"\r\n      border\r\n      style=\"width: 100%\"\r\n      :header-cell-style=\"{textAlign: 'center'}\"\r\n    >\r\n      <el-table-column prop=\"name\" label=\"课程名称\" width=\"250\"></el-table-column>\r\n      <el-table-column prop=\"subsectionNum\" label=\"任务数\" align=\"center\" width=\"100\"></el-table-column>\r\n      <el-table-column label=\"创建时间\" align=\"center\" width=\"160\">\r\n        <template slot-scope=\"scope\">\r\n          <div>{{scope.row.createDate | dateTimeFormat}}</div>\r\n        </template>\r\n      </el-table-column>\r\n      <!--<el-table-column prop=\"learners\" label=\"报名人数\" align=\"center\" width=\"100\"></el-table-column>-->\r\n      <el-table-column label=\"是否付费\" align=\"center\" width=\"80\">\r\n        <template slot-scope=\"scope\">\r\n          <div>{{scope.row.charge | chargeText}}</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"审核状态\" align=\"center\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <div>\r\n            {{scope.row.auditStatus | auditStatusText}}\r\n            <br />\r\n            <el-button\r\n              v-if=\"scope.row.auditStatus == '202001'\"\r\n              type=\"text\"\r\n              size=\"mini\"\r\n              @click=\"showMessageBox(scope.row.auditMind, '审核未通过')\"\r\n            >查看审核意见</el-button>\r\n            <el-button\r\n              v-else-if=\"scope.row.auditStatus == '202005'\"\r\n              type=\"text\"\r\n              size=\"mini\"\r\n              @click=\"handleViewDetail(scope.$index, scope.row)\"\r\n            >查看课程详情</el-button>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"类型\" align=\"center\" width=\"80\">\r\n        <template slot-scope=\"scope\">\r\n          <div>{{scope.row.teachmode | teachmodeText}}</div>\r\n        </template>\r\n      </el-table-column>\r\n      <!-- TODO: 增加友好提示 -->\r\n      <el-table-column label=\"操作\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"text\"\r\n            size=\"mini\"\r\n            @click=\"handleEdit(scope.$index, scope.row)\"\r\n          >编辑</el-button>\r\n          <el-button\r\n            type=\"text\"\r\n            size=\"mini\"\r\n            :disabled=\"scope.row.auditStatus != '202001'\"\r\n            @click=\"handleDelete(scope.$index, scope.row)\"\r\n          >删除</el-button>\r\n          <el-button\r\n            type=\"text\"\r\n            size=\"mini\"\r\n            @click=\"handlePreview(scope.$index, scope.row)\"\r\n          >预览</el-button>\r\n          <el-button\r\n            type=\"text\"\r\n            size=\"mini\"\r\n            :disabled=\"scope.row.auditStatus == '202003'\"\r\n            @click=\"handleCommit(scope.$index, scope.row)\"\r\n          >提交审核</el-button>\r\n          <el-button\r\n            type=\"text\"\r\n            size=\"mini\"\r\n            :disabled=\"scope.row.status == '203002' && scope.row.auditStatus == '202004' \"\r\n            @click=\"handlePublish(scope.$index, scope.row)\"\r\n          >发布</el-button>\r\n          <el-button\r\n            type=\"text\"\r\n            size=\"mini\"\r\n            :disabled=\"scope.row.status != '203002'\"\r\n            @click=\"handleOffline(scope.$index, scope.row)\"\r\n          >下架</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 翻页控制 -->\r\n    <div class=\"dataList-pagination\">\r\n      <Pagination\r\n        v-show=\"listData.counts > 0\"\r\n        :total=\"listData.counts\"\r\n        :page.sync=\"listQuery.pageNo\"\r\n        :limit.sync=\"listQuery.pageSize\"\r\n        @pagination=\"getList\"\r\n      />\r\n    </div>\r\n\r\n    <!-- 类型提示框 -->\r\n    <CourseAddTypeDialog :dialogVisible.sync=\"typeDialogVisible\"></CourseAddTypeDialog>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Watch, Vue } from 'vue-property-decorator'\r\nimport { mixins } from 'vue-class-component'\r\nimport Pagination from '@/components/pagination/index.vue'\r\nimport CourseAddTypeDialog from './course-addtype-dialog.vue'\r\nimport { IKVData } from '@/api/types' // 通用 interface\r\nimport {\r\n  AUDIT_STATUS,\r\n  COURSE_CHARGE_TYPE_STATUS,\r\n  COUSE_PUBLIC_STATUS,\r\n  COUSE_TYPE_STATUS\r\n} from '@/api/constants' // 通用常量定义\r\nimport {\r\n  list,\r\n  commitCourse,\r\n  publishCourse,\r\n  offlineCourse,\r\n  removeCourse\r\n} from '@/api/courses' // api interface 课程\r\nimport { ICoursePageList, ICourseBaseDTO } from '@/entity/course-page-list'\r\nimport MixinTools from '@/utils/mixins.vue'\r\n\r\n@Component({\r\n  name: 'CourseList',\r\n  components: {\r\n    Pagination,\r\n    CourseAddTypeDialog\r\n  },\r\n  filters: {\r\n    auditStatusText: function(value: string) {\r\n      let finds = AUDIT_STATUS.filter(item => {\r\n        return item.code == value\r\n      })\r\n      if (finds && finds.length > 0) {\r\n        return finds[0].desc\r\n      }\r\n    },\r\n    chargeText: function(value: string) {\r\n      let finds = COURSE_CHARGE_TYPE_STATUS.filter(item => {\r\n        return item.code == value\r\n      })\r\n      if (finds && finds.length > 0) {\r\n        return finds[0].desc\r\n      }\r\n    },\r\n    teachmodeText: function(value: string) {\r\n      let finds = COUSE_TYPE_STATUS.filter(item => {\r\n        return item.code == value\r\n      })\r\n      if (finds && finds.length > 0) {\r\n        return finds[0].desc\r\n      }\r\n    }\r\n  }\r\n})\r\nexport default class extends mixins(MixinTools) {\r\n  // 数据\r\n  // 审核类型\r\n  private aduitStatusOptions: IKVData[] = AUDIT_STATUS\r\n\r\n  private coursePublishStatus: IKVData[] = COUSE_PUBLIC_STATUS\r\n\r\n  // 类型选择弹出对话框\r\n  private typeDialogVisible: boolean = false // 是否显示\r\n\r\n  // 查询\r\n  private listData: ICoursePageList = {} // 数据体\r\n  private listLoading: boolean = false // 是否载入中\r\n  // api params\r\n  private listQuery = {\r\n    pageNo: 1,\r\n    pageSize: 10\r\n  }\r\n  // api post body\r\n  private listQueryData = {\r\n    courseName: '',\r\n    auditStatus: ''\r\n  }\r\n\r\n  // 业务函数\r\n  private async getList() {\r\n    this.listLoading = true\r\n    this.listData = await list(this.listQuery, this.listQueryData)\r\n    this.listLoading = false\r\n  }\r\n\r\n  // 生命周期 life\r\n  created() {\r\n    // this.getList();\r\n  }\r\n\r\n  // 事件 handle\r\n  private async handlePreview(index: number, row: ICourseBaseDTO) {\r\n    if (row.courseBaseId) {\r\n      window.open(\r\n        `${process.env.VUE_APP_SERVER_API_URL}/content/course/preview/${row.courseBaseId}`,\r\n        '_blank'\r\n      )\r\n      // window.open(\r\n      //   `${process.env.VUE_APP_SERVER_API_URL}/content/course/preview/${row.courseBaseId}/${row.companyId}`,\r\n      //   '_blank'\r\n      // )\r\n    }\r\n  }\r\n  private handleEdit(index: number, row: ICourseBaseDTO) {\r\n    this.$router.push({\r\n      path: `/organization/course-add?courseBaseId=${row.id}&teachmode=${row.teachmode}`\r\n      //path: `/organization/course-add?courseBaseId=${row.courseBaseId}&teachmode=${row.teachmode}`\r\n    })\r\n  }\r\n  private async handleCommit(index: number, row: ICourseBaseDTO) {\r\n    if (row.courseBaseId) {\r\n      await commitCourse(row.courseBaseId)\r\n      await this.getList()\r\n    }\r\n  }\r\n  private async handlePublish(index: number, row: ICourseBaseDTO) {\r\n    if (row.courseBaseId) {\r\n      await publishCourse(row.courseBaseId)\r\n      await this.getList()\r\n    }\r\n  }\r\n  private async handleViewDetail(index: number, row: ICourseBaseDTO) {\r\n    if (row.coursePubId) {\r\n      window.open(\r\n        `${process.env.VUE_APP_SERVER_QINIU_URL}/course_pub/${row.coursePubId}.html`,\r\n        '_blank'\r\n      )\r\n    }\r\n  }\r\n  private async handleOffline(index: number, row: ICourseBaseDTO) {\r\n    if (row.courseBaseId) {\r\n      await offlineCourse(row.courseBaseId)\r\n      await this.getList()\r\n    }\r\n  }\r\n  private async handleDelete(index: number, row: ICourseBaseDTO) {\r\n    try {\r\n      await this.showDeleteConfirm()\r\n      if (row.courseBaseId) {\r\n        await removeCourse(row.courseBaseId)\r\n        await this.getList()\r\n      }\r\n    } catch (error) {}\r\n  }\r\n  private handleShowTypeDlg() {\r\n    this.typeDialogVisible = true\r\n  }\r\n\r\n  // 监控 watch\r\n  // 搜索栏\r\n  @Watch('listQueryData', { deep: true, immediate: true })\r\n  private watchListQueryData(newVal: string) {\r\n    if (newVal == '') {\r\n      return\r\n    }\r\n    this.getList()\r\n  }\r\n  // 翻页 pageSize\r\n  @Watch('listQuery.pageSize', { immediate: true })\r\n  private watchListQueryPageSize(newVal: number) {\r\n    this.listQuery.pageNo = 1\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.workspace .banner .btn-add {\r\n  float: right;\r\n}\r\n\r\n.searcher {\r\n  margin-top: 16px;\r\n\r\n  div {\r\n    width: 218px;\r\n    margin-right: 10px;\r\n  }\r\n}\r\n\r\n.dataList {\r\n  margin-top: 16px;\r\n}\r\n\r\n.dataList-pagination {\r\n  text-align: center;\r\n  width: 100%;\r\n}\r\n</style>\r\n"]}]}